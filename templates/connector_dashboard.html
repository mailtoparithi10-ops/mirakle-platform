<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="icon"
        href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iNiIgZmlsbD0iI2ZmZGYwMCIvPgo8dGV4dCB4PSI1IiB5PSIyMiIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE4IiBmaWxsPSJibGFjayIgZm9udC13ZWlnaHQ9ImJvbGQiPkE8L3RleHQ+Cjwvc3ZnPg==">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connector Dashboard - Alchemy</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/referral-links.css">
    <style>
        .timeline-meta {
            font-size: 0.75rem;
            color: #6b7280;
            display: flex;
            gap: 0.35rem;
        }

        /* Inbox Style */
        .inbox-list {
            background: white;
            border-radius: 1rem;
            border: 1px solid #e2e8f0;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(15, 23, 42, 0.05);
        }

        .inbox-item {
            padding: 1.5rem;
            border-bottom: 1px solid #f1f5f9;
            display: flex;
            gap: 1.5rem;
            transition: all 0.2s;
            cursor: pointer;
            position: relative;
        }

        .inbox-item:hover {
            background: #f8fafc;
        }

        .inbox-item.unread {
            background: rgba(252, 184, 46, 0.03);
            border-left: 4px solid #fcb82e;
        }

        .inbox-avatar {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: #f1f5f9;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            color: #64748b;
            flex-shrink: 0;
        }

        .inbox-content {
            flex: 1;
        }

        .inbox-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.25rem;
        }

        .inbox-sender {
            font-weight: 700;
            color: #1e293b;
        }

        .inbox-time {
            font-size: 0.8rem;
            color: #94a3b8;
        }

        .inbox-subject {
            font-weight: 600;
            color: #334155;
            margin-bottom: 0.25rem;
        }

        .inbox-preview {
            font-size: 0.9rem;
            color: #64748b;
            line-height: 1.5;
            display: -webkit-box;
            line-clamp: 1;
            -webkit-line-clamp: 1;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .inbox-badge {
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .badge-startup {
            background: #dbeafe;
            color: #1e40af;
        }

        .badge-reward {
            background: #dcfce7;
            color: #166534;
        }

        .badge-system {
            background: #fef3c7;
            color: #92400e;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #ffffff;
            min-height: 100vh;
            display: flex;
        }

        .sidebar {
            width: 240px;
            background: #000000;
            padding: 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        .main-content {
            margin-left: 240px;
            flex: 1;
            background: white;
            min-height: 100vh;
            border-radius: 20px 0 0 20px;
            overflow: hidden;
        }

        .user-profile {
            padding: 2rem;
            text-align: center;
            color: white;
            border-bottom: 1px solid rgba(252, 184, 46, 0.3);
        }

        .user-avatar-large {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 1rem;
            background: linear-gradient(135deg, #fcb82e, #f97316);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            color: #000000;
            border: 3px solid #fcb82e;
        }

        .user-name {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .user-email {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 1rem;
        }

        .edit-profile-btn {
            background: #fcb82e;
            color: #000000;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 999px;
            cursor: pointer;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
        }

        .edit-profile-btn:hover {
            background: #e5a629;
            transform: translateY(-1px);
        }

        .nav-menu {
            padding: 1rem 0;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 1rem 1.5rem;
            color: white;
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
            background: none;
            width: 100%;
            font-size: 1rem;
            text-align: left;
        }

        .nav-item:hover {
            background: #fcb82e;
            color: #000000;
        }

        .nav-item.active {
            background: #fcb82e;
            border-right: 3px solid #fcb82e;
            color: #000000;
        }

        .nav-item i {
            margin-right: 1rem;
            width: 20px;
            font-size: 1.1rem;
        }

        .nav-item .badge,
        .nav-item .rewards-badge {
            margin-left: auto;
            background: #fcb82e;
            color: #000000;
            padding: 0.2rem 0.6rem;
            border-radius: 999px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .nav-item .badge-outline {
            background: transparent;
            border: 1px solid #fcb82e;
            color: #fcb82e;
        }

        .logout-btn {
            margin: 1rem;
            padding: 0.75rem 1rem;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.4);
            color: #f8fafc;
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
            font-weight: 600;
        }

        .logout-btn:hover {
            background: #e5a629;
            transform: translateY(-1px);
        }

        .dashboard-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e2e8f0;
            background: white;
        }

        .dashboard-title {
            font-size: 2rem;
            font-weight: 700;
            color: #000000;
            margin-bottom: 0.5rem;
        }

        .dashboard-subtitle {
            color: #666666;
            font-size: 1rem;
        }

        .dashboard-content {
            padding: 1.25rem 1.5rem;
            overflow-y: auto;
            height: calc(100vh - 88px);
            background: #f9fafb;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .card {
            background: white;
            border-radius: 1rem;
            padding: 1.15rem;
            border: 1px solid #e2e8f0;
            box-shadow: 0 10px 25px rgba(15, 23, 42, 0.05);
            position: relative;
            overflow: hidden;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .card-title {
            font-size: 0.95rem;
            font-weight: 600;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 0.08em;
        }

        .card-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #020617;
            margin-bottom: 0.25rem;
        }

        .card-subtext {
            font-size: 0.85rem;
            color: #6b7280;
        }

        .trend-indicator {
            display: flex;
            align-items: center;
            gap: 0.35rem;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .trend-up {
            color: #16a34a;
        }

        .trend-down {
            color: #dc2626;
        }

        .trend-neutral {
            color: #6b7280;
        }

        .trend-indicator i {
            font-size: 0.9rem;
        }

        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 999px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card-icon.gold {
            background: rgba(252, 184, 46, 0.15);
            color: #fbbf24;
        }

        .card-icon.green {
            background: rgba(34, 197, 94, 0.12);
            color: #22c55e;
        }

        .card-icon.blue {
            background: rgba(59, 130, 246, 0.12);
            color: #3b82f6;
        }

        .card-icon.purple {
            background: rgba(168, 85, 247, 0.12);
            color: #a855f7;
        }

        /* Premium Reward Blocks */
        .reward-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px);
            border-radius: 1rem;
            border: 1px solid #e2e8f0;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            gap: 1.25rem;
            position: relative;
            padding: 1.25rem;
            overflow: hidden;
        }

        .reward-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.08);
            border-color: var(--accent-glow);
        }

        .reward-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--accent-glow);
        }

        .reward-card.green {
            --accent-glow: #10b981;
            --accent-text: #059669;
        }

        .reward-card.gold {
            --accent-glow: #f59e0b;
            --accent-text: #d97706;
        }

        .reward-card.blue {
            --accent-glow: #3b82f6;
            --accent-text: #2563eb;
        }

        .reward-card.purple {
            --accent-glow: #8b5cf6;
            --accent-text: #7c3aed;
        }

        .reward-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .reward-amount-wrap {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .reward-main-label {
            font-size: 0.8rem;
            font-weight: 700;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .reward-main-value {
            font-size: 2rem;
            font-weight: 800;
            color: #0f172a;
            letter-spacing: -0.04em;
            line-height: 1;
        }

        .reward-main-icon {
            width: 46px;
            height: 46px;
            border-radius: 12px;
            background: #f8fafc;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            color: var(--accent-text);
            border: 1px solid #f1f5f9;
        }

        .reward-pill {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.4rem 0.8rem;
            border-radius: 999px;
            background: #f8fafc;
            border: 1px solid #f1f5f9;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--accent-text);
        }

        .reward-mini-stats {
            display: grid;
            grid-template-columns: 1fr 1.15fr;
            gap: 0.75rem;
            padding-top: 1rem;
            border-top: 1px solid #f1f5f9;
            margin-top: auto;
        }

        .reward-mini-item {
            display: flex;
            flex-direction: column;
            gap: 0.2rem;
        }

        .reward-mini-label {
            font-size: 0.75rem;
            color: #94a3b8;
            font-weight: 500;
        }

        .reward-mini-value {
            font-size: 0.95rem;
            font-weight: 700;
            color: #334155;
        }

        /* Professional Ecosystem Panel */
        .professional-panel {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .panel-header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #f1f5f9;
        }

        .panel-header-left h3 {
            font-size: 1.1rem;
            font-weight: 700;
            color: #0f172a;
            margin: 0;
        }

        .panel-header-left p {
            font-size: 0.85rem;
            color: #64748b;
            margin: 0.25rem 0 0 0;
        }

        .panel-grid-layout {
            display: grid;
            grid-template-columns: 1fr 340px;
            gap: 2rem;
        }

        .stats-grid-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
        }

        .prop-stat-widget {
            padding: 1rem;
            background: #f8fafc;
            border: 1px solid #f1f5f9;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .prop-stat-label {
            font-size: 0.8rem;
            font-weight: 600;
            color: #64748b;
        }

        .prop-stat-value {
            font-size: 1rem;
            font-weight: 700;
            color: #0f172a;
        }

        .source-track-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .source-track-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1rem;
            background: #f8fafc;
            border: 1px solid #f1f5f9;
            border-radius: 10px;
        }

        .source-track-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
            font-weight: 600;
            color: #475569;
        }

        .source-track-count {
            font-weight: 800;
            color: #0f172a;
            font-size: 0.9rem;
        }

        .pill {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.6rem;
            border-radius: 999px;
            font-size: 0.75rem;
            font-weight: 600;
            background: #f9fafb;
            color: #4b5563;
            gap: 0.35rem;
        }

        .pill-dot {
            width: 0.4rem;
            height: 0.4rem;
            border-radius: 999px;
        }

        .pill-dot green {
            background: #22c55e;
        }

        .pill-dot blue {
            background: #3b82f6;
        }

        .pill-dot amber {
            background: #fbbf24;
        }

        .pill-dot red {
            background: #ef4444;
        }

        .pill-dot slate {
            background: #64748b;
        }

        .pill-outline {
            border: 1px solid rgba(148, 163, 184, 0.6);
            background: transparent;
        }

        .badge-soft {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.6rem;
            border-radius: 999px;
            font-size: 0.75rem;
            font-weight: 600;
            background: rgba(15, 23, 42, 0.03);
            color: #0f172a;
            gap: 0.35rem;
        }

        .badge-soft gold {
            color: #f59e0b;
            background: rgba(245, 158, 11, 0.12);
        }

        .badge-soft blue {
            color: #2563eb;
            background: rgba(37, 99, 235, 0.12);
        }

        .badge-soft green {
            color: #16a34a;
            background: rgba(22, 163, 74, 0.12);
        }

        .badge-soft slate {
            color: #475569;
            background: rgba(148, 163, 184, 0.18);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.15rem;
            gap: 1rem;
        }

        .section-header-main {
            display: flex;
            flex-direction: column;
            gap: 0.35rem;
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #020617;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section-subtitle {
            font-size: 0.9rem;
            color: #6b7280;
        }

        .section-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn {
            padding: 0.5rem 0.9rem;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.6);
            background: white;
            cursor: pointer;
            font-size: 0.85rem;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            color: #111827;
            font-weight: 500;
        }

        .btn-primary {
            background: #fcb82e;
            border-color: #fbbf24;
            color: #000000;
        }

        .btn-primary:hover {
            background: #e5a629;
        }

        .btn-ghost {
            background: transparent;
            border-color: rgba(148, 163, 184, 0.6);
        }

        .btn-icon {
            width: 32px;
            height: 32px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.6);
            background: white;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.9rem;
            color: #4b5563;
        }

        .btn-icon:hover {
            background: #f9fafb;
        }

        .btn-sm {
            padding: 0.25rem 0.7rem;
            font-size: 0.8rem;
        }

        .table-container {
            background: white;
            border-radius: 1rem;
            border: 1px solid #e2e8f0;
            box-shadow: 0 10px 25px rgba(15, 23, 42, 0.05);
            overflow: hidden;
        }

        .table-header {
            padding: 1rem 1.25rem;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
        }

        .table-title {
            font-size: 0.95rem;
            font-weight: 600;
            color: #111827;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .table-subtitle {
            font-size: 0.8rem;
            color: #6b7280;
            margin-top: 0.15rem;
        }

        .table-filters {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .filter-pill {
            border-radius: 999px;
            padding: 0.35rem 0.8rem;
            font-size: 0.8rem;
            border: 1px solid #e5e7eb;
            background: #f9fafb;
            color: #4b5563;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
        }

        .filter-pill.active {
            background: #111827;
            color: #f9fafb;
            border-color: #111827;
        }

        .filter-dot {
            width: 0.4rem;
            height: 0.4rem;
            border-radius: 999px;
            background: #22c55e;
        }

        .search-input {
            position: relative;
        }

        .search-input input {
            border-radius: 999px;
            border: 1px solid #e5e7eb;
            padding: 0.4rem 0.9rem 0.4rem 2rem;
            font-size: 0.8rem;
            outline: none;
        }

        .search-input i {
            position: absolute;
            left: 0.7rem;
            top: 50%;
            transform: translateY(-50%);
            color: #6b7280;
            font-size: 0.8rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        thead tr {
            background: #f9fafb;
            border-bottom: 1px solid #e5e7eb;
        }

        th,
        td {
            padding: 0.65rem 1rem;
            text-align: left;
        }

        th {
            font-size: 0.8rem;
            color: #6b7280;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        td {
            color: #111827;
            border-bottom: 1px solid #f3f4f6;
        }

        tr:last-child td {
            border-bottom: none;
        }

        .status-pill {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.6rem;
            border-radius: 999px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .status-pill pending {
            background: #fef3c7;
            color: #92400e;
        }

        .status-pill completed {
            background: #dcfce7;
            color: #166534;
        }

        .status-pill in-progress {
            background: #dbeafe;
            color: #1d4ed8;
        }

        .status-pill failed {
            background: #fee2e2;
            color: #b91c1c;
        }

        .table-footer {
            padding: 0.85rem 1.5rem;
            border-top: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            color: #6b7280;
            background: #f9fafb;
        }

        .pagination {
            display: flex;
            align-items: center;
            gap: 0.35rem;
        }

        .pagination-btn {
            width: 26px;
            height: 26px;
            border-radius: 999px;
            border: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            cursor: pointer;
            background: white;
        }

        .pagination-btn.active {
            background: #111827;
            color: white;
            border-color: #111827;
        }

        .empty-state {
            padding: 2rem 1.5rem;
            text-align: center;
            color: #6b7280;
        }

        .empty-state-icon {
            width: 48px;
            height: 48px;
            border-radius: 999px;
            background: #f9fafb;
            color: #9ca3af;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            font-size: 1.4rem;
        }

        .empty-state-title {
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 0.3rem;
            color: #111827;
        }

        .empty-state-text {
            font-size: 0.8rem;
            color: #6b7280;
            margin-bottom: 1rem;
        }

        .empty-state-actions {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
        }

        .chip-row {
            display: flex;
            flex-wrap: wrap;
            gap: 0.4rem;
            margin-top: 0.35rem;
        }

        .chip {
            padding: 0.25rem 0.6rem;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.7);
            font-size: 0.75rem;
            color: #475569;
            background: #f9fafb;
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
        }

        .chip i {
            font-size: 0.75rem;
            color: #9ca3af;
        }

        .layout-split {
            display: grid;
            grid-template-columns: 2fr 1.25fr;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .progress-group {
            display: grid;
            grid-template-columns: 1.2fr 1.2fr 1.2fr;
            gap: 1rem;
            margin-top: 0.6rem;
        }

        .progress-item {
            font-size: 0.8rem;
            color: #6b7280;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            border-radius: 999px;
            background: #e5e7eb;
            overflow: hidden;
            margin: 0.2rem 0 0.35rem 0;
        }

        .progress-bar-fill {
            height: 100%;
            border-radius: 999px;
        }

        .progress-bar-fill.gold {
            background: linear-gradient(90deg, #facc15, #f97316);
        }

        .progress-bar-fill.blue {
            background: linear-gradient(90deg, #60a5fa, #2563eb);
        }

        .progress-bar-fill.green {
            background: linear-gradient(90deg, #4ade80, #16a34a);
        }

        .timeline {
            padding: 0.4rem 0 0.2rem 0;
        }

        .timeline-item {
            display: flex;
            gap: 0.8rem;
            padding: 0.6rem 0;
            position: relative;
        }

        .timeline-marker-wrap {
            position: relative;
            padding-top: 0.1rem;
        }

        .timeline-marker {
            width: 9px;
            height: 9px;
            border-radius: 999px;
            border: 2px solid #facc15;
            background: #fef9c3;
            position: relative;
            z-index: 1;
        }

        .timeline-line {
            position: absolute;
            top: 12px;
            left: 4px;
            width: 1px;
            background: #e5e7eb;
            bottom: -0.4rem;
        }

        .timeline-content {
            flex: 1;
        }

        .timeline-title {
            font-size: 0.85rem;
            font-weight: 600;
            color: #111827;
            margin-bottom: 0.1rem;
        }

        .timeline-meta {
            font-size: 0.75rem;
            color: #6b7280;
            display: flex;
            gap: 0.35rem;
            align-items: center;
        }

        .timeline-tags {
            margin-top: 0.25rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.25rem;
        }

        .timeline-tag {
            padding: 0.15rem 0.4rem;
            border-radius: 999px;
            background: #f9fafb;
            font-size: 0.7rem;
            color: #6b7280;
            border: 1px solid #e5e7eb;
        }

        .timeline-badge {
            padding: 0.15rem 0.45rem;
            border-radius: 999px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .timeline-badge.gold {
            background: rgba(245, 158, 11, 0.1);
            color: #b45309;
        }

        .timeline-badge.blue {
            background: rgba(37, 99, 235, 0.12);
            color: #1d4ed8;
        }

        .timeline-badge.green {
            background: rgba(22, 163, 74, 0.12);
            color: #15803d;
        }

        .level-card {
            background: #020617;
            color: white;
            border-radius: 1.25rem;
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(148, 163, 184, 0.5);
            box-shadow: 0 18px 45px rgba(15, 23, 42, 0.6);
        }

        .level-card::before {
            content: "";
            position: absolute;
            inset: -40%;
            background: radial-gradient(circle at top left, rgba(252, 211, 77, 0.23), transparent 55%), radial-gradient(circle at bottom right, rgba(248, 250, 252, 0.12), transparent 60%);
            opacity: 1;
            pointer-events: none;
        }

        .level-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            position: relative;
            z-index: 1;
            margin-bottom: 1.1rem;
        }

        .level-main-title {
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.6rem;
        }

        .level-badge {
            padding: 0.25rem 0.6rem;
            border-radius: 999px;
            background: rgba(15, 23, 42, 0.85);
            border: 1px solid rgba(148, 163, 184, 0.7);
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: #e5e7eb;
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
        }

        .level-badge i {
            font-size: 0.7rem;
            color: #eab308;
        }

        .level-number-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.35rem 0.7rem;
            border-radius: 999px;
            background: rgba(24, 24, 27, 0.9);
            border: 1px solid rgba(82, 82, 91, 0.9);
            font-size: 0.8rem;
            font-weight: 600;
            gap: 0.35rem;
            color: #e4e4e7;
        }

        .level-number-badge span {
            font-family: "SF Mono", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-size: 0.85rem;
        }

        .level-number-badge i {
            color: #22c55e;
            font-size: 0.75rem;
        }

        .level-rating {
            display: flex;
            align-items: center;
            gap: 0.35rem;
            font-size: 0.8rem;
            color: #e5e7eb;
            opacity: 0.95;
            margin-top: 0.1rem;
        }

        .level-rating i {
            color: #facc15;
        }

        .level-meta {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.75rem;
            color: #9ca3af;
            margin-top: 0.3rem;
        }

        .level-meta span {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .level-meta i {
            font-size: 0.7rem;
            opacity: 0.9;
        }

        .xp-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.5rem;
            border-radius: 999px;
            background: rgba(15, 23, 42, 0.7);
            border: 1px solid rgba(75, 85, 99, 0.8);
            font-size: 0.7rem;
            gap: 0.25rem;
            color: #e5e7eb;
        }

        .xp-badge span {
            font-family: "SF Mono", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-size: 0.8rem;
            color: #fbbf24;
        }

        .xp-badge i {
            font-size: 0.7rem;
            color: #22c55e;
        }

        .level-progress {
            margin-top: 1.35rem;
            position: relative;
            z-index: 1;
        }

        .level-progress-labels {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 0.4rem;
            font-size: 0.8rem;
            color: #e5e7eb;
        }

        .curr-level {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .curr-level span {
            font-family: "SF Mono", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-size: 0.85rem;
            color: #fcd34d;
        }

        .next-level {
            font-size: 0.75rem;
            color: #9ca3af;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .next-level i {
            font-size: 0.8rem;
            color: #facc15;
        }

        .level-progress-bar {
            width: 100%;
            height: 8px;
            border-radius: 999px;
            background: rgba(31, 41, 55, 0.9);
            overflow: hidden;
            border: 1px solid rgba(55, 65, 81, 0.9);
            box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.85);
        }

        .level-progress-fill {
            height: 100%;
            width: 60%;
            background: linear-gradient(90deg, #f59e0b, #f97316, #facc15);
            box-shadow: 0 0 15px rgba(250, 204, 21, 0.6);
            border-radius: 999px;
            position: relative;
            overflow: visible;
        }

        .level-progress-fill::after {
            content: "";
            position: absolute;
            right: 0;
            top: 50%;
            transform: translate(45%, -50%);
            width: 16px;
            height: 16px;
            border-radius: 999px;
            background: radial-gradient(circle at 30% 30%, #fefce8, #f59e0b 45%, #b45309);
            box-shadow: 0 0 18px rgba(250, 204, 21, 0.8);
            border: 2px solid rgba(15, 23, 42, 0.9);
        }

        .level-progress-caption {
            margin-top: 0.5rem;
            font-size: 0.78rem;
            color: #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0.5rem;
        }

        .level-progress-caption span {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .level-progress-caption span i {
            font-size: 0.7rem;
            color: #facc15;
        }

        .level-milestones {
            margin-top: 1.2rem;
            display: grid;
            grid-template-columns: 1.3fr 1.3fr;
            gap: 1rem;
        }

        .milestone-item {
            padding: 0.7rem 0.75rem;
            border-radius: 0.9rem;
            border: 1px solid rgba(51, 65, 85, 0.85);
            background: radial-gradient(circle at top left, rgba(15, 23, 42, 0.6), #020617);
            position: relative;
            overflow: hidden;
        }

        .milestone-item::before {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(249, 115, 22, 0.13), transparent 55%);
            opacity: 1;
            pointer-events: none;
        }

        .milestone-label {
            font-size: 0.75rem;
            color: #9ca3af;
            margin-bottom: 0.25rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .milestone-label i {
            font-size: 0.7rem;
            color: #facc15;
        }

        .milestone-value {
            font-size: 0.9rem;
            font-weight: 600;
            color: #e5e7eb;
            display: flex;
            align-items: baseline;
            gap: 0.25rem;
        }

        .milestone-value span {
            font-family: "SF Mono", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-size: 0.9rem;
        }

        .milestone-tag {
            margin-top: 0.35rem;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.7rem;
            color: #d1d5db;
            background: rgba(15, 23, 42, 0.8);
            padding: 0.18rem 0.45rem;
            border-radius: 999px;
            border: 1px solid rgba(55, 65, 81, 0.85);
        }

        .milestone-tag i {
            font-size: 0.65rem;
            color: #22c55e;
        }

        .level-footer {
            margin-top: 1rem;
            padding-top: 0.75rem;
            border-top: 1px solid rgba(51, 65, 85, 0.85);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.75rem;
            color: #9ca3af;
            position: relative;
            z-index: 1;
        }

        .level-footer span {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
        }

        .level-footer span i {
            font-size: 0.7rem;
        }

        .level-footer .cta-link {
            color: #facc15;
            font-weight: 500;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .level-footer .cta-link i {
            font-size: 0.75rem;
        }

        .level-orbit {
            position: absolute;
            inset: 0;
            pointer-events: none;
            opacity: 0.25;
        }

        .level-orbit-ring {
            position: absolute;
            border-radius: 999px;
            border: 1px dashed rgba(148, 163, 184, 0.6);
        }

        .level-orbit-ring:nth-child(1) {
            inset: 12% 8% 52% 45%;
            transform: rotate(-8deg);
        }

        .level-orbit-ring:nth-child(2) {
            inset: 35% 52% 10% 5%;
            transform: rotate(14deg);
        }

        .level-orbit-ring:nth-child(3) {
            inset: 18% 26% 24% 36%;
            transform: rotate(-22deg);
        }

        .level-orbit-dot {
            width: 7px;
            height: 7px;
            border-radius: 999px;
            background: #facc15;
            position: absolute;
            box-shadow: 0 0 12px rgba(250, 204, 21, 0.8);
        }

        .level-orbit-dot.dot-1 {
            top: 18%;
            left: 62%;
        }

        .level-orbit-dot.dot-2 {
            top: 58%;
            right: 22%;
        }

        .level-orbit-dot.dot-3 {
            bottom: 18%;
            left: 32%;
        }

        .insights-card {
            background: white;
            border-radius: 1rem;
            border: 1px solid #e2e8f0;
            padding: 1.3rem 1.4rem;
            box-shadow: 0 10px 25px rgba(15, 23, 42, 0.05);
        }

        .insights-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.9rem;
        }

        .insights-title {
            font-size: 0.95rem;
            font-weight: 600;
            color: #111827;
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .insights-badge {
            padding: 0.15rem 0.45rem;
            border-radius: 999px;
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            font-size: 0.7rem;
            color: #6b7280;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .insights-badge i {
            font-size: 0.7rem;
            color: #f97316;
        }

        .insights-list {
            display: grid;
            gap: 0.4rem;
        }

        .insight-item {
            display: flex;
            gap: 0.5rem;
            font-size: 0.8rem;
            color: #4b5563;
        }

        .insight-bullet {
            width: 18px;
            height: 18px;
            border-radius: 999px;
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            color: #9ca3af;
            flex-shrink: 0;
        }

        .insight-text {
            flex: 1;
        }

        .insight-highlight {
            font-weight: 600;
            color: #111827;
        }

        .insights-footer {
            margin-top: 0.75rem;
            font-size: 0.75rem;
            color: #6b7280;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .link-inline {
            color: #2563eb;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.2rem;
        }

        .link-inline i {
            font-size: 0.75rem;
        }

        .insights-labels {
            display: flex;
            flex-wrap: wrap;
            gap: 0.3rem;
        }

        .label-chip {
            padding: 0.18rem 0.45rem;
            border-radius: 999px;
            border: 1px dashed #e5e7eb;
            font-size: 0.7rem;
            color: #6b7280;
            background: #f9fafb;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .label-chip i {
            font-size: 0.7rem;
            color: #9ca3af;
        }

        .pill-row {
            display: flex;
            flex-wrap: wrap;
            gap: 0.35rem;
            margin-top: 0.5rem;
        }

        .mini-pill {
            padding: 0.18rem 0.4rem;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.6);
            font-size: 0.7rem;
            color: #64748b;
            background: #f9fafb;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .mini-pill i {
            font-size: 0.7rem;
            color: #94a3b8;
        }

        .mini-pill.highlight {
            border-style: dashed;
            border-color: #fbbf24;
            background: #fffbeb;
            color: #92400e;
        }

        .section-grid {
            display: grid;
            grid-template-columns: minmax(0, 1.75fr) minmax(0, 1.1fr);
            gap: 1.5rem;
            align-items: flex-start;
        }

        .metrics-summary {
            display: grid;
            grid-template-columns: repeat(4, minmax(0, 1fr));
            gap: 1.5rem;
            margin-top: 0.4rem;
        }

        .metrics-summary.compact {
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 0.5rem;
        }

        .metric-row {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
            padding: 0.65rem 0.9rem;
            background: #f8fafc;
            border-radius: 0.75rem;
            border: 1px solid #f1f5f9;
        }

        .metric-label {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            font-size: 0.78rem;
            color: #64748b;
            font-weight: 600;
        }

        .metric-label i {
            font-size: 0.8rem;
            color: #94a3b8;
        }

        .metric-value {
            font-family: inherit;
            font-size: 0.95rem;
            font-weight: 700;
            color: #0f172a;
        }

        .metric-tag {
            padding: 0.16rem 0.45rem;
            border-radius: 999px;
            background: #f9fafb;
            font-size: 0.7rem;
            color: #6b7280;
            border: 1px solid #e5e7eb;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .metric-tag i {
            font-size: 0.7rem;
            color: #22c55e;
        }

        .subtle-divider {
            height: 1px;
            background: linear-gradient(to right, rgba(226, 232, 240, 0.5), rgba(226, 232, 240, 1), rgba(226, 232, 240, 0.5));
            margin: 0.75rem 0;
        }

        .section-note {
            margin-top: 0.45rem;
            font-size: 0.78rem;
            color: #6b7280;
            display: flex;
            align-items: flex-start;
            gap: 0.35rem;
        }

        .section-note i {
            font-size: 0.8rem;
            color: #f59e0b;
            margin-top: 0.1rem;
        }

        .section-tabs {
            display: inline-flex;
            padding: 0.22rem;
            border-radius: 999px;
            background: #f3f4f6;
            border: 1px solid #e5e7eb;
        }

        .section-tab {
            border-radius: 999px;
            padding: 0.25rem 0.75rem;
            font-size: 0.8rem;
            border: none;
            background: transparent;
            color: #6b7280;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
        }

        .section-tab.active {
            background: white;
            color: #111827;
            box-shadow: 0 1px 2px rgba(15, 23, 42, 0.08);
        }

        .section-tab i {
            font-size: 0.8rem;
        }

        .pill-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.15rem 0.45rem;
            border-radius: 999px;
            border: 1px solid #e5e7eb;
            background: #f9fafb;
            font-size: 0.7rem;
            color: #6b7280;
        }

        .pill-indicator span {
            display: inline-flex;
            align-items: center;
            gap: 0.15rem;
        }

        .pill-indicator i {
            font-size: 0.7rem;
            color: #22c55e;
        }

        .highlight-box {
            border-radius: 0.85rem;
            border: 1px dashed rgba(148, 163, 184, 0.7);
            background: #f9fafb;
            padding: 0.7rem 0.75rem;
            font-size: 0.78rem;
            color: #4b5563;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0.75rem;
            margin-top: 0.5rem;
        }

        .highlight-box span {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .highlight-box span i {
            font-size: 0.75rem;
            color: #22c55e;
        }

        .highlight-box .link-inline {
            font-size: 0.75rem;
        }

        .tier-badges {
            display: flex;
            flex-wrap: wrap;
            gap: 0.35rem;
            margin-top: 0.35rem;
        }

        .tier-badge {
            padding: 0.16rem 0.45rem;
            border-radius: 999px;
            font-size: 0.7rem;
            border: 1px solid rgba(148, 163, 184, 0.7);
            display: inline-flex;
            align-items: center;
            gap: 0.2rem;
            background: #f9fafb;
            color: #4b5563;
        }

        .tier-badge i {
            font-size: 0.7rem;
        }

        .tier-badge.gold {
            border-color: #fbbf24;
            background: #fffbeb;
            color: #92400e;
        }

        .segmented-progress {
            display: flex;
            gap: 0.3rem;
            margin-top: 0.4rem;
        }

        .segment {
            flex: 1;
            height: 4px;
            border-radius: 999px;
            overflow: hidden;
            background: #e5e7eb;
            position: relative;
        }

        .segment-fill {
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, #8b5cf6, #7c3aed);
        }

        .segment.fill-low .segment-fill {
            width: 35%;
        }

        .segment.fill-medium .segment-fill {
            width: 65%;
        }

        .segment.fill-full .segment-fill {
            width: 100%;
        }

        .segmented-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: #475569;
            font-weight: 600;
            margin-top: 0.6rem;
            margin-bottom: 0.5rem;
        }

        .referral-source-list {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-top: 0;
        }

        .referral-source-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.65rem 0.9rem;
            background: #f8fafc;
            border-radius: 0.75rem;
            border: 1px solid #f1f5f9;
        }

        .referral-source-label {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
        }

        .referral-source-label i {
            font-size: 0.8rem;
            color: #9ca3af;
        }

        .referral-source-metrics {
            font-size: 0.85rem;
            color: #1e293b;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-weight: 700;
        }

        .referral-source-metrics span.highlight {
            color: #f97316;
            font-size: 1rem;
            font-weight: 800;
        }

        .summary-split-grid {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .metrics-summary-stack {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
        }

        .referrals-summary {
            display: grid;
            grid-template-columns: repeat(3, minmax(0, 1fr));
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .summary-item {
            font-size: 0.78rem;
            color: #6b7280;
        }

        .summary-item span {
            display: block;
        }

        .summary-item strong {
            font-family: "SF Mono", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-size: 0.8rem;
            color: #111827;
        }

        .pill-compact {
            padding: 0.18rem 0.4rem;
            border-radius: 999px;
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            font-size: 0.7rem;
            color: #6b7280;
            display: inline-flex;
            align-items: center;
            gap: 0.2rem;
        }

        .pill-compact i {
            font-size: 0.7rem;
            color: #9ca3af;
        }

        .stats-row {
            display: flex;
            flex-wrap: wrap;
            gap: 0.4rem;
            margin-top: 0.4rem;
            font-size: 0.78rem;
            color: #6b7280;
        }

        .stats-row span {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .stats-row span i {
            font-size: 0.7rem;
            color: #94a3b8;
        }

        .section-divider {
            height: 1px;
            background: linear-gradient(to right, rgba(226, 232, 240, 0.2), rgba(148, 163, 184, 0.7), rgba(226, 232, 240, 0.2));
            margin: 0.75rem 0 0.65rem 0;
        }

        .tab-layout {
            display: flex;
            gap: 1.2rem;
            font-size: 0.8rem;
            color: #6b7280;
            margin-bottom: 1rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .tab-layout button {
            background: none;
            border: none;
            padding: 0.5rem 0;
            cursor: pointer;
            position: relative;
            color: #6b7280;
            font-weight: 500;
        }

        .tab-layout button.active {
            color: #111827;
        }

        .tab-layout button.active::after {
            content: "";
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 2px;
            background: #111827;
            border-radius: 999px;
        }

        .metric-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 0.35rem;
            margin-top: 0.5rem;
            font-size: 0.75rem;
        }

        .metric-chip {
            padding: 0.18rem 0.45rem;
            border-radius: 999px;
            border: 1px solid #e5e7eb;
            background: #f9fafb;
            color: #4b5563;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .metric-chip i {
            font-size: 0.7rem;
            color: #94a3b8;
        }

        .highlight-dot {
            width: 6px;
            height: 6px;
            border-radius: 999px;
            background: #22c55e;
        }

        .badge-mono {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.18rem 0.45rem;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.8);
            font-size: 0.7rem;
            color: #111827;
            background: #f9fafb;
        }

        .badge-mono i {
            font-size: 0.7rem;
            color: #0f172a;
            opacity: 0.7;
        }

        .badge-mono .muted {
            color: #6b7280;
            font-weight: 400;
        }

        .section-footer {
            margin-top: 1rem;
            font-size: 0.78rem;
            color: #6b7280;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0.6rem;
        }

        .section-footer span {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .section-footer span i {
            font-size: 0.75rem;
            color: #9ca3af;
        }

        .section-footer a.link {
            color: #2563eb;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .section-footer a.link i {
            font-size: 0.75rem;
        }

        .pill-soft {
            padding: 0.2rem 0.5rem;
            border-radius: 999px;
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            font-size: 0.7rem;
            color: #4b5563;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .pill-soft i {
            font-size: 0.7rem;
            color: #9ca3af;
        }

        .detail-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 0.7rem;
            margin-top: 0.6rem;
            font-size: 0.8rem;
            color: #4b5563;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            gap: 0.5rem;
        }

        .detail-label {
            color: #6b7280;
        }

        .detail-value {
            font-family: "SF Mono", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            color: #111827;
        }

        .info-banner {
            border-radius: 0.85rem;
            border: 1px solid rgba(148, 163, 184, 0.7);
            background: linear-gradient(to right, #f9fafb, #fefce8);
            padding: 0.75rem 0.9rem;
            font-size: 0.78rem;
            color: #4b5563;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .info-banner i {
            font-size: 0.85rem;
            color: #eab308;
        }

        .info-banner a {
            color: #2563eb;
            font-weight: 500;
        }

        .toggle-group {
            display: inline-flex;
            border-radius: 999px;
            border: 1px solid #e5e7eb;
            overflow: hidden;
            font-size: 0.78rem;
        }

        .toggle-btn {
            padding: 0.25rem 0.7rem;
            border: none;
            background: transparent;
            cursor: pointer;
            color: #6b7280;
        }

        .toggle-btn.active {
            background: #111827;
            color: #f9fafb;
        }

        .form-grid {
            display: grid;
            gap: 1rem;
            margin-top: 0.5rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
            font-size: 0.82rem;
        }

        .form-label {
            color: #4b5563;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .form-label i {
            font-size: 0.75rem;
            color: #9ca3af;
        }

        .form-input,
        .form-select {
            border-radius: 0.6rem;
            border: 1px solid #e5e7eb;
            padding: 0.45rem 0.6rem;
            font-size: 0.8rem;
            outline: none;
        }

        .form-input:focus,
        .form-select:focus {
            border-color: #111827;
            box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.95);
        }

        .form-helper {
            font-size: 0.75rem;
            color: #6b7280;
        }

        .toggle-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .toggle-label {
            font-size: 0.8rem;
            color: #4b5563;
            display: flex;
            flex-direction: column;
            gap: 0.2rem;
        }

        .toggle-switch {
            width: 36px;
            height: 20px;
            border-radius: 999px;
            background: #e5e7eb;
            border: 1px solid #d1d5db;
            position: relative;
            cursor: pointer;
        }

        .toggle-thumb {
            width: 14px;
            height: 14px;
            border-radius: 999px;
            background: white;
            position: absolute;
            top: 2px;
            left: 2px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .toggle-switch.active {
            background: #22c55e;
            border-color: #22c55e;
        }

        .toggle-switch.active .toggle-thumb {
            left: 18px;
        }

        .profile-avatar {
            width: 46px;
            height: 46px;
            border-radius: 999px;
            background: linear-gradient(135deg, #fbbf24, #f97316);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            font-weight: 600;
            color: #0f172a;
            border: 2px solid rgba(15, 23, 42, 0.9);
        }

        .two-column {
            display: grid;
            grid-template-columns: minmax(0, 1.4fr) minmax(0, 1.2fr);
            gap: 0.75rem;
        }

        .secondary-card {
            background: white;
            border-radius: 1rem;
            border: 1px solid #e2e8f0;
            padding: 1.1rem;
            box-shadow: 0 10px 25px rgba(15, 23, 42, 0.05);
        }

        .profile-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .profile-main {
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .profile-text {
            display: flex;
            flex-direction: column;
            gap: 0.1rem;
        }

        .profile-name {
            font-size: 0.95rem;
            font-weight: 600;
            color: #111827;
        }

        .profile-meta {
            font-size: 0.8rem;
            color: #6b7280;
            display: flex;
            align-items: center;
            gap: 0.4rem;
            flex-wrap: wrap;
        }

        .profile-meta span {
            display: inline-flex;
            align-items: center;
            gap: 0.2rem;
        }

        .profile-meta span i {
            font-size: 0.7rem;
            color: #9ca3af;
        }

        .profile-tag {
            padding: 0.15rem 0.45rem;
            border-radius: 999px;
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            font-size: 0.7rem;
            color: #6b7280;
        }

        .profile-actions {
            display: flex;
            gap: 0.4rem;
        }

        .pill-soft-gold {
            padding: 0.18rem 0.45rem;
            border-radius: 999px;
            background: #fffbeb;
            border: 1px solid #facc15;
            font-size: 0.7rem;
            color: #92400e;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .pill-soft-gold i {
            font-size: 0.7rem;
            color: #eab308;
        }

        .profile-details {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 0.6rem;
            margin-top: 0.2rem;
            font-size: 0.8rem;
            color: #4b5563;
        }

        .profile-detail-item {
            display: flex;
            justify-content: space-between;
            gap: 0.4rem;
        }

        .profile-detail-label {
            color: #6b7280;
        }

        .profile-detail-value {
            font-family: "SF Mono", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            color: #111827;
            font-size: 0.8rem;
        }

        .quick-actions {
            margin-top: 0.8rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.4rem;
        }

        .quick-action-btn {
            padding: 0.3rem 0.6rem;
            border-radius: 999px;
            border: 1px solid #e5e7eb;
            background: #f9fafb;
            font-size: 0.75rem;
            color: #4b5563;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            cursor: pointer;
        }

        .quick-action-btn i {
            font-size: 0.75rem;
            color: #9ca3af;
        }

        .settings-list {
            margin-top: 0.5rem;
            display: grid;
            gap: 0.4rem;
            font-size: 0.8rem;
            color: #4b5563;
        }

        .settings-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0.5rem;
            padding: 0.4rem 0;
            border-bottom: 1px dashed #e5e7eb;
        }

        .settings-row:last-child {
            border-bottom: none;
        }

        .settings-label {
            display: flex;
            flex-direction: column;
            gap: 0.1rem;
        }

        .settings-title {
            font-weight: 500;
        }

        .settings-desc {
            font-size: 0.75rem;
            color: #6b7280;
        }

        .alert-card {
            margin-top: 0.8rem;
            border-radius: 0.85rem;
            border: 1px solid rgba(248, 180, 28, 0.6);
            background: #fffbeb;
            padding: 0.65rem 0.75rem;
            font-size: 0.78rem;
            display: flex;
            align-items: flex-start;
            gap: 0.45rem;
            color: #92400e;
        }

        .alert-card i {
            font-size: 0.85rem;
            margin-top: 0.05rem;
        }

        .referral-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1.25rem;
            border-bottom: 1px solid #e5e7eb;
            background: #f9fafb;
        }

        .referral-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: #111827;
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .referral-title span {
            font-size: 0.8rem;
            color: #6b7280;
            font-weight: 400;
        }

        .referral-filters {
            display: flex;
            gap: 0.4rem;
            align-items: center;
        }

        .badge-count {
            padding: 0.1rem 0.4rem;
            border-radius: 999px;
            background: #111827;
            color: #f9fafb;
            font-size: 0.7rem;
            font-weight: 500;
        }

        .status-chip {
            padding: 0.18rem 0.45rem;
            border-radius: 999px;
            border: 1px solid #e5e7eb;
            font-size: 0.7rem;
            color: #4b5563;
            background: #f9fafb;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .status-chip i {
            font-size: 0.7rem;
            color: #9ca3af;
        }

        .label-light {
            font-size: 0.75rem;
            color: #9ca3af;
            text-transform: uppercase;
            letter-spacing: 0.06em;
        }

        .meta-row {
            display: flex;
            flex-wrap: wrap;
            gap: 0.4rem;
            margin-top: 0.4rem;
            font-size: 0.78rem;
            color: #6b7280;
        }

        .meta-row span {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .meta-row span i {
            font-size: 0.7rem;
            color: #9ca3af;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, minmax(0, 1fr));
            gap: 0.75rem;
            margin-top: 0.5rem;
        }

        .mini-stat {
            padding: 0.55rem 0.6rem;
            border-radius: 0.85rem;
            border: 1px solid #e5e7eb;
            background: #f9fafb;
            font-size: 0.78rem;
            color: #4b5563;
            display: flex;
            flex-direction: column;
            gap: 0.2rem;
        }

        .mini-stat span:first-child {
            font-size: 0.7rem;
            color: #6b7280;
        }

        .mini-stat span:last-child {
            font-family: "SF Mono", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            color: #111827;
            font-size: 0.85rem;
        }

        .label-muted {
            font-size: 0.78rem;
            color: #9ca3af;
        }

        .pill-status {
            padding: 0.2rem 0.45rem;
            border-radius: 999px;
            border: 1px solid #e5e7eb;
            font-size: 0.7rem;
            color: #4b5563;
            background: #f9fafb;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .pill-status span {
            width: 6px;
            height: 6px;
            border-radius: 999px;
            background: #22c55e;
        }

        .pill-status.pending span {
            background: #f97316;
        }

        .pill-status.paused span {
            background: #e5e7eb;
        }

        .pill-status i {
            font-size: 0.7rem;
            color: #9ca3af;
        }

        .summary-card {
            padding: 0.75rem 0.8rem;
            border-radius: 0.85rem;
            border: 1px solid #e5e7eb;
            background: #f9fafb;
            font-size: 0.78rem;
            color: #4b5563;
            margin-top: 0.5rem;
        }

        .summary-card strong {
            color: #111827;
        }

        .summary-card span {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .summary-card span i {
            font-size: 0.75rem;
            color: #22c55e;
        }

        .kpi-row {
            display: flex;
            flex-wrap: wrap;
            gap: 0.4rem;
            margin-top: 0.45rem;
            font-size: 0.78rem;
            color: #6b7280;
        }

        .kpi-row span {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .kpi-row span i {
            font-size: 0.7rem;
            color: #94a3b8;
        }

        .section-caption {
            font-size: 0.75rem;
            color: #9ca3af;
            margin-top: 0.35rem;
        }

        .pill-slim {
            padding: 0.15rem 0.4rem;
            border-radius: 999px;
            background: #f9fafb;
            border: 1px dashed #e5e7eb;
            font-size: 0.7rem;
            color: #6b7280;
            display: inline-flex;
            align-items: center;
            gap: 0.2rem;
        }

        .pill-slim i {
            font-size: 0.7rem;
            color: #9ca3af;
        }

        .section-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            color: #9ca3af;
        }

        .section-chip-row {
            display: flex;
            flex-wrap: wrap;
            gap: 0.35rem;
            margin-top: 0.4rem;
        }

        .section-chip {
            padding: 0.18rem 0.45rem;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.7);
            font-size: 0.7rem;
            color: #4b5563;
            background: #f9fafb;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .section-chip i {
            font-size: 0.7rem;
            color: #9ca3af;
        }

        @media (max-width: 1024px) {

            .layout-split,
            .section-grid,
            .two-column {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            body {
                flex-direction: column;
            }

            .sidebar {
                position: static;
                width: 100%;
                height: auto;
                display: flex;
                flex-direction: row;
                overflow-x: auto;
            }

            .main-content {
                margin-left: 0;
                border-radius: 0;
            }

            .user-profile {
                display: none;
            }

            .nav-menu {
                display: flex;
                padding: 0.5rem;
            }

            .nav-item {
                padding: 0.75rem 1rem;
                border-left: none;
                border-radius: 999px;
                margin-right: 0.35rem;
                white-space: nowrap;
            }

            .dashboard-content {
                height: auto;
                padding: 1rem;
            }

            .dashboard-header {
                padding: 1rem;
            }
        }

        /* Meeting Inbox Styles */
        .meeting-inbox {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .inbox-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid #e5e7eb;
        }

        .inbox-header h3 {
            font-size: 16px;
            font-weight: 600;
            color: #1f2937;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .meeting-badge {
            background: #ef4444;
            color: white;
            font-size: 12px;
            font-weight: 600;
            padding: 2px 8px;
            border-radius: 10px;
            min-width: 20px;
            text-align: center;
        }

        .meeting-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .meeting-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid transparent;
        }

        .meeting-item:hover {
            background: #f9fafb;
            border-color: #e5e7eb;
        }

        .meeting-today {
            background: #fef3c7;
            border-color: #f59e0b;
        }

        .meeting-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: #4f46e5;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
        }

        .meeting-details {
            flex: 1;
        }

        .meeting-title {
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 4px;
            font-size: 14px;
        }

        .meeting-time {
            color: #6b7280;
            font-size: 12px;
            margin-bottom: 4px;
        }

        .meeting-meta {
            display: flex;
            gap: 12px;
            font-size: 11px;
        }

        .time-until {
            color: #059669;
            font-weight: 500;
        }

        .participant-count {
            color: #6b7280;
        }

        .meeting-actions {
            display: flex;
            gap: 8px;
        }

        .join-btn {
            width: 32px;
            height: 32px;
            border-radius: 6px;
            border: none;
            background: #10b981;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .join-btn:hover {
            background: #059669;
            transform: scale(1.05);
        }

        .empty-meetings {
            text-align: center;
            padding: 40px 20px;
            color: #9ca3af;
        }

        .empty-meetings i {
            font-size: 32px;
            margin-bottom: 12px;
            display: block;
        }

        .empty-meetings p {
            font-weight: 500;
            margin-bottom: 4px;
        }

        .empty-meetings small {
            font-size: 12px;
        }

        /* Program Card Styles */
        .programs-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
        }

        .program-card {
            background: white;
            border-radius: 1rem;
            border: 1px solid #e2e8f0;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .program-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
            border-color: #6366f1;
        }

        .program-header {
            height: 160px;
            background: linear-gradient(135deg, #0f172a, #334155);
            background-size: cover;
            background-position: center;
            padding: 1.25rem;
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            position: relative;
        }

        .program-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.7));
            z-index: 1;
        }

        .program-logo {
            width: 48px;
            height: 48px;
            background: white;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            color: #000;
            position: relative;
            z-index: 2;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            font-size: 1.2rem;
        }

        .program-type-badge {
            position: relative;
            z-index: 2;
            background: rgba(255, 255, 255, 0.9);
            color: #1f2937;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            backdrop-filter: blur(4px);
        }

        .program-body {
            padding: 1.5rem;
        }

        .program-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: #111827;
        }

        .program-company {
            font-size: 0.9rem;
            color: #6b7280;
            margin-bottom: 1rem;
        }

        .program-tags {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .tag {
            padding: 0.25rem 0.5rem;
            background: #f1f5f9;
            color: #475569;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .apply-btn {
            width: 100%;
            padding: 0.75rem;
            background: #000;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .apply-btn:hover {
            opacity: 0.9;
        }
    </style>
</head>

<body>
    <aside class="sidebar">
        <div class="user-profile">
            <div class="user-avatar-large" id="userAvatar" style="overflow: hidden;">
                {% if current_user.profile_pic %}
                <img src="{{ current_user.profile_pic }}" alt="Avatar"
                    style="width: 100%; height: 100%; object-fit: cover;">
                {% else %}
                {{ current_user.name[0] if current_user.name else 'C' }}
                {% endif %}
            </div>
            <div class="user-name" id="userName">{{ current_user.name if current_user.name else 'User Name' }}</div>
            <div class="user-email" id="userEmail">{{ current_user.email if current_user.email else 'user@example.com'
                }}</div>
            <button class="edit-profile-btn" onclick="showSection('profile')">
                <i class="fa-solid fa-user-pen"></i>
                Edit Profile
            </button>
        </div>
        <nav class="nav-menu">
            <a href="/" class="nav-item" style="text-decoration: none;">
                <i class="fa-solid fa-arrow-left"></i> Back to Home
            </a>
            <button class="nav-item active" onclick="showSection('programs')" id="tab-programs">
                <i class="fa-solid fa-compass"></i>
                Explore Programs
                <span class="badge-outline" style="color: #6366f1; border-color: #6366f1;">New</span>
            </button>
            <button class="nav-item" onclick="showSection('referrals')" id="tab-referrals">
                <i class="fa-solid fa-share-nodes"></i>
                My Referrals
                <span class="badge">12</span>
            </button>
            <button class="nav-item" onclick="showSection('referral-tracking')" id="tab-referral-tracking">
                <i class="fa-solid fa-link"></i>
                Referral Link Tracking
                <span class="badge-outline" style="color: #10b981; border-color: #10b981;">Live</span>
            </button>
            <button class="nav-item" onclick="showSection('overview')" id="tab-overview">
                <i class="fa-solid fa-gauge-high"></i>
                Overview
                <span class="badge-outline">Live</span>
            </button>
            <button class="nav-item" onclick="showSection('rewards')" id="tab-rewards">
                <i class="fa-solid fa-trophy"></i>
                Rewards & Earnings
                <span class="rewards-badge">New</span>
            </button>
            <button class="nav-item" onclick="showSection('analytics')" id="tab-analytics">
                <i class="fa-solid fa-chart-line"></i>
                Analytics
            </button>
            <a href="/meetings" class="nav-item" style="text-decoration: none;">
                <i class="fa-solid fa-video"></i> My Meetings
            </a>
            <button class="nav-item" onclick="showSection('inbox')" id="tab-inbox">
                <i class="fa-solid fa-envelope"></i>
                Inbox <span class="badge">4</span>
            </button>
            <button class="nav-item" onclick="showSection('profile')" id="tab-profile">
                <i class="fa-solid fa-user"></i>
                Profile & Settings
            </button>
            <button class="nav-item" onclick="showSection('guide')" id="tab-guide"
                style="margin-top: auto; border-top: 1px solid #e2e8f0; border-radius: 0;">
                <i class="fa-solid fa-book"></i>
                Referral Guide
            </button>
        </nav>
        <button class="logout-btn" onclick="window.location.href='/logout'">
            <i class="fa-solid fa-right-from-bracket"></i>
            Logout
        </button>
    </aside>

    <main class="main-content">
        <div class="dashboard-header">
            <div class="dashboard-title" id="sectionTitle">Explore Programs</div>
            <div class="dashboard-subtitle" id="sectionSubtitle">Discover and apply to ecosystem programs relevant to
                your
                network</div>
        </div>

        <div class="dashboard-content">
            <!-- PROGRAMS SECTION -->
            <section id="programs" class="section active">
                <div class="section-header">
                    <div class="section-header-main">
                        <div class="section-title">
                            <i class="fa-solid fa-compass"></i>
                            Explore Programs
                        </div>
                        <div class="section-subtitle">
                            Discover and apply to ecosystem programs relevant to your network.
                        </div>
                    </div>
                    <div class="section-actions">
                        <div class="search-input">
                            <i class="fa-solid fa-magnifying-glass"></i>
                            <input type="text" placeholder="Search programs...">
                        </div>
                        <button class="btn">
                            <i class="fa-solid fa-filter"></i> Filters
                        </button>
                    </div>
                </div>

                <div class="programs-grid" id="connectorProgramsGrid"
                    style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem;">
                    <!-- Programs will be loaded here via JS -->
                </div>
            </section>

            <!-- REFERRALS SECTION -->
            <section id="referrals" class="section">
                <div class="section-header">
                    <div class="section-header-main">
                        <div class="section-title">
                            <i class="fa-solid fa-share-nodes"></i>
                            My Referrals
                        </div>
                        <div class="section-subtitle">
                            Track and manage all your startup referrals and their progress.
                        </div>
                    </div>
                    <div class="section-actions">
                        <button class="btn btn-primary" onclick="openAddReferralModal()">
                            <i class="fa-solid fa-plus"></i> Add New Referral
                        </button>
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-header">
                        <div>
                            <div class="table-title">All Referrals</div>
                            <div class="table-subtitle">Track status and earnings for each referral</div>
                        </div>
                        <div class="table-filters" style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                            <div class="filter-pill active" onclick="updateReferralsTabFilter('all', this)"
                                style="cursor: pointer;">
                                All Status
                            </div>
                            <div class="filter-pill" onclick="updateReferralsTabFilter('active', this)"
                                style="cursor: pointer;">
                                <span class="filter-dot" style="background: #3b82f6;"></span>
                                Active (14)
                            </div>
                            <div class="filter-pill" onclick="updateReferralsTabFilter('completed', this)"
                                style="cursor: pointer;">
                                <span class="filter-dot" style="background: #22c55e;"></span>
                                Completed (9)
                            </div>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Startup Name</th>
                                <th>Program</th>
                                <th>Date Referred</th>
                                <th>Status</th>
                                <th>Potential Reward</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="referralsTableBody">
                            <tr>
                                <td style="font-weight: 600;">BioStream</td>
                                <td>HealthTech Accelerator</td>
                                <td>Jan 15, 2026</td>
                                <td><span class="status-pill completed">Completed</span></td>
                                <td style="color: #22c55e; font-weight: 700;">2,500</td>
                                <td>
                                    <button class="btn-icon" onclick="viewReferralDetails('BioStream')">
                                        <i class="fa-solid fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600;">GreenWave AI</td>
                                <td>Sustainable Energy Challenge</td>
                                <td>Jan 18, 2026</td>
                                <td><span class="status-pill in-progress">In Progress</span></td>
                                <td style="color: #3b82f6; font-weight: 700;">3,000</td>
                                <td>
                                    <button class="btn-icon" onclick="viewReferralDetails('GreenWave AI')">
                                        <i class="fa-solid fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600;">QuantumScale</td>
                                <td>AI Logistics Pilot</td>
                                <td>Jan 20, 2026</td>
                                <td><span class="status-pill pending">Pending Review</span></td>
                                <td style="color: #f59e0b; font-weight: 700;">2,000</td>
                                <td>
                                    <button class="btn-icon" onclick="viewReferralDetails('QuantumScale')">
                                        <i class="fa-solid fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600;">MedSync Health</td>
                                <td>HealthTech Accelerator</td>
                                <td>Jan 22, 2026</td>
                                <td><span class="status-pill in-progress">Shortlisted</span></td>
                                <td style="color: #3b82f6; font-weight: 700;">2,500</td>
                                <td>
                                    <button class="btn-icon" onclick="viewReferralDetails('MedSync Health')">
                                        <i class="fa-solid fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600;">FinFlow Pro</td>
                                <td>FinTech Innovation Program</td>
                                <td>Jan 10, 2026</td>
                                <td><span class="status-pill completed">Completed</span></td>
                                <td style="color: #22c55e; font-weight: 700;">3,500</td>
                                <td>
                                    <button class="btn-icon" onclick="viewReferralDetails('FinFlow Pro')">
                                        <i class="fa-solid fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600;">AgriTech Solutions</td>
                                <td>AgriTech Accelerator</td>
                                <td>Jan 25, 2026</td>
                                <td><span class="status-pill pending">Under Review</span></td>
                                <td style="color: #f59e0b; font-weight: 700;">2,200</td>
                                <td>
                                    <button class="btn-icon" onclick="viewReferralDetails('AgriTech Solutions')">
                                        <i class="fa-solid fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600;">EduLearn Platform</td>
                                <td>EdTech Growth Program</td>
                                <td>Jan 12, 2026</td>
                                <td><span class="status-pill failed">Rejected</span></td>
                                <td style="color: #64748b; font-weight: 700;">0</td>
                                <td>
                                    <button class="btn-icon" onclick="viewReferralDetails('EduLearn Platform')">
                                        <i class="fa-solid fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600;">CloudNest</td>
                                <td>AI Logistics Pilot</td>
                                <td>Jan 8, 2026</td>
                                <td><span class="status-pill completed">Completed</span></td>
                                <td style="color: #22c55e; font-weight: 700;">2,000</td>
                                <td>
                                    <button class="btn-icon" onclick="viewReferralDetails('CloudNest')">
                                        <i class="fa-solid fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600;">SmartMobility Inc</td>
                                <td>Smart Mobility Initiative</td>
                                <td>Jan 27, 2026</td>
                                <td><span class="status-pill in-progress">Pitch Scheduled</span></td>
                                <td style="color: #3b82f6; font-weight: 700;">2,800</td>
                                <td>
                                    <button class="btn-icon" onclick="viewReferralDetails('SmartMobility Inc')">
                                        <i class="fa-solid fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600;">DataVault Security</td>
                                <td>Cybersecurity Innovation</td>
                                <td>Jan 5, 2026</td>
                                <td><span class="status-pill completed">Completed</span></td>
                                <td style="color: #22c55e; font-weight: 700;">4,000</td>
                                <td>
                                    <button class="btn-icon" onclick="viewReferralDetails('DataVault Security')">
                                        <i class="fa-solid fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600;">EcoCircle</td>
                                <td>Sustainable Energy Challenge</td>
                                <td>Jan 23, 2026</td>
                                <td><span class="status-pill in-progress">Due Diligence</span></td>
                                <td style="color: #3b82f6; font-weight: 700;">3,000</td>
                                <td>
                                    <button class="btn-icon" onclick="viewReferralDetails('EcoCircle')">
                                        <i class="fa-solid fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600;">RetailTech Hub</td>
                                <td>Retail Innovation Sprint</td>
                                <td>Jan 28, 2026</td>
                                <td><span class="status-pill pending">Application Submitted</span></td>
                                <td style="color: #f59e0b; font-weight: 700;">1,800</td>
                                <td>
                                    <button class="btn-icon" onclick="viewReferralDetails('RetailTech Hub')">
                                        <i class="fa-solid fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="table-footer">
                        <span id="referralsTableCount">Showing 3 of 12 referrals</span>
                        <div class="pagination">
                            <button class="pagination-btn" onclick="paginateReferralsTab('prev')"></button>
                            <button class="pagination-btn active" onclick="paginateReferralsTab(1)">1</button>
                            <button class="pagination-btn" onclick="paginateReferralsTab(2)">2</button>
                            <button class="pagination-btn" onclick="paginateReferralsTab('next')"></button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- REFERRAL LINK TRACKING SECTION -->
            <section id="referral-tracking" class="section">
                <div class="section-header">
                    <div class="section-header-main">
                        <div class="section-title">
                            <i class="fa-solid fa-link"></i>
                            Referral Link Tracking
                        </div>
                        <div class="section-subtitle">
                            Monitor clicks, conversions, and performance of your referral links.
                        </div>
                    </div>
                    <div class="section-actions">
                        <button class="btn" onclick="refreshReferralTracking()">
                            <i class="fa-solid fa-refresh"></i> Refresh
                        </button>
                        <button class="btn btn-primary" onclick="generateNewReferralLink()">
                            <i class="fa-solid fa-plus"></i> Generate Link
                        </button>
                    </div>
                </div>

                <!-- Referral Link Performance Cards -->
                <div class="cards-grid" style="grid-template-columns: repeat(4, 1fr); margin-bottom: 2rem;">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Total Links</div>
                            <div class="card-icon blue">
                                <i class="fa-solid fa-link"></i>
                            </div>
                        </div>
                        <div class="card-value" id="totalLinksCount">8</div>
                        <div class="card-subtext">Active referral links</div>
                        <div class="trend-indicator trend-up">
                            <i class="fa-solid fa-arrow-up"></i>
                            +2 this month
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Total Clicks</div>
                            <div class="card-icon green">
                                <i class="fa-solid fa-mouse-pointer"></i>
                            </div>
                        </div>
                        <div class="card-value" id="totalClicksCount">247</div>
                        <div class="card-subtext">Link clicks this month</div>
                        <div class="trend-indicator trend-up">
                            <i class="fa-solid fa-arrow-up"></i>
                            +18% vs last month
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Conversions</div>
                            <div class="card-icon gold">
                                <i class="fa-solid fa-bullseye"></i>
                            </div>
                        </div>
                        <div class="card-value" id="conversionsCount">23</div>
                        <div class="card-subtext">Applications submitted</div>
                        <div class="trend-indicator trend-up">
                            <i class="fa-solid fa-arrow-up"></i>
                            9.3% conversion rate
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Earnings</div>
                            <div class="card-icon purple">
                                <i class="fa-solid fa-coins"></i>
                            </div>
                        </div>
                        <div class="card-value" id="linkEarnings">11,500</div>
                        <div class="card-subtext">From referral links</div>
                        <div class="trend-indicator trend-up">
                            <i class="fa-solid fa-arrow-up"></i>
                            +2,300 this month
                        </div>
                    </div>
                </div>

                <!-- Referral Links Table -->
                <div class="table-container">
                    <div class="table-header">
                        <div>
                            <div class="table-title">Referral Link Performance</div>
                            <div class="table-subtitle">Track clicks, conversions, and earnings for each link</div>
                        </div>
                        <div class="table-filters">
                            <div class="filter-pill active" onclick="filterReferralLinks('all')">All Links</div>
                            <div class="filter-pill" onclick="filterReferralLinks('active')">
                                <span class="filter-dot" style="background: #22c55e;"></span>
                                Active (6)
                            </div>
                            <div class="filter-pill" onclick="filterReferralLinks('high-performing')">
                                <span class="filter-dot" style="background: #f59e0b;"></span>
                                High Performing (3)
                            </div>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Program</th>
                                <th>Link Token</th>
                                <th>Clicks</th>
                                <th>Conversions</th>
                                <th>Conversion Rate</th>
                                <th>Earnings</th>
                                <th>Created</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="referralLinksTableBody">
                            <tr>
                                <td style="font-weight: 600;">HealthTech Innovation Challenge</td>
                                <td>
                                    <code
                                        style="background: #f1f5f9; padding: 2px 6px; border-radius: 4px; font-size: 0.8rem;">HTI-2024-ABC123</code>
                                </td>
                                <td><strong>89</strong></td>
                                <td><strong style="color: #22c55e;">8</strong></td>
                                <td><span style="color: #22c55e; font-weight: 600;">9.0%</span></td>
                                <td><strong style="color: #22c55e;">4,000</strong></td>
                                <td>Jan 15, 2026</td>
                                <td>
                                    <button class="btn-icon" onclick="copyReferralLink('HTI-2024-ABC123')"
                                        title="Copy Link">
                                        <i class="fa-solid fa-copy"></i>
                                    </button>
                                    <button class="btn-icon" onclick="viewLinkAnalytics('HTI-2024-ABC123')"
                                        title="View Analytics">
                                        <i class="fa-solid fa-chart-line"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600;">Global Fintech Accelerator 2026</td>
                                <td>
                                    <code
                                        style="background: #f1f5f9; padding: 2px 6px; border-radius: 4px; font-size: 0.8rem;">GFA-2026-XYZ789</code>
                                </td>
                                <td><strong>67</strong></td>
                                <td><strong style="color: #22c55e;">6</strong></td>
                                <td><span style="color: #22c55e; font-weight: 600;">9.0%</span></td>
                                <td><strong style="color: #22c55e;">3,000</strong></td>
                                <td>Jan 18, 2026</td>
                                <td>
                                    <button class="btn-icon" onclick="copyReferralLink('GFA-2026-XYZ789')"
                                        title="Copy Link">
                                        <i class="fa-solid fa-copy"></i>
                                    </button>
                                    <button class="btn-icon" onclick="viewLinkAnalytics('GFA-2026-XYZ789')"
                                        title="View Analytics">
                                        <i class="fa-solid fa-chart-line"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600;">AI & Machine Learning Bootcamp</td>
                                <td>
                                    <code
                                        style="background: #f1f5f9; padding: 2px 6px; border-radius: 4px; font-size: 0.8rem;">AI-ML-DEF456</code>
                                </td>
                                <td><strong>45</strong></td>
                                <td><strong style="color: #f59e0b;">4</strong></td>
                                <td><span style="color: #f59e0b; font-weight: 600;">8.9%</span></td>
                                <td><strong style="color: #f59e0b;">2,000</strong></td>
                                <td>Jan 20, 2026</td>
                                <td>
                                    <button class="btn-icon" onclick="copyReferralLink('AI-ML-DEF456')"
                                        title="Copy Link">
                                        <i class="fa-solid fa-copy"></i>
                                    </button>
                                    <button class="btn-icon" onclick="viewLinkAnalytics('AI-ML-DEF456')"
                                        title="View Analytics">
                                        <i class="fa-solid fa-chart-line"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600;">Sustainable Energy Accelerator</td>
                                <td>
                                    <code
                                        style="background: #f1f5f9; padding: 2px 6px; border-radius: 4px; font-size: 0.8rem;">SEA-2026-GHI789</code>
                                </td>
                                <td><strong>32</strong></td>
                                <td><strong style="color: #3b82f6;">3</strong></td>
                                <td><span style="color: #3b82f6; font-weight: 600;">9.4%</span></td>
                                <td><strong style="color: #3b82f6;">1,500</strong></td>
                                <td>Jan 22, 2026</td>
                                <td>
                                    <button class="btn-icon" onclick="copyReferralLink('SEA-2026-GHI789')"
                                        title="Copy Link">
                                        <i class="fa-solid fa-copy"></i>
                                    </button>
                                    <button class="btn-icon" onclick="viewLinkAnalytics('SEA-2026-GHI789')"
                                        title="View Analytics">
                                        <i class="fa-solid fa-chart-line"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600;">CII Capacity Building Program</td>
                                <td>
                                    <code
                                        style="background: #f1f5f9; padding: 2px 6px; border-radius: 4px; font-size: 0.8rem;">CII-CB-JKL012</code>
                                </td>
                                <td><strong>14</strong></td>
                                <td><strong style="color: #6b7280;">2</strong></td>
                                <td><span style="color: #6b7280; font-weight: 600;">14.3%</span></td>
                                <td><strong style="color: #6b7280;">1,000</strong></td>
                                <td>Jan 25, 2026</td>
                                <td>
                                    <button class="btn-icon" onclick="copyReferralLink('CII-CB-JKL012')"
                                        title="Copy Link">
                                        <i class="fa-solid fa-copy"></i>
                                    </button>
                                    <button class="btn-icon" onclick="viewLinkAnalytics('CII-CB-JKL012')"
                                        title="View Analytics">
                                        <i class="fa-solid fa-chart-line"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="table-footer">
                        <span>Showing 5 of 8 referral links</span>
                        <div class="pagination">
                            <button class="pagination-btn"></button>
                            <button class="pagination-btn active">1</button>
                            <button class="pagination-btn">2</button>
                            <button class="pagination-btn"></button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- OVERVIEW SECTION -->
            <section id="overview" class="section">
                <!-- Meeting Inbox Widget -->
                <div class="meeting-inbox" id="meetingInbox">
                    <!-- Meeting inbox will be populated by JavaScript -->
                </div>

                <div class="section-header">
                    <div class="section-header-main">
                        <div class="section-title">
                            <i class="fa-solid fa-gauge-high"></i>
                            Performance Overview
                        </div>
                        <div class="section-subtitle">
                            A snapshot of your referrals, earnings, and connector impact across Alchemy.
                        </div>
                    </div>
                    <div class="section-actions">
                        <div class="section-tabs">
                            <button class="section-tab active" onclick="updateOverviewTimeframe('30d', this)">
                                <i class="fa-solid fa-calendar-week"></i>
                                Last 30 days
                            </button>
                            <button class="section-tab" onclick="updateOverviewTimeframe('all', this)">
                                <i class="fa-regular fa-calendar"></i>
                                All time
                            </button>
                        </div>
                        <button class="btn-icon" onclick="loadEnablerOverview(); showToast('Overview updated', 'info')">
                            <i class="fa-solid fa-arrow-rotate-right"></i>
                        </button>
                    </div>
                </div>

                <div class="cards-grid">
                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Total Referrals</div>
                                <div class="card-value" id="totalReferralsValue">28</div>
                            </div>
                            <div class="card-icon gold">
                                <i class="fa-solid fa-share-nodes"></i>
                            </div>
                        </div>
                        <div class="trend-indicator trend-up">
                            <i class="fa-solid fa-arrow-up-right"></i>
                            <span>+18% vs last month</span>
                        </div>
                        <div class="chip-row">
                            <span class="chip">
                                <i class="fa-solid fa-users"></i>
                                16 unique startups referred
                            </span>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Confirmed Earnings</div>
                                <div class="card-value" id="confirmedEarningsValue">85,400</div>
                            </div>
                            <div class="card-icon green">
                                <i class="fa-solid fa-indian-rupee-sign"></i>
                            </div>
                        </div>
                        <div class="trend-indicator trend-up">
                            <i class="fa-solid fa-arrow-up-right"></i>
                            <span>+12,800 this month</span>
                        </div>
                        <div class="chip-row">
                            <span class="chip">
                                <i class="fa-solid fa-circle-check"></i>
                                9 completed program rewards
                            </span>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">FLC Points</div>
                                <div class="card-value" id="flcPointsValue">3,420</div>
                            </div>
                            <div class="card-icon blue">
                                <i class="fa-solid fa-star-half-stroke"></i>
                            </div>
                        </div>
                        <div class="trend-indicator trend-neutral">
                            <i class="fa-solid fa-gauge-simple"></i>
                            <span>Level 3  Connector</span>
                        </div>
                        <div class="chip-row">
                            <span class="chip">
                                <i class="fa-solid fa-arrow-up"></i>
                                580 points to next level
                            </span>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Conversion Rate</div>
                                <div class="card-value" id="conversionRateValue">32%</div>
                            </div>
                            <div class="card-icon purple">
                                <i class="fa-solid fa-chart-simple"></i>
                            </div>
                        </div>
                        <div class="trend-indicator trend-up">
                            <i class="fa-solid fa-arrow-up-right"></i>
                            <span>+6% vs previous period</span>
                        </div>
                        <div class="chip-row">
                            <span class="chip">
                                <i class="fa-solid fa-circle-dot"></i>
                                9 / 28 referrals converted
                            </span>
                        </div>
                    </div>
                </div>

                <div class="insights-card" style="margin-bottom: 2rem;">
                    <div class="insights-header">
                        <div class="insights-title">
                            <i class="fa-solid fa-lightbulb"></i>
                            Impact Insights
                        </div>
                        <div class="insights-badge">
                            <i class="fa-solid fa-sparkles"></i>
                            AI-powered suggestions
                        </div>
                    </div>
                    <div class="insights-list"
                        style="grid-template-columns: repeat(3, 1fr); display: grid; gap: 1.5rem;">
                        <div class="insight-item">
                            <div class="insight-bullet">
                                <i class="fa-solid fa-arrow-trend-up"></i>
                            </div>
                            <div class="insight-text">
                                <span class="insight-highlight">Fintech & healthtech programs</span> have the
                                highest conversion from your network in the past 90 days.
                            </div>
                        </div>
                        <div class="insight-item">
                            <div class="insight-bullet">
                                <i class="fa-solid fa-clock-rotate-left"></i>
                            </div>
                            <div class="insight-text">
                                Startups you refer within <span class="insight-highlight">72 hours of program
                                    launch</span> are 2.3x more likely to be shortlisted.
                            </div>
                        </div>
                        <div class="insight-item">
                            <div class="insight-bullet">
                                <i class="fa-solid fa-bullseye"></i>
                            </div>
                            <div class="insight-text">
                                Focusing on <span class="insight-highlight">35 highly relevant startups per
                                    program</span> yields better results than broad sharing.
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Earnings Analytics Full Width -->
                <div
                    style="background: white; border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem; border: 1px solid #e2e8f0; box-shadow: 0 4px 6px rgba(0,0,0,0.05);">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h3 style="font-size: 1.1rem; font-weight: 700;">Earnings Analytics</h3>
                        <div style="display: flex; gap: 1rem;">
                            <span
                                style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.9rem; color: #666;">
                                <span
                                    style="display: block; width: 10px; height: 10px; background: #22c55e; border-radius: 50%;"></span>
                                Confirmed Earnings ()
                            </span>
                        </div>
                    </div>
                    <div style="height: 300px; width: 100%;">
                        <canvas id="connectorChart"></canvas>
                    </div>
                </div>

                <div class="layout-split">
                    <div class="table-container">
                        <div class="table-header">
                            <div>
                                <div class="table-title">
                                    <i class="fa-solid fa-rocket"></i>
                                    Recent Referral Activity
                                </div>
                                <div class="table-subtitle">
                                    Latest startups you've referred and their progress across programs.
                                </div>
                            </div>
                            <div class="table-filters">
                                <div class="filter-pill active" onclick="updateActivityFilter('active', this)">
                                    <span class="filter-dot"></span>
                                    Active
                                </div>
                                <div class="filter-pill" onclick="updateActivityFilter('completed', this)">
                                    Completed
                                </div>
                            </div>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>Startup</th>
                                    <th>Program</th>
                                    <th>Stage</th>
                                    <th>Potential Reward</th>
                                    <th>Last Update</th>
                                </tr>
                            </thead>
                            <tbody id="recentReferralsBody">
                                <tr>
                                    <td>
                                        <div>NovaGrid Analytics</div>
                                        <div class="label-muted">AI for energy optimization</div>
                                    </td>
                                    <td>
                                        <span class="pill">
                                            <span class="pill-dot blue"></span>
                                            Smart City Innovation Cohort
                                        </span>
                                    </td>
                                    <td>
                                        <span class="status-pill in-progress">In review</span>
                                    </td>
                                    <td>12,000</td>
                                    <td>2 days ago</td>
                                </tr>
                                <tr>
                                    <td>
                                        <div>FarmLink Labs</div>
                                        <div class="label-muted">Agri supply-chain SaaS</div>
                                    </td>
                                    <td>
                                        <span class="pill">
                                            <span class="pill-dot green"></span>
                                            Retail Innovation Sprint
                                        </span>
                                    </td>
                                    <td>
                                        <span class="status-pill completed">Completed</span>
                                    </td>
                                    <td>8,500</td>
                                    <td>5 days ago</td>
                                </tr>
                                <tr>
                                    <td>
                                        <div>MedSync Health</div>
                                        <div class="label-muted">Remote patient monitoring</div>
                                    </td>
                                    <td>
                                        <span class="pill">
                                            <span class="pill-dot amber"></span>
                                            Healthcare Pilot Program
                                        </span>
                                    </td>
                                    <td>
                                        <span class="status-pill pending">Shortlisted</span>
                                    </td>
                                    <td>15,000</td>
                                    <td>1 week ago</td>
                                </tr>
                                <tr>
                                    <td>
                                        <div>RouteX Logistics</div>
                                        <div class="label-muted">Urban last-mile optimization</div>
                                    </td>
                                    <td>
                                        <span class="pill">
                                            <span class="pill-dot slate"></span>
                                            Mobility & Logistics Challenge
                                        </span>
                                    </td>
                                    <td>
                                        <span class="status-pill in-progress">Pitch scheduled</span>
                                    </td>
                                    <td>10,000</td>
                                    <td>1 week ago</td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="table-footer">
                            <div>
                                Showing <strong>4</strong> of <strong>12</strong> active referrals
                            </div>
                            <div class="pagination" id="overviewPagination">
                                <button class="pagination-btn" onclick="paginateReferrals('prev')">&lt;</button>
                                <button class="pagination-btn active" onclick="paginateReferrals(1)">1</button>
                                <button class="pagination-btn" onclick="paginateReferrals(2)">2</button>
                                <button class="pagination-btn" onclick="paginateReferrals('next')">&gt;</button>
                            </div>
                        </div>
                    </div>

                    <div class="level-card">
                        <div class="level-orbit">
                            <div class="level-orbit-ring"></div>
                            <div class="level-orbit-ring"></div>
                            <div class="level-orbit-ring"></div>
                            <div class="level-orbit-dot dot-1"></div>
                            <div class="level-orbit-dot dot-2"></div>
                            <div class="level-orbit-dot dot-3"></div>
                        </div>
                        <div class="level-header">
                            <div>
                                <div class="level-main-title">
                                    Level Progress
                                    <span class="level-number-badge">
                                        <span>LVL 3</span>
                                        <i class="fa-solid fa-bolt"></i>
                                    </span>
                                </div>
                                <div class="level-rating">
                                    <i class="fa-solid fa-star"></i>
                                    Trusted Connector  Top 18%
                                </div>
                                <div class="level-meta">
                                    <span><i class="fa-solid fa-arrow-trend-up"></i> Growth streak: 5
                                        weeks</span>
                                    <span><i class="fa-regular fa-clock"></i> Joined 7 months ago</span>
                                </div>
                            </div>
                            <div class="xp-badge">
                                XP
                                <span id="xpValue">3,420</span>
                                <i class="fa-solid fa-plus"></i>
                            </div>
                        </div>
                        <div class="level-progress">
                            <div class="level-progress-labels">
                                <div class="curr-level">
                                    Current: <span>LVL 3</span>
                                </div>
                                <div class="next-level">
                                    Next: LVL 4
                                    <i class="fa-solid fa-location-arrow"></i>
                                </div>
                            </div>
                            <div class="level-progress-bar">
                                <div class="level-progress-fill"></div>
                            </div>
                            <div class="level-progress-caption">
                                <span>
                                    <i class="fa-solid fa-circle-up"></i>
                                    580 more XP to reach the next level
                                </span>
                                <span>
                                    <i class="fa-solid fa-ranking-star"></i>
                                    Unlock 12% higher reward multiplier
                                </span>
                            </div>
                        </div>
                        <div class="level-milestones">
                            <div class="milestone-item">
                                <div class="milestone-label">
                                    <i class="fa-solid fa-diagram-project"></i>
                                    Referral Milestones
                                </div>
                                <div class="milestone-value">
                                    <span>9</span>
                                    <span>completed programs</span>
                                </div>
                                <div class="milestone-tag">
                                    <i class="fa-solid fa-circle-check"></i>
                                    1 more to reach LVL 4
                                </div>
                            </div>
                            <div class="milestone-item">
                                <div class="milestone-label">
                                    <i class="fa-solid fa-users-line"></i>
                                    Network Activity
                                </div>
                                <div class="milestone-value">
                                    <span>16</span>
                                    active startups
                                </div>
                                <div class="milestone-tag">
                                    <i class="fa-solid fa-bullseye"></i>
                                    Focus: 34 high-fit matches / month
                                </div>
                            </div>
                        </div>
                        <div class="level-footer">
                            <span>
                                <i class="fa-solid fa-book-open-reader"></i>
                                Check <strong>Level Guide</strong> to maximize your rewards.
                            </span>
                            <span class="cta-link" onclick="showSection('analytics')">
                                View levels
                                <i class="fa-solid fa-arrow-right-long"></i>
                            </span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- REFERRALS SECTION -->
            <section id="referrals-old" class="section">
                <div class="section-header">
                    <div class="section-header-main">
                        <div class="section-title">
                            <i class="fa-solid fa-share-nodes"></i>
                            My Referrals
                        </div>
                        <div class="section-subtitle">
                            Track every startup you've referred, across programs, statuses, and reward potential.
                        </div>
                    </div>
                    <div class="section-actions">
                        <div class="search-input">
                            <i class="fa-solid fa-magnifying-glass"></i>
                            <input type="text" placeholder="Search by startup or program"
                                onkeyup="filterReferralsList(this.value)">
                        </div>
                        <button class="btn" onclick="showToast('Filter options opened', 'info')">
                            <i class="fa-solid fa-filter"></i>
                            Filters
                        </button>
                        <button class="btn-primary" onclick="openAddReferralModal()">
                            <i class="fa-solid fa-plus"></i>
                            Add referral
                        </button>
                    </div>
                </div>

                <div class="table-container">
                    <div class="referral-header">
                        <div class="referral-title">
                            Referral pipeline
                            <span>(sorted by latest activity)</span>
                        </div>
                        <div class="referral-filters">
                            <span class="badge-count" onclick="filterReferralsByStatus('all')"
                                style="cursor: pointer;">28 total</span>
                            <span class="status-chip" onclick="filterReferralsByStatus('in-progress')"
                                style="cursor: pointer;" id="chip-active">
                                <i class="fa-solid fa-circle-dot"></i>
                                Active: 14
                            </span>
                            <span class="status-chip" onclick="filterReferralsByStatus('completed')"
                                style="cursor: pointer;" id="chip-completed">
                                <i class="fa-solid fa-circle-check"></i>
                                Completed: 9
                            </span>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Startup</th>
                                <th>Program</th>
                                <th>Status</th>
                                <th>Potential Reward</th>
                                <th>Stage</th>
                                <th>Last Activity</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div>NovaGrid Analytics</div>
                                    <div class="meta-row">
                                        <span><i class="fa-solid fa-layer-group"></i> Climate & Energy</span>
                                        <span><i class="fa-solid fa-location-dot"></i> Bengaluru</span>
                                    </div>
                                </td>
                                <td>
                                    <span class="pill">
                                        <span class="pill-dot blue"></span>
                                        Smart City Innovation Cohort
                                    </span>
                                    <div class="label-muted">Cohort 2025  Batch 2</div>
                                </td>
                                <td>
                                    <span class="status-pill in-progress">In review</span>
                                </td>
                                <td>12,000</td>
                                <td>
                                    <span class="pill-compact" onclick="viewReferralDetails('NovaGrid Analytics')">
                                        <i class="fa-solid fa-clipboard-list"></i>
                                        Assessment
                                    </span>
                                </td>
                                <td>2 days ago</td>
                            </tr>
                            <tr>
                                <td>
                                    <div>FarmLink Labs</div>
                                    <div class="meta-row">
                                        <span><i class="fa-solid fa-wheat-awn"></i> AgriTech</span>
                                        <span><i class="fa-solid fa-location-dot"></i> Coimbatore</span>
                                    </div>
                                </td>
                                <td>
                                    <span class="pill">
                                        <span class="pill-dot green"></span>
                                        Retail Innovation Sprint
                                    </span>
                                    <div class="label-muted">Pilot in progress</div>
                                </td>
                                <td>
                                    <span class="status-pill completed">Completed</span>
                                </td>
                                <td>8,500</td>
                                <td>
                                    <span class="pill-compact">
                                        <i class="fa-solid fa-flag-checkered"></i>
                                        Program completed
                                    </span>
                                </td>
                                <td>5 days ago</td>
                            </tr>
                            <tr>
                                <td>
                                    <div>MedSync Health</div>
                                    <div class="meta-row">
                                        <span><i class="fa-solid fa-heart-pulse"></i> HealthTech</span>
                                        <span><i class="fa-solid fa-location-dot"></i> Chennai</span>
                                    </div>
                                </td>
                                <td>
                                    <span class="pill">
                                        <span class="pill-dot amber"></span>
                                        Healthcare Pilot Program
                                    </span>
                                    <div class="label-muted">Interview round</div>
                                </td>
                                <td>
                                    <span class="status-pill pending">Shortlisted</span>
                                </td>
                                <td>15,000</td>
                                <td>
                                    <span class="pill-compact">
                                        <i class="fa-solid fa-users-gear"></i>
                                        Founder interview
                                    </span>
                                </td>
                                <td>1 week ago</td>
                            </tr>
                            <tr>
                                <td>
                                    <div>RouteX Logistics</div>
                                    <div class="meta-row">
                                        <span><i class="fa-solid fa-truck-fast"></i> Logistics</span>
                                        <span><i class="fa-solid fa-location-dot"></i> Mumbai</span>
                                    </div>
                                </td>
                                <td>
                                    <span class="pill">
                                        <span class="pill-dot slate"></span>
                                        Mobility & Logistics Challenge
                                    </span>
                                    <div class="label-muted">PoC scoping</div>
                                </td>
                                <td>
                                    <span class="status-pill in-progress">Pitch scheduled</span>
                                </td>
                                <td>10,000</td>
                                <td>
                                    <span class="pill-compact">
                                        <i class="fa-solid fa-handshake-angle"></i>
                                        Corporate pitch
                                    </span>
                                </td>
                                <td>1 week ago</td>
                            </tr>
                            <tr>
                                <td>
                                    <div>GreenLoop Circular</div>
                                    <div class="meta-row">
                                        <span><i class="fa-solid fa-recycle"></i> Climate & Circularity</span>
                                        <span><i class="fa-solid fa-location-dot"></i> Hyderabad</span>
                                    </div>
                                </td>
                                <td>
                                    <span class="pill">
                                        <span class="pill-dot green"></span>
                                        Sustainability Innovation Grants
                                    </span>
                                    <div class="label-muted">Application submitted</div>
                                </td>
                                <td>
                                    <span class="status-pill pending">Pending</span>
                                </td>
                                <td>7,000</td>
                                <td>
                                    <span class="pill-compact">
                                        <i class="fa-solid fa-file-pen"></i>
                                        Application review
                                    </span>
                                </td>
                                <td>2 weeks ago</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="table-footer">
                        <div>
                            Showing <strong>5</strong> of <strong>28</strong> referrals
                        </div>
                        <div class="pagination">
                            <button class="pagination-btn">&lt;</button>
                            <button class="pagination-btn active">1</button>
                            <button class="pagination-btn">2</button>
                            <button class="pagination-btn">3</button>
                            <button class="pagination-btn">&gt;</button>
                        </div>
                    </div>
                </div>

                <div class="section-footer">
                    <span>
                        <i class="fa-solid fa-circle-info"></i>
                        Tip: You can use tags and filters to group referrals by cohort, sector, or partner.
                    </span>
                    <a class="link" onclick="showSection('guide')">
                        View referral guide
                        <i class="fa-solid fa-arrow-right-long"></i>
                    </a>
                </div>
            </section>

            <!-- REWARDS SECTION -->
            <section id="rewards" class="section">
                <div class="section-header">
                    <div class="section-header-main">
                        <div class="section-title">
                            <i class="fa-solid fa-trophy"></i>
                            Rewards & Earnings
                        </div>
                        <div class="section-subtitle">
                            Monitor your payouts, pending rewards, and FLC points earned from successful referrals.
                        </div>
                    </div>
                    <div class="section-actions">
                        <button class="btn" onclick="showToast('Exporting rewards data...', 'info')">
                            <i class="fa-solid fa-download"></i>
                            Export History
                        </button>
                        <button class="btn-primary"
                            onclick="showToast('Payout request submitted for verification.', 'success')">
                            <i class="fa-solid fa-wallet"></i>
                            Request Payout
                        </button>
                    </div>
                </div>

                <div class="cards-grid">
                    <!-- Available Balance -->
                    <div class="reward-card green">
                        <div class="reward-card-header">
                            <div class="reward-amount-wrap">
                                <div class="reward-main-label">Available Balance</div>
                                <div class="reward-main-value">32,600</div>
                            </div>
                            <div class="reward-main-icon">
                                <i class="fa-solid fa-wallet"></i>
                            </div>
                        </div>
                        <div class="reward-pill">
                            <i class="fa-solid fa-circle-check"></i>
                            Ready for payout
                        </div>
                        <div class="reward-mini-stats">
                            <div class="reward-mini-item">
                                <span class="reward-mini-label">Last Payout</span>
                                <span class="reward-mini-value">15,000</span>
                            </div>
                            <div class="reward-mini-item">
                                <span class="reward-mini-label">Recent</span>
                                <span class="reward-mini-value">12 Feb '25</span>
                            </div>
                        </div>
                    </div>

                    <!-- Pending Rewards -->
                    <div class="reward-card gold">
                        <div class="reward-card-header">
                            <div class="reward-amount-wrap">
                                <div class="reward-main-label">Pending Rewards</div>
                                <div class="reward-main-value">18,800</div>
                            </div>
                            <div class="reward-main-icon">
                                <i class="fa-solid fa-clock-rotate-left"></i>
                            </div>
                        </div>
                        <div class="reward-pill">
                            <i class="fa-solid fa-hourglass-half"></i>
                            In review process
                        </div>
                        <div class="reward-mini-stats">
                            <div class="reward-mini-item">
                                <span class="reward-mini-label">Programs</span>
                                <span class="reward-mini-value">6 Active</span>
                            </div>
                            <div class="reward-mini-item">
                                <span class="reward-mini-label">Avg. Wait</span>
                                <span class="reward-mini-value">42 Days</span>
                            </div>
                        </div>
                    </div>

                    <!-- All-time Earnings -->
                    <div class="reward-card blue">
                        <div class="reward-card-header">
                            <div class="reward-amount-wrap">
                                <div class="reward-main-label">Total Earnings</div>
                                <div class="reward-main-value">1,24,200</div>
                            </div>
                            <div class="reward-main-icon">
                                <i class="fa-solid fa-chart-line"></i>
                            </div>
                        </div>
                        <div class="reward-pill" style="background: #eff6ff;">
                            <i class="fa-solid fa-ranking-star"></i>
                            Top 10% Connector
                        </div>
                        <div class="reward-mini-stats">
                            <div class="reward-mini-item">
                                <span class="reward-mini-label">Completed</span>
                                <span class="reward-mini-value">31 Rewards</span>
                            </div>
                            <div class="reward-mini-item">
                                <span class="reward-mini-label">Member Since</span>
                                <span class="reward-mini-value">Aug 2023</span>
                            </div>
                        </div>
                    </div>

                    <!-- Reward Mix -->
                    <div class="reward-card purple">
                        <div class="reward-card-header">
                            <div class="reward-amount-wrap">
                                <div class="reward-main-label">Revenue Mix</div>
                                <div class="reward-main-value">62% Cash</div>
                            </div>
                            <div class="reward-main-icon">
                                <i class="fa-solid fa-gift"></i>
                            </div>
                        </div>
                        <div class="segmented-progress" style="margin-top: 0.5rem;">
                            <div class="segment fill-full">
                                <div class="segment-fill"></div>
                            </div>
                            <div class="segment fill-medium">
                                <div class="segment-fill"></div>
                            </div>
                            <div class="segment fill-low">
                                <div class="segment-fill"></div>
                            </div>
                        </div>
                        <div class="segmented-labels">
                            <span>Cash</span>
                            <span>Points</span>
                            <span>Perks</span>
                        </div>
                        <div class="reward-mini-stats">
                            <div class="reward-mini-item">
                                <span class="reward-mini-label">Current Tier</span>
                                <span class="reward-mini-value">Pro Connector</span>
                            </div>
                            <div class="reward-mini-item">
                                <span class="reward-mini-label">Multiplier</span>
                                <span class="reward-mini-value">1.4x Active</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Professional Ecosystem Snapshot -->
                <div class="professional-panel">
                    <div class="panel-header-row">
                        <div class="panel-header-left">
                            <h3>Program Snapshot</h3>
                            <p>Real-time performance metrics across your connected ecosystem.</p>
                        </div>
                        <div class="highlight-box" style="margin: 0; padding: 0.5rem 1rem; border-radius: 8px;">
                            <span style="font-size: 0.85rem; color: #475569;">
                                <i class="fa-solid fa-arrow-trend-up"></i>
                                Unlock <strong>Tier 3</strong> for early program access.
                                <span class="link-inline" onclick="openTierBenefitsModal()"
                                    style="cursor: pointer; margin-left:1rem; font-weight: 700; color: #2563eb;">
                                    Upgrade Now <i class="fa-solid fa-arrow-right-long"></i>
                                </span>
                            </span>
                        </div>
                    </div>

                    <div class="panel-grid-layout">
                        <div class="stats-grid-container">
                            <div class="prop-stat-widget">
                                <span class="prop-stat-label">Avg. Reward/Ref</span>
                                <span class="prop-stat-value">4,000</span>
                            </div>
                            <div class="prop-stat-widget">
                                <span class="prop-stat-label">Top Performing Sector</span>
                                <span class="prop-stat-value">Fintech</span>
                            </div>
                            <div class="prop-stat-widget">
                                <span class="prop-stat-label">Active Partners</span>
                                <span class="prop-stat-value">7 Firms</span>
                            </div>
                            <div class="prop-stat-widget">
                                <span class="prop-stat-label">Network Percentile</span>
                                <span class="prop-stat-value">Top 18%</span>
                            </div>
                        </div>

                        <div class="source-track-list">
                            <div class="source-track-item">
                                <div class="source-track-label">
                                    <i class="fa-solid fa-users-line" style="color: #94a3b8;"></i>
                                    Community Referrals
                                </div>
                                <div class="source-track-count">16</div>
                            </div>
                            <div class="source-track-item">
                                <div class="source-track-label">
                                    <i class="fa-solid fa-handshake-angle" style="color: #94a3b8;"></i>
                                    1:1 Introductions
                                </div>
                                <div class="source-track-count">9</div>
                            </div>
                            <div class="source-track-item">
                                <div class="source-track-label">
                                    <i class="fa-solid fa-link" style="color: #94a3b8;"></i>
                                    Direct Share Links
                                </div>
                                <div class="source-track-count">3</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-header">
                        <div>
                            <div class="table-title">
                                <i class="fa-solid fa-receipt"></i>
                                Reward & payout history
                            </div>
                            <div class="table-subtitle">
                                All completed rewards, bonus payouts, and FLC point adjustments.
                            </div>
                        </div>
                        <div class="table-filters" id="rewardTypeFilters">
                            <span class="filter-pill active" onclick="updateRewardFilter('all', this)">
                                All
                            </span>
                            <span class="filter-pill" onclick="updateRewardFilter('cash', this)">
                                Cash
                            </span>
                            <span class="filter-pill" onclick="updateRewardFilter('points', this)">
                                Points
                            </span>
                            <span class="filter-pill" onclick="updateRewardFilter('bonuses', this)">
                                Bonuses
                            </span>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Type</th>
                                <th>Description</th>
                                <th>Amount</th>
                                <th>Balance</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>14 Mar 2025</td>
                                <td>
                                    <span class="badge-soft green">
                                        <i class="fa-solid fa-indian-rupee-sign"></i>
                                        Reward
                                    </span>
                                </td>
                                <td>FarmLink Labs  Retail Innovation Sprint completion</td>
                                <td>+ 8,500</td>
                                <td>32,600</td>
                                <td>
                                    <span class="status-pill completed">Settled</span>
                                </td>
                            </tr>
                            <tr>
                                <td>05 Mar 2025</td>
                                <td>
                                    <span class="badge-soft blue">
                                        <i class="fa-solid fa-coins"></i>
                                        FLC Points
                                    </span>
                                </td>
                                <td>Monthly activity bonus  400 FLC points</td>
                                <td>+ 400 pts</td>
                                <td>3,420 pts</td>
                                <td>
                                    <span class="status-pill completed">Posted</span>
                                </td>
                            </tr>
                            <tr>
                                <td>12 Feb 2025</td>
                                <td>
                                    <span class="badge-soft gold">
                                        <i class="fa-solid fa-wallet"></i>
                                        Payout
                                    </span>
                                </td>
                                <td>Payout to bank account ending  2487</td>
                                <td>- 15,000</td>
                                <td>24,100</td>
                                <td>
                                    <span class="status-pill completed">Completed</span>
                                </td>
                            </tr>
                            <tr>
                                <td>28 Jan 2025</td>
                                <td>
                                    <span class="badge-soft green">
                                        <i class="fa-solid fa-indian-rupee-sign"></i>
                                        Reward
                                    </span>
                                </td>
                                <td>NovaGrid Analytics  Smart City Innovation Cohort selection</td>
                                <td>+ 12,000</td>
                                <td>39,100</td>
                                <td>
                                    <span class="status-pill completed">Settled</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="table-footer">
                        <div>
                            Showing latest <strong>4</strong> of <strong>40</strong> entries
                        </div>
                        <div class="pagination" id="rewardsPagination">
                            <button class="pagination-btn" onclick="paginateRewards('prev')">&lt;</button>
                            <button class="pagination-btn active" onclick="paginateRewards(1)">1</button>
                            <button class="pagination-btn" onclick="paginateRewards(2)">2</button>
                            <button class="pagination-btn" onclick="paginateRewards('next')">&gt;</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ANALYTICS SECTION -->
            <section id="analytics-old" class="section">
                <div class="section-header">
                    <div class="section-header-main">
                        <div class="section-title">
                            <i class="fa-solid fa-chart-line"></i>
                            Connector Analytics
                        </div>
                        <div class="section-subtitle">
                            Understand how your referrals perform over time and where your strongest impact comes from.
                        </div>
                    </div>
                    <div class="section-actions">
                        <div class="toggle-group">
                            <button class="toggle-btn active" onclick="updateAnalyticsRange('30D', this)">30D</button>
                            <button class="toggle-btn" onclick="updateAnalyticsRange('90D', this)">90D</button>
                            <button class="toggle-btn" onclick="updateAnalyticsRange('All', this)">All</button>
                        </div>
                        <button class="btn" onclick="showToast('Opening full analytics dashboard...', 'info')">
                            <i class="fa-solid fa-arrow-up-right-from-square"></i>
                            Open full analytics
                        </button>
                    </div>
                </div>

                <div class="two-column">
                    <div class="card">
                        <div class="section-label">Referral performance</div>
                        <div class="tab-layout">
                            <button class="active" onclick="updateAnalyticsTab('status', this)">By status</button>
                            <button onclick="updateAnalyticsTab('sector', this)">By sector</button>
                            <button onclick="updateAnalyticsTab('program', this)">By program</button>
                        </div>

                        <div class="referrals-summary">
                            <div class="summary-item" onclick="showAnalyticsDetail('submitted')"
                                style="cursor: pointer;">
                                <span>Submitted</span>
                                <strong>28</strong>
                            </div>
                            <div class="summary-item" onclick="showAnalyticsDetail('active')" style="cursor: pointer;">
                                <span>Active</span>
                                <strong>14</strong>
                            </div>
                            <div class="summary-item" onclick="showAnalyticsDetail('completed')"
                                style="cursor: pointer;">
                                <span>Completed</span>
                                <strong>9</strong>
                            </div>
                        </div>

                        <!-- Detail view for analytics -->
                        <div id="analyticsDetailView"
                            style="display: none; margin-top: 1rem; padding: 1rem; background: #f8fafc; border-radius: 8px; border: 1px solid #e2e8f0; font-size: 0.85rem;">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                <h4 id="analyticsDetailTitle" style="font-weight: 700; color: #1e293b;">Category
                                    Breakdown</h4>
                                <button onclick="this.parentElement.parentElement.style.display='none'"
                                    style="background: none; border: none; cursor: pointer; color: #64748b;"><i
                                        class="fa-solid fa-xmark"></i></button>
                            </div>
                            <div id="analyticsDetailContent" style="color: #475569;">
                                <!-- Detailed data list will go here -->
                            </div>
                        </div>

                        <div class="stats-row">
                            <span>
                                <i class="fa-solid fa-circle-up"></i>
                                Conversion: 32%
                            </span>
                            <span>
                                <i class="fa-solid fa-arrows-left-right"></i>
                                Avg. programs per startup: 1.3
                            </span>
                            <span>
                                <i class="fa-solid fa-stopwatch"></i>
                                Avg. time to decision: 21 days
                            </span>
                        </div>

                        <div class="segment">
                            <div class="segment-fill"></div>
                        </div>

                        <div class="metric-chips">
                            <span class="metric-chip">
                                <span class="highlight-dot"></span>
                                HealthTech: 48% conversion
                            </span>
                            <span class="metric-chip">
                                <span class="highlight-dot"></span>
                                FinTech: 36% conversion
                            </span>
                            <span class="metric-chip">
                                <i class="fa-solid fa-earth-asia"></i>
                                Multi-region referrals: 52%
                            </span>
                        </div>

                        <div class="section-caption">
                            Based on completed programs and confirmed selections across the last 90 days.
                        </div>
                    </div>

                    <div class="card">
                        <div class="section-label">Ecosystem signals</div>
                        <div class="section-note">
                            <i class="fa-solid fa-signal"></i>
                            Trends from startups, programs, and connectors similar to your activity.
                        </div>

                        <div class="metric-chips">
                            <span class="badge-mono">
                                <i class="fa-solid fa-fire"></i>
                                <span>Emerging focus: Climate & sustainability programs</span>
                            </span>
                        </div>

                        <div class="kpi-row">
                            <span>
                                <i class="fa-solid fa-calendar-week"></i>
                                Best day to share: TueThu
                            </span>
                            <span>
                                <i class="fa-solid fa-clock"></i>
                                Best time: 10am1pm IST
                            </span>
                        </div>

                        <div class="section-divider"></div>

                        <div class="referral-source-list">
                            <div class="referral-source-item">
                                <div class="referral-source-label">
                                    <i class="fa-solid fa-square-share-nodes"></i>
                                    Top-performing channel
                                </div>
                                <div class="referral-source-metrics">
                                    <span class="highlight">58%</span>
                                    <span>via curated cohorts</span>
                                </div>
                            </div>
                            <div class="referral-source-item">
                                <div class="referral-source-label">
                                    <i class="fa-solid fa-people-arrows"></i>
                                    High-intent startups
                                </div>
                                <div class="referral-source-metrics">
                                    <span class="highlight">3.1x</span>
                                    <span>better outcome from 1:1 intros</span>
                                </div>
                            </div>
                        </div>

                        <div class="section-footer">
                            <span>
                                <i class="fa-solid fa-circle-info"></i>
                                You can improve outcomes by aligning referrals to sector-specific programs and program
                                maturity.
                            </span>
                            <a class="link" onclick="showToast('Connector playbook loading...', 'info')">
                                View connector playbook
                                <i class="fa-solid fa-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- PROFILE SECTION -->
            <section id="profile" class="section">
                <div class="section-header">
                    <div class="section-header-main">
                        <div class="section-title">
                            <i class="fa-solid fa-user"></i>
                            Profile & Settings
                        </div>
                        <div class="section-subtitle">
                            Manage your account information, notification preferences, and payout details.
                        </div>
                    </div>
                    <div class="section-actions">
                        <button class="btn" onclick="showToast('Changes reset to last save.', 'info')">
                            <i class="fa-solid fa-rotate"></i>
                            Reset changes
                        </button>
                        <button class="btn-primary"
                            onclick="showToast('Profile and settings saved successfully!', 'success')">
                            <i class="fa-solid fa-floppy-disk"></i>
                            Save changes
                        </button>
                    </div>
                </div>

                <div class="two-column">
                    <div class="secondary-card">
                        <div class="profile-header">
                            <div class="profile-main">
                                <div class="profile-avatar" id="profileAvatar">{{ current_user.name[0].upper() if
                                    current_user.name else 'U' }}</div>
                                <div class="profile-text">
                                    <div class="profile-name" id="profileName">{{ current_user.name if current_user.name
                                        else 'User Name' }}</div>
                                    <div class="profile-meta">
                                        <span>
                                            <i class="fa-solid fa-badge-check"></i>
                                            Verified connector
                                        </span>
                                        <span class="profile-tag">Connector  India</span>
                                    </div>
                                </div>
                            </div>
                            <div class="profile-actions">
                                <input type="file" id="profilePhotoInput" accept="image/*" style="display: none;"
                                    onchange="handleProfilePhotoUpload(event)">
                                <button class="quick-action-btn"
                                    onclick="document.getElementById('profilePhotoInput').click()">
                                    <i class="fa-solid fa-camera"></i>
                                    Update photo
                                </button>
                                <span class="pill-soft-gold">
                                    <i class="fa-solid fa-ranking-star"></i>
                                    Level 3
                                </span>
                            </div>
                        </div>

                        <div class="profile-details">
                            <div class="profile-detail-item">
                                <span class="profile-detail-label">Primary email</span>
                                <span class="profile-detail-value">{{ current_user.email if current_user.email else
                                    'user@example.com' }}</span>
                            </div>
                            <div class="profile-detail-item">
                                <span class="profile-detail-label">Country</span>
                                <span class="profile-detail-value">India</span>
                            </div>
                            <div class="profile-detail-item">
                                <span class="profile-detail-label">Role</span>
                                <span class="profile-detail-value">Ecosystem connector</span>
                            </div>
                            <div class="profile-detail-item">
                                <span class="profile-detail-label">Joined</span>
                                <span class="profile-detail-value">Aug 2023</span>
                            </div>
                        </div>

                        <div class="quick-actions">
                            <button class="quick-action-btn">
                                <i class="fa-solid fa-pen"></i>
                                Edit basic info
                            </button>
                            <button class="quick-action-btn">
                                <i class="fa-solid fa-location-dot"></i>
                                Update region
                            </button>
                            <button class="quick-action-btn">
                                <i class="fa-solid fa-building"></i>
                                Add organization
                            </button>
                        </div>

                        <div class="subtle-divider"></div>

                        <div class="settings-list">
                            <div class="settings-row">
                                <div class="settings-label">
                                    <div class="settings-title">Public profile visibility</div>
                                    <div class="settings-desc">Control whether startups and partners can discover you as
                                        a connector.</div>
                                </div>
                                <div class="toggle-switch active"
                                    onclick="this.classList.toggle('active'); showToast('Setting updated', 'success')">
                                    <div class="toggle-thumb"></div>
                                </div>
                            </div>
                            <div class="settings-row">
                                <div class="settings-label">
                                    <div class="settings-title">Show impact stats</div>
                                    <div class="settings-desc">Display selected metrics (referrals, conversions) on your
                                        public card.</div>
                                </div>
                                <div class="toggle-switch active"
                                    onclick="this.classList.toggle('active'); showToast('Setting updated', 'success')">
                                    <div class="toggle-thumb"></div>
                                </div>
                            </div>
                            <div class="settings-row">
                                <div class="settings-label">
                                    <div class="settings-title">Make referrals anonymous</div>
                                    <div class="settings-desc">Hide your name from startups on initial introductions if
                                        required.</div>
                                </div>
                                <div class="toggle-switch">
                                    <div class="toggle-thumb"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="secondary-card">
                        <div class="info-banner">
                            <i class="fa-solid fa-circle-info"></i>
                            <span>
                                To receive payouts, please ensure your banking details and KYC information are complete
                                and up to date.
                                <a href="#" onclick="openPayoutRequirementsModal(); return false;"
                                    style="cursor: pointer;">View payout requirements</a>
                            </span>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fa-solid fa-indian-rupee-sign"></i>
                                    Preferred payout method
                                </label>
                                <select class="form-select">
                                    <option>Bank transfer</option>
                                    <option>UPI / instant payout</option>
                                    <option>Wallet</option>
                                </select>
                                <div class="form-helper">
                                    Payouts are usually processed within 57 business days after approval.
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fa-solid fa-building-columns"></i>
                                    Bank account or UPI ID
                                </label>
                                <input class="form-input" placeholder="Enter account number or UPI ID">
                                <div class="form-helper">
                                    We encrypt and securely store payment details in compliance with local regulations.
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fa-solid fa-id-card"></i>
                                    Legal / tax name
                                </label>
                                <input class="form-input" placeholder="Name for invoices and payout statements">
                            </div>

                            <div class="toggle-row">
                                <div class="toggle-label">
                                    Enable payout notifications
                                    <span class="form-helper">Get alerts when rewards are confirmed and payouts are
                                        processed.</span>
                                </div>
                                <div class="toggle-switch active">
                                    <div class="toggle-thumb"></div>
                                </div>
                            </div>
                        </div>

                        <div class="section-divider"></div>

                        <div class="settings-list">
                            <div class="settings-row">
                                <div class="settings-label">
                                    <div class="settings-title">Email notifications</div>
                                    <div class="settings-desc">Program updates, new opportunities, and reward
                                        confirmations.</div>
                                </div>
                                <div class="toggle-switch active">
                                    <div class="toggle-thumb"></div>
                                </div>
                            </div>
                            <div class="settings-row">
                                <div class="settings-label">
                                    <div class="settings-title">Digest summary</div>
                                    <div class="settings-desc">Weekly summary of referrals and ecosystem signals.</div>
                                </div>
                                <div class="toggle-switch active">
                                    <div class="toggle-thumb"></div>
                                </div>
                            </div>
                            <div class="settings-row">
                                <div class="settings-label">
                                    <div class="settings-title">Product announcements</div>
                                    <div class="settings-desc">New features for connectors and ecosystem tools.</div>
                                </div>
                                <div class="toggle-switch">
                                    <div class="toggle-thumb"></div>
                                </div>
                            </div>
                        </div>

                        <div class="alert-card">
                            <i class="fa-solid fa-triangle-exclamation"></i>
                            <div>
                                Changing payout details may temporarily pause payouts until verification is complete.
                                Youll receive an email when verification is done.
                            </div>
                        </div>
                    </div>
                </div>
            </section>



            <!-- PROGRAM DETAILS SECTION -->
            <section id="program-details" class="section">
                <div class="card"
                    style="padding: 0; overflow: hidden; border: none; box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1);">
                    <div id="programDetailsBanner"
                        style="height: 300px; background-size: cover; background-position: center; position: relative;">
                        <button onclick="showSection('programs')"
                            style="position: absolute; top: 20px; left: 20px; background: rgba(255,255,255,0.9); border: none; padding: 0.5rem 1rem; border-radius: 0.5rem; cursor: pointer; display: flex; align-items: center; gap: 0.5rem; font-weight: 600; z-index: 10;">
                            <i class="fa-solid fa-arrow-left"></i> Back to Programs
                        </button>
                        <div
                            style="position: absolute; bottom: 0; left: 0; right: 0; padding: 3rem 2rem; background: linear-gradient(to top, rgba(0,0,0,0.9), transparent); color: white;">
                            <span id="programDetailsType"
                                style="background: #fcb82e; color: black; padding: 4px 12px; border-radius: 100px; font-size: 0.8rem; font-weight: 700; text-transform: uppercase;"></span>
                            <h2 id="programDetailsTitle"
                                style="font-size: 2.5rem; font-weight: 800; margin-top: 0.5rem; margin-bottom: 0;"></h2>
                        </div>
                    </div>

                    <div style="padding: 3rem; background: white;">
                        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 4rem;">
                            <div>
                                <div style="margin-bottom: 3rem;">
                                    <h3
                                        style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1rem; color: #111827; display: flex; align-items: center; gap: 0.75rem;">
                                        <i class="fa-solid fa-circle-info" style="color: #6366f1;"></i> Program Overview
                                    </h3>
                                    <p id="programDetailsDesc"
                                        style="color: #4b5563; line-height: 1.8; font-size: 1.05rem;"></p>
                                </div>

                                <div style="margin-bottom: 3rem;">
                                    <h3
                                        style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1rem; color: #111827; display: flex; align-items: center; gap: 0.75rem;">
                                        <i class="fa-solid fa-list-check" style="color: #10b981;"></i> Eligibility
                                        Criteria
                                    </h3>
                                    <p id="programDetailsEligibility"
                                        style="color: #4b5563; line-height: 1.8; font-size: 1.05rem;"></p>
                                </div>

                                <div style="margin-bottom: 0;">
                                    <h3
                                        style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1rem; color: #111827; display: flex; align-items: center; gap: 0.75rem;">
                                        <i class="fa-solid fa-gift" style="color: #f59e0b;"></i> Benefits & Support
                                    </h3>
                                    <p id="programDetailsBenefits"
                                        style="color: #4b5563; line-height: 1.8; font-size: 1.05rem;"></p>
                                </div>
                            </div>

                            <div>
                                <div style="position: sticky; top: 2rem;">
                                    <div
                                        style="background: #f8fafc; padding: 2rem; border-radius: 1.5rem; border: 1px solid #e2e8f0; margin-bottom: 2rem;">
                                        <h4
                                            style="font-size: 0.9rem; font-weight: 700; text-transform: uppercase; color: #64748b; margin-bottom: 1.5rem; letter-spacing: 0.05em;">
                                            Key Information</h4>

                                        <div style="margin-bottom: 1.5rem;">
                                            <div
                                                style="font-size: 0.85rem; color: #94a3b8; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem;">
                                                <i class="fa-solid fa-tags"></i> Target Sectors
                                            </div>
                                            <div id="programDetailsSectors"
                                                style="display: flex; flex-wrap: wrap; gap: 0.5rem;"></div>
                                        </div>

                                        <div style="margin-bottom: 1.5rem;">
                                            <div
                                                style="font-size: 0.85rem; color: #94a3b8; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem;">
                                                <i class="fa-solid fa-earth-americas"></i> Regions
                                            </div>
                                            <div id="programDetailsCountries"
                                                style="font-weight: 600; color: #1e293b; font-size: 1rem;"></div>
                                        </div>

                                        <div style="margin-bottom: 0;">
                                            <div
                                                style="font-size: 0.85rem; color: #94a3b8; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem;">
                                                <i class="fa-solid fa-calendar-xmark"></i> Deadline
                                            </div>
                                            <div id="programDetailsDeadline"
                                                style="font-weight: 700; color: #ef4444; font-size: 1rem;"></div>
                                        </div>
                                    </div>

                                    <button id="referFromDetailsBtn"
                                        style="width: 100%; padding: 1.25rem; background: #000; color: white; border: none; border-radius: 1rem; font-size: 1.1rem; font-weight: 700; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.75rem; transition: transform 0.2s;">
                                        <i class="fa-solid fa-share-alt"></i> Refer a Startup
                                    </button>
                                    <p
                                        style="text-align: center; color: #64748b; font-size: 0.85rem; margin-top: 1rem;">
                                        <i class="fa-solid fa-shield-halved"></i> Verified Referral Process
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ANALYTICS SECTION -->
            <section id="analytics" class="section">
                <div class="section-header">
                    <div class="section-header-main">
                        <div class="section-title">
                            <i class="fa-solid fa-chart-line"></i>
                            Analytics & Insights
                        </div>
                        <div class="section-subtitle">
                            Deep dive into your referral performance, conversion metrics, and earning trends.
                        </div>
                    </div>
                    <div class="section-actions">
                        <div class="toggle-group">
                            <button class="toggle-btn active" onclick="updateAnalyticsRange('30D', this)">30D</button>
                            <button class="toggle-btn" onclick="updateAnalyticsRange('90D', this)">90D</button>
                            <button class="toggle-btn" onclick="updateAnalyticsRange('ALL', this)">All Time</button>
                        </div>
                    </div>
                </div>

                <!-- Key Metrics Overview -->
                <div class="referrals-summary"
                    style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1.5rem; margin-bottom: 2rem;">
                    <div class="summary-item">
                        <span>Total Referrals</span>
                        <strong data-base="28">28</strong>
                    </div>
                    <div class="summary-item">
                        <span>Successful Conversions</span>
                        <strong data-base="9">9</strong>
                    </div>
                    <div class="summary-item">
                        <span>Avg. Response Time</span>
                        <strong data-base="2.4">2.4 days</strong>
                    </div>
                    <div class="summary-item">
                        <span>Success Rate</span>
                        <strong data-base="32">32%</strong>
                    </div>
                </div>

                <!-- Performance Charts -->
                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 1.5rem; margin-bottom: 2rem;">
                    <!-- Referral Trend Chart -->
                    <div class="card">
                        <div class="card-header"
                            style="border-bottom: 1px solid #e2e8f0; padding-bottom: 1rem; margin-bottom: 1.5rem;">
                            <div>
                                <div class="card-title">Referral Performance Trend</div>
                                <div style="font-size: 0.85rem; color: #64748b; margin-top: 0.25rem;">Monthly referral
                                    activity and
                                    conversion rates</div>
                            </div>
                        </div>
                        <canvas id="referralTrendChart" style="max-height: 300px;"></canvas>
                    </div>

                    <!-- Top Performing Sectors -->
                    <div class="card">
                        <div class="card-header"
                            style="border-bottom: 1px solid #e2e8f0; padding-bottom: 1rem; margin-bottom: 1.5rem;">
                            <div>
                                <div class="card-title">Top Sectors</div>
                                <div style="font-size: 0.85rem; color: #64748b; margin-top: 0.25rem;">By conversion rate
                                </div>
                            </div>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 1rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div style="display: flex; align-items: center; gap: 0.75rem;">
                                    <div style="width: 8px; height: 8px; border-radius: 50%; background: #3b82f6;">
                                    </div>
                                    <span style="font-size: 0.9rem; color: #334155;">HealthTech</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 0.5rem;">
                                    <div
                                        style="flex: 1; height: 6px; background: #e2e8f0; border-radius: 999px; width: 80px;">
                                        <div
                                            style="height: 100%; background: #3b82f6; border-radius: 999px; width: 85%;">
                                        </div>
                                    </div>
                                    <span style="font-size: 0.85rem; font-weight: 600; color: #111827;">48%</span>
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div style="display: flex; align-items: center; gap: 0.75rem;">
                                    <div style="width: 8px; height: 8px; border-radius: 50%; background: #10b981;">
                                    </div>
                                    <span style="font-size: 0.9rem; color: #334155;">FinTech</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 0.5rem;">
                                    <div
                                        style="flex: 1; height: 6px; background: #e2e8f0; border-radius: 999px; width: 80px;">
                                        <div
                                            style="height: 100%; background: #10b981; border-radius: 999px; width: 72%;">
                                        </div>
                                    </div>
                                    <span style="font-size: 0.85rem; font-weight: 600; color: #111827;">36%</span>
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div style="display: flex; align-items: center; gap: 0.75rem;">
                                    <div style="width: 8px; height: 8px; border-radius: 50%; background: #f59e0b;">
                                    </div>
                                    <span style="font-size: 0.9rem; color: #334155;">AgriTech</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 0.5rem;">
                                    <div
                                        style="flex: 1; height: 6px; background: #e2e8f0; border-radius: 999px; width: 80px;">
                                        <div
                                            style="height: 100%; background: #f59e0b; border-radius: 999px; width: 50%;">
                                        </div>
                                    </div>
                                    <span style="font-size: 0.85rem; font-weight: 600; color: #111827;">25%</span>
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div style="display: flex; align-items: center; gap: 0.75rem;">
                                    <div style="width: 8px; height: 8px; border-radius: 50%; background: #8b5cf6;">
                                    </div>
                                    <span style="font-size: 0.9rem; color: #334155;">EdTech</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 0.5rem;">
                                    <div
                                        style="flex: 1; height: 6px; background: #e2e8f0; border-radius: 999px; width: 80px;">
                                        <div
                                            style="height: 100%; background: #8b5cf6; border-radius: 999px; width: 40%;">
                                        </div>
                                    </div>
                                    <span style="font-size: 0.85rem; font-weight: 600; color: #111827;">20%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Detailed Analytics Grid -->
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; margin-bottom: 2rem;">
                    <!-- Referral Status Breakdown -->
                    <div class="card">
                        <div class="card-header"
                            style="border-bottom: 1px solid #e2e8f0; padding-bottom: 1rem; margin-bottom: 1.5rem;">
                            <div class="card-title">Referral Status</div>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 1rem;">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem; background: #f8fafc; border-radius: 0.5rem;">
                                <div style="display: flex; align-items: center; gap: 0.5rem;">
                                    <i class="fa-solid fa-hourglass-half" style="color: #3b82f6;"></i>
                                    <span style="font-size: 0.9rem; color: #334155;">Under Review</span>
                                </div>
                                <span style="font-size: 1.1rem; font-weight: 700; color: #111827;">14</span>
                            </div>
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem; background: #f0fdf4; border-radius: 0.5rem;">
                                <div style="display: flex; align-items: center; gap: 0.5rem;">
                                    <i class="fa-solid fa-circle-check" style="color: #10b981;"></i>
                                    <span style="font-size: 0.9rem; color: #334155;">Completed</span>
                                </div>
                                <span style="font-size: 1.1rem; font-weight: 700; color: #111827;">9</span>
                            </div>
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem; background: #fef2f2; border-radius: 0.5rem;">
                                <div style="display: flex; align-items: center; gap: 0.5rem;">
                                    <i class="fa-solid fa-circle-xmark" style="color: #ef4444;"></i>
                                    <span style="font-size: 0.9rem; color: #334155;">Rejected</span>
                                </div>
                                <span style="font-size: 1.1rem; font-weight: 700; color: #111827;">5</span>
                            </div>
                        </div>
                    </div>

                    <!-- Earnings Breakdown -->
                    <div class="card">
                        <div class="card-header"
                            style="border-bottom: 1px solid #e2e8f0; padding-bottom: 1rem; margin-bottom: 1.5rem;">
                            <div class="card-title">Earnings Breakdown</div>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 1rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="font-size: 0.85rem; color: #64748b;">Total Earned</span>
                                <span style="font-size: 1.25rem; font-weight: 700; color: #10b981;">85,400</span>
                            </div>
                            <div style="height: 1px; background: #e2e8f0;"></div>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="font-size: 0.85rem; color: #64748b;">Pending Payouts</span>
                                <span style="font-size: 1rem; font-weight: 600; color: #f59e0b;">12,500</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="font-size: 0.85rem; color: #64748b;">Avg. per Referral</span>
                                <span style="font-size: 1rem; font-weight: 600; color: #111827;">9,489</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="font-size: 0.85rem; color: #64748b;">Highest Reward</span>
                                <span style="font-size: 1rem; font-weight: 600; color: #111827;">20,000</span>
                            </div>
                        </div>
                    </div>

                    <!-- Response Time Analysis -->
                    <div class="card">
                        <div class="card-header"
                            style="border-bottom: 1px solid #e2e8f0; padding-bottom: 1rem; margin-bottom: 1.5rem;">
                            <div class="card-title">Response Time</div>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 1rem;">
                            <div
                                style="text-align: center; padding: 1rem; background: #f8fafc; border-radius: 0.75rem;">
                                <div
                                    style="font-size: 2.5rem; font-weight: 800; color: #111827; margin-bottom: 0.25rem;">
                                    2.4</div>
                                <div style="font-size: 0.85rem; color: #64748b;">Avg. Days to Response</div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="font-size: 0.85rem; color: #64748b;">Fastest Response</span>
                                <span style="font-size: 0.9rem; font-weight: 600; color: #10b981;">6 hours</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="font-size: 0.85rem; color: #64748b;">Slowest Response</span>
                                <span style="font-size: 0.9rem; font-weight: 600; color: #ef4444;">12 days</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AI-Powered Insights -->
                <div class="insights-card" style="margin-bottom: 2rem;">
                    <div class="insights-header">
                        <div class="insights-title">
                            <i class="fa-solid fa-brain"></i>
                            AI-Powered Performance Insights
                        </div>
                        <div class="insights-badge">
                            <i class="fa-solid fa-sparkles"></i>
                            Personalized Recommendations
                        </div>
                    </div>
                    <div class="insights-list"
                        style="grid-template-columns: repeat(2, 1fr); display: grid; gap: 1.5rem;">
                        <div class="insight-item">
                            <div class="insight-bullet">
                                <i class="fa-solid fa-trophy"></i>
                            </div>
                            <div class="insight-text">
                                Your <span class="insight-highlight">HealthTech referrals</span> have a 48% success
                                rate,
                                which is 2.1x higher than the platform average. Consider focusing more on this sector.
                            </div>
                        </div>
                        <div class="insight-item">
                            <div class="insight-bullet">
                                <i class="fa-solid fa-clock"></i>
                            </div>
                            <div class="insight-text">
                                Startups referred within <span class="insight-highlight">72 hours of program
                                    launch</span>
                                are 3.2x more likely to be accepted. Enable notifications for new programs.
                            </div>
                        </div>
                        <div class="insight-item">
                            <div class="insight-bullet">
                                <i class="fa-solid fa-calendar-check"></i>
                            </div>
                            <div class="insight-text">
                                Your most successful day for referrals is <span
                                    class="insight-highlight">Tuesday</span>,
                                with a 42% conversion rate. Plan your outreach accordingly.
                            </div>
                        </div>
                        <div class="insight-item">
                            <div class="insight-bullet">
                                <i class="fa-solid fa-chart-line"></i>
                            </div>
                            <div class="insight-text">
                                You're on track to reach <span class="insight-highlight">Level 4</span> by next month.
                                Just 3 more successful referrals needed to unlock premium benefits.
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Program Performance Comparison -->
                <div class="card">
                    <div class="card-header"
                        style="border-bottom: 1px solid #e2e8f0; padding-bottom: 1rem; margin-bottom: 1.5rem;">
                        <div>
                            <div class="card-title">Program Performance Comparison</div>
                            <div style="font-size: 0.85rem; color: #64748b; margin-top: 0.25rem;">Your top performing
                                programs by
                                conversion and earnings</div>
                        </div>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Program Name</th>
                                    <th>Referrals</th>
                                    <th>Conversions</th>
                                    <th>Success Rate</th>
                                    <th>Total Earned</th>
                                    <th>Avg. Response Time</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="font-weight: 600;">HealthTech Accelerator</td>
                                    <td>8</td>
                                    <td><span class="status-pill completed">5</span></td>
                                    <td><span style="color: #10b981; font-weight: 600;">62.5%</span></td>
                                    <td style="color: #10b981; font-weight: 700;">32,500</td>
                                    <td>1.8 days</td>
                                </tr>
                                <tr>
                                    <td style="font-weight: 600;">Fintech Innovation Program</td>
                                    <td>6</td>
                                    <td><span class="status-pill completed">2</span></td>
                                    <td><span style="color: #f59e0b; font-weight: 600;">33.3%</span></td>
                                    <td style="color: #10b981; font-weight: 700;">24,000</td>
                                    <td>3.2 days</td>
                                </tr>
                                <tr>
                                    <td style="font-weight: 600;">Sustainable Energy Challenge</td>
                                    <td>5</td>
                                    <td><span class="status-pill completed">1</span></td>
                                    <td><span style="color: #f59e0b; font-weight: 600;">20%</span></td>
                                    <td style="color: #10b981; font-weight: 700;">15,000</td>
                                    <td>2.5 days</td>
                                </tr>
                                <tr>
                                    <td style="font-weight: 600;">EdTech Growth Program</td>
                                    <td>4</td>
                                    <td><span class="status-pill completed">1</span></td>
                                    <td><span style="color: #f59e0b; font-weight: 600;">25%</span></td>
                                    <td style="color: #10b981; font-weight: 700;">8,900</td>
                                    <td>4.1 days</td>
                                </tr>
                                <tr>
                                    <td style="font-weight: 600;">Smart Mobility Initiative</td>
                                    <td>5</td>
                                    <td><span class="status-pill in-progress">0</span></td>
                                    <td><span style="color: #64748b; font-weight: 600;">0%</span></td>
                                    <td style="color: #64748b; font-weight: 700;">0</td>
                                    <td>-</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </section>

            <!-- ADD REFERRAL MODAL -->
            <div id="addReferralModal"
                style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10001; align-items: center; justify-content: center;">
                <div
                    style="background: white; border-radius: 1.5rem; width: 100%; max-width: 600px; padding: 2.5rem; box-shadow: 0 20px 60px rgba(0,0,0,0.3); position: relative; max-height: 90vh; overflow-y: auto;">
                    <button onclick="closeAddReferralModal()"
                        style="position: absolute; top: 20px; right: 20px; border: none; background: none; font-size: 1.5rem; cursor: pointer; color: #6b7280;">&times;</button>

                    <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem; color: #111827;">
                        <i class="fa-solid fa-plus-circle" style="color: #fcb82e;"></i> Add New Referral
                    </h2>
                    <div id="linkReferralSection" style="text-align: center;">
                        <p style="color: #64748b; margin-bottom: 2rem; font-size: 0.95rem;">
                            Instead of filling a form, generate a unique link. When a startup registers or logs in via
                            this link, they'll be automatically tracked under your profile.
                        </p>

                        <div style="margin-bottom: 2rem; text-align: left;">
                            <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: #374151;">
                                <i class="fa-solid fa-trophy" style="color: #fcb82e;"></i> Select Program to Refer
                            </label>
                            <select id="programLinkSelect"
                                style="width: 100%; padding: 1rem; border: 1.5px solid #e2e8f0; border-radius: 0.75rem; font-size: 0.95rem; background: #f8fafc; transition: border-color 0.2s;">
                                <!-- Will be populated -->
                            </select>
                        </div>

                        <button id="genLinkBtn" onclick="generateReferralLink()"
                            style="width: 100%; padding: 1.25rem; background: #111827; color: white; border: none; border-radius: 0.75rem; font-weight: 700; cursor: pointer; margin-bottom: 2rem; font-size: 1rem; transition: transform 0.2s, background-color 0.2s;">
                            Generate Dynamic Referral Link <i class="fa-solid fa-wand-magic-sparkles"></i>
                        </button>

                        <div id="referralLinkOutput" style="display: none; animation: fadeIn 0.4s ease-out;">
                            <div
                                style="margin-bottom: 1rem; text-align: left; font-weight: 600; color: #374151; font-size: 0.9rem;">
                                Your Unique Link</div>
                            <div
                                style="background: white; border: 2px dashed #fcb82e; padding: 1.25rem; border-radius: 1rem; margin-bottom: 2.5rem; display: flex; align-items: center; gap: 1rem; background: #fffdf5;">
                                <input type="text" id="referralUrlInput" readonly
                                    style="flex: 1; background: transparent; border: none; font-family: 'DM Mono', monospace; font-size: 0.9rem; color: #1e293b; font-weight: 600;" />
                                <button onclick="copyReferralLink()"
                                    style="background: #fcb82e; border: none; padding: 0.75rem 1.25rem; border-radius: 0.5rem; cursor: pointer; font-weight: 700; color: #000; display: flex; align-items: center; gap: 0.5rem;">
                                    <i class="fa-solid fa-copy"></i> Copy
                                </button>
                            </div>

                            <div
                                style="margin-bottom: 1.5rem; font-weight: 700; color: #1e293b; position: relative; display: flex; align-items: center; justify-content: center; gap: 1rem;">
                                <span style="height: 1px; background: #e2e8f0; flex: 1;"></span>
                                <span>Share via QR Code</span>
                                <span style="height: 1px; background: #e2e8f0; flex: 1;"></span>
                            </div>

                            <div id="referralQrContainer"
                                style="background: white; padding: 1.5rem; border-radius: 1.5rem; border: 1px solid #e2e8f0; display: inline-block; margin-bottom: 1.5rem; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);">
                                <img id="referralQrImg" src="" alt="Referral QR Code"
                                    style="width: 200px; height: 200px;" />
                            </div>
                            <p style="color: #64748b; font-size: 0.85rem; max-width: 400px; margin: 0 auto;">
                                <i class="fa-solid fa-circle-info"></i> Share this link or QR code with the founder.
                                Once they login/register, the referral will be tracked under your account.
                            </p>
                        </div>
                    </div>

                    <!-- TIER BENEFITS MODAL -->
                    <div id="tierBenefitsModal"
                        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(8px); z-index: 20000; align-items: center; justify-content: center; padding: 1.5rem;">
                        <div
                            style="background: white; border-radius: 2rem; width: 100%; max-width: 900px; padding: 3rem; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); position: relative; max-height: 90vh; overflow-y: auto;">
                            <button onclick="closeTierBenefitsModal()"
                                style="position: absolute; top: 24px; right: 24px; border: none; background: #f1f5f9; width: 40px; height: 40px; border-radius: 20px; font-size: 1.25rem; cursor: pointer; color: #475569; display: flex; align-items: center; justify-content: center; transition: all 0.2s;">&times;</button>

                            <div style="text-align: center; margin-bottom: 3rem;">
                                <h2
                                    style="font-size: 2.25rem; font-weight: 800; color: #0f172a; margin-bottom: 0.75rem;">
                                    Connector Tier Benefits</h2>
                                <p style="color: #64748b; font-size: 1.1rem; max-width: 500px; margin: 0 auto;">Maximize
                                    your
                                    impact and unlock exclusive institutional-grade rewards as you level up.</p>
                            </div>

                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 2rem;">
                                <!-- Standard Tier -->
                                <div
                                    style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 1.5rem; padding: 2rem; transition: transform 0.3s ease;">
                                    <div
                                        style="width: 48px; height: 48px; background: #e2e8f0; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem; color: #475569; font-size: 1.5rem;">
                                        <i class="fa-solid fa-leaf"></i>
                                    </div>
                                    <h3
                                        style="font-size: 1.25rem; font-weight: 700; color: #0f172a; margin-bottom: 0.5rem;">
                                        Standard</h3>
                                    <div style="color: #64748b; font-size: 0.875rem; margin-bottom: 1.5rem;">Entry level
                                        (L1 -
                                        L2)</div>
                                    <ul
                                        style="list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 1rem; color: #334155; font-size: 0.93rem;">
                                        <li style="display: flex; align-items: center; gap: 0.75rem;"><i
                                                class="fa-solid fa-check" style="color: #10b981;"></i> 10% Reward Share
                                        </li>
                                        <li style="display: flex; align-items: center; gap: 0.75rem;"><i
                                                class="fa-solid fa-check" style="color: #10b981;"></i> 14-day Payout
                                            speed</li>
                                        <li style="display: flex; align-items: center; gap: 0.75rem;"><i
                                                class="fa-solid fa-check" style="color: #10b981;"></i> Standard support
                                        </li>
                                        <li style="display: flex; align-items: center; gap: 0.75rem;"><i
                                                class="fa-solid fa-check" style="color: #10b981;"></i> Public programs
                                            only</li>
                                    </ul>
                                </div>

                                <!-- Pro Tier (Active) -->
                                <div
                                    style="background: #fffbeb; border: 2px solid #fbbf24; border-radius: 1.5rem; padding: 2rem; position: relative; transform: scale(1.05); box-shadow: 0 10px 25px -5px rgba(251, 191, 36, 0.2);">
                                    <div
                                        style="position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: #fbbf24; color: #92400e; padding: 4px 16px; border-radius: 20px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em;">
                                        Your Current Tier</div>
                                    <div
                                        style="width: 48px; height: 48px; background: #fef3c7; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem; color: #d97706; font-size: 1.5rem;">
                                        <i class="fa-solid fa-rocket"></i>
                                    </div>
                                    <h3
                                        style="font-size: 1.25rem; font-weight: 700; color: #0f172a; margin-bottom: 0.5rem;">
                                        Pro
                                        Connector</h3>
                                    <div style="color: #d97706; font-size: 0.875rem; margin-bottom: 1.5rem;">Growth
                                        level (L3 -
                                        L4)</div>
                                    <ul
                                        style="list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 1rem; color: #334155; font-size: 0.93rem;">
                                        <li style="display: flex; align-items: center; gap: 0.75rem;"><i
                                                class="fa-solid fa-check" style="color: #d97706;"></i> 18% Reward Share
                                        </li>
                                        <li style="display: flex; align-items: center; gap: 0.75rem;"><i
                                                class="fa-solid fa-check" style="color: #d97706;"></i> 7-day Payout
                                            speed</li>
                                        <li style="display: flex; align-items: center; gap: 0.75rem;"><i
                                                class="fa-solid fa-check" style="color: #d97706;"></i> Gold-tier support
                                        </li>
                                        <li style="display: flex; align-items: center; gap: 0.75rem;"><i
                                                class="fa-solid fa-check" style="color: #d97706;"></i> Early program
                                            access</li>
                                        <li style="display: flex; align-items: center; gap: 0.75rem;"><i
                                                class="fa-solid fa-check" style="color: #d97706;"></i> 1.2x Multiplier
                                        </li>
                                    </ul>
                                </div>

                                <!-- Elite Tier -->
                                <div
                                    style="background: #f1f5f9; border: 1px solid #cbd5e1; border-radius: 1.5rem; padding: 2rem;">
                                    <div
                                        style="width: 48px; height: 48px; background: #cbd5e1; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem; color: #1e293b; font-size: 1.5rem;">
                                        <i class="fa-solid fa-crown"></i>
                                    </div>
                                    <h3
                                        style="font-size: 1.25rem; font-weight: 700; color: #0f172a; margin-bottom: 0.5rem;">
                                        Elite</h3>
                                    <div style="color: #475569; font-size: 0.875rem; margin-bottom: 1.5rem;">Master
                                        level (L5+)
                                    </div>
                                    <ul
                                        style="list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 1rem; color: #334155; font-size: 0.93rem;">
                                        <li style="display: flex; align-items: center; gap: 0.75rem;"><i
                                                class="fa-solid fa-check" style="color: #1e293b;"></i> 25% Reward Share
                                        </li>
                                        <li style="display: flex; align-items: center; gap: 0.75rem;"><i
                                                class="fa-solid fa-check" style="color: #1e293b;"></i> Instant Payout
                                        </li>
                                        <li style="display: flex; align-items: center; gap: 0.75rem;"><i
                                                class="fa-solid fa-check" style="color: #1e293b;"></i> Dedicated Manager
                                        </li>
                                        <li style="display: flex; align-items: center; gap: 0.75rem;"><i
                                                class="fa-solid fa-check" style="color: #1e293b;"></i> Private
                                            opportunities
                                        </li>
                                        <li style="display: flex; align-items: center; gap: 0.75rem;"><i
                                                class="fa-solid fa-check" style="color: #1e293b;"></i> 1.5x Multiplier
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <div
                                style="margin-top: 3rem; background: #f8fafc; border-radius: 1rem; padding: 1.5rem; display: flex; align-items: center; justify-content: space-between;">
                                <div style="display: flex; align-items: center; gap: 1rem;">
                                    <div
                                        style="width: 40px; height: 40px; background: #e2e8f0; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #475569;">
                                        <i class="fa-solid fa-chart-line"></i>
                                    </div>
                                    <div style="color: #475569; font-size: 0.95rem;">You are <strong>450 points</strong>
                                        away
                                        from the next tier!</div>
                                </div>
                                <button onclick="closeTierBenefitsModal(); showSection('guide')"
                                    style="background: #0f172a; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 0.75rem; font-weight: 600; cursor: pointer; transition: all 0.2s;">Learn
                                    how to level up</button>
                            </div>
                        </div>
                    </div>

                    <!-- PAYOUT REQUIREMENTS MODAL -->
                    <div id="payoutRequirementsModal"
                        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(8px); z-index: 20000; align-items: center; justify-content: center; padding: 1.5rem;">
                        <div
                            style="background: white; border-radius: 2rem; width: 100%; max-width: 800px; padding: 3rem; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); position: relative; max-height: 90vh; overflow-y: auto;">
                            <button onclick="closePayoutRequirementsModal()"
                                style="position: absolute; top: 24px; right: 24px; border: none; background: #f1f5f9; width: 40px; height: 40px; border-radius: 20px; font-size: 1.25rem; cursor: pointer; color: #475569; display: flex; align-items: center; justify-content: center; transition: all 0.2s;">&times;</button>

                            <div style="text-align: center; margin-bottom: 2.5rem;">
                                <div
                                    style="width: 64px; height: 64px; background: linear-gradient(135deg, #fcb82e, #f97316); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem; color: #000; font-size: 2rem;">
                                    <i class="fa-solid fa-file-invoice-dollar"></i>
                                </div>
                                <h2 style="font-size: 2rem; font-weight: 800; color: #0f172a; margin-bottom: 0.75rem;">
                                    Payout Requirements</h2>
                                <p style="color: #64748b; font-size: 1rem; max-width: 500px; margin: 0 auto;">Complete
                                    these
                                    steps to ensure smooth and timely payout processing for your earned rewards.</p>
                            </div>

                            <!-- Requirements Checklist -->
                            <div style="background: #f8fafc; border-radius: 1rem; padding: 2rem; margin-bottom: 2rem;">
                                <h3
                                    style="font-size: 1.25rem; font-weight: 700; color: #0f172a; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                                    <i class="fa-solid fa-clipboard-check" style="color: #fcb82e;"></i>
                                    Required Documents & Information
                                </h3>

                                <div style="display: flex; flex-direction: column; gap: 1.25rem;">
                                    <!-- Requirement 1 -->
                                    <div style="display: flex; gap: 1rem; align-items: start;">
                                        <div
                                            style="width: 32px; height: 32px; background: #22c55e; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; color: white; font-size: 0.875rem;">
                                            <i class="fa-solid fa-check"></i>
                                        </div>
                                        <div style="flex: 1;">
                                            <div style="font-weight: 600; color: #1e293b; margin-bottom: 0.25rem;">Valid
                                                Government ID</div>
                                            <div style="font-size: 0.875rem; color: #64748b;">PAN Card, Aadhaar Card,
                                                Passport,
                                                or Driver's License for identity verification.</div>
                                        </div>
                                    </div>

                                    <!-- Requirement 2 -->
                                    <div style="display: flex; gap: 1rem; align-items: start;">
                                        <div
                                            style="width: 32px; height: 32px; background: #22c55e; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; color: white; font-size: 0.875rem;">
                                            <i class="fa-solid fa-check"></i>
                                        </div>
                                        <div style="flex: 1;">
                                            <div style="font-weight: 600; color: #1e293b; margin-bottom: 0.25rem;">Bank
                                                Account
                                                Details</div>
                                            <div style="font-size: 0.875rem; color: #64748b;">Account number, IFSC code,
                                                and
                                                account holder name matching your registered name.</div>
                                        </div>
                                    </div>

                                    <!-- Requirement 3 -->
                                    <div style="display: flex; gap: 1rem; align-items: start;">
                                        <div
                                            style="width: 32px; height: 32px; background: #22c55e; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; color: white; font-size: 0.875rem;">
                                            <i class="fa-solid fa-check"></i>
                                        </div>
                                        <div style="flex: 1;">
                                            <div style="font-weight: 600; color: #1e293b; margin-bottom: 0.25rem;">PAN
                                                Card
                                                (India) or Tax ID</div>
                                            <div style="font-size: 0.875rem; color: #64748b;">Required for tax
                                                compliance and
                                                TDS deduction as per Indian regulations.</div>
                                        </div>
                                    </div>

                                    <!-- Requirement 4 -->
                                    <div style="display: flex; gap: 1rem; align-items: start;">
                                        <div
                                            style="width: 32px; height: 32px; background: #f59e0b; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; color: white; font-size: 0.875rem;">
                                            <i class="fa-solid fa-exclamation"></i>
                                        </div>
                                        <div style="flex: 1;">
                                            <div style="font-weight: 600; color: #1e293b; margin-bottom: 0.25rem;">Email
                                                & Phone
                                                Verification</div>
                                            <div style="font-size: 0.875rem; color: #64748b;">Verified email and phone
                                                number
                                                for payout notifications and OTP verification.</div>
                                        </div>
                                    </div>

                                    <!-- Requirement 5 -->
                                    <div style="display: flex; gap: 1rem; align-items: start;">
                                        <div
                                            style="width: 32px; height: 32px; background: #f59e0b; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; color: white; font-size: 0.875rem;">
                                            <i class="fa-solid fa-exclamation"></i>
                                        </div>
                                        <div style="flex: 1;">
                                            <div style="font-weight: 600; color: #1e293b; margin-bottom: 0.25rem;">
                                                Minimum
                                                Payout Threshold</div>
                                            <div style="font-size: 0.875rem; color: #64748b;">Minimum balance of 1,000
                                                required
                                                to initiate a payout request.</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Verification Process -->
                            <div
                                style="background: #fff; border: 1px solid #e2e8f0; border-radius: 1rem; padding: 2rem; margin-bottom: 2rem;">
                                <h3
                                    style="font-size: 1.25rem; font-weight: 700; color: #0f172a; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                                    <i class="fa-solid fa-shield-halved" style="color: #3b82f6;"></i>
                                    Verification Process
                                </h3>

                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem;">
                                    <div style="text-align: center;">
                                        <div
                                            style="width: 48px; height: 48px; background: #dbeafe; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; color: #3b82f6; font-size: 1.5rem;">
                                            <i class="fa-solid fa-upload"></i>
                                        </div>
                                        <div
                                            style="font-weight: 600; color: #1e293b; margin-bottom: 0.5rem; font-size: 0.9rem;">
                                            1. Submit Documents</div>
                                        <div style="font-size: 0.8rem; color: #64748b;">Upload required KYC documents
                                        </div>
                                    </div>

                                    <div style="text-align: center;">
                                        <div
                                            style="width: 48px; height: 48px; background: #fef3c7; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; color: #f59e0b; font-size: 1.5rem;">
                                            <i class="fa-solid fa-magnifying-glass"></i>
                                        </div>
                                        <div
                                            style="font-weight: 600; color: #1e293b; margin-bottom: 0.5rem; font-size: 0.9rem;">
                                            2. Verification</div>
                                        <div style="font-size: 0.8rem; color: #64748b;">2-3 business days review</div>
                                    </div>

                                    <div style="text-align: center;">
                                        <div
                                            style="width: 48px; height: 48px; background: #dcfce7; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; color: #22c55e; font-size: 1.5rem;">
                                            <i class="fa-solid fa-circle-check"></i>
                                        </div>
                                        <div
                                            style="font-weight: 600; color: #1e293b; margin-bottom: 0.5rem; font-size: 0.9rem;">
                                            3. Approval</div>
                                        <div style="font-size: 0.8rem; color: #64748b;">Ready for payouts</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Important Notes -->
                            <div
                                style="background: #fffbeb; border: 1px solid #fbbf24; border-radius: 1rem; padding: 1.5rem; margin-bottom: 2rem;">
                                <h4
                                    style="font-size: 1rem; font-weight: 700; color: #92400e; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                                    <i class="fa-solid fa-lightbulb"></i>
                                    Important Notes
                                </h4>
                                <ul
                                    style="margin: 0; padding-left: 1.5rem; color: #78350f; font-size: 0.875rem; display: flex; flex-direction: column; gap: 0.5rem;">
                                    <li>All documents must be clear, valid, and not expired.</li>
                                    <li>Name on bank account must match your registered profile name.</li>
                                    <li>TDS will be deducted as per Indian tax regulations (10% for amounts above
                                        10,000).</li>
                                    <li>Payout processing takes 5-7 business days after approval.</li>
                                    <li>You'll receive email and SMS notifications at each stage.</li>
                                </ul>
                            </div>

                            <!-- Action Buttons -->
                            <div style="display: flex; gap: 1rem;">
                                <button onclick="closePayoutRequirementsModal()"
                                    style="flex: 1; padding: 0.875rem; border: 1px solid #e5e7eb; background: white; border-radius: 0.75rem; font-weight: 600; cursor: pointer; color: #6b7280; transition: all 0.2s;">
                                    Close
                                </button>
                                <button
                                    onclick="closePayoutRequirementsModal(); showToast('Redirecting to KYC verification...', 'info');"
                                    style="flex: 1; padding: 0.875rem; background: #fcb82e; border: none; border-radius: 0.75rem; font-weight: 600; cursor: pointer; color: #000; transition: all 0.2s;">
                                    <i class="fa-solid fa-arrow-right"></i> Start KYC Verification
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- INBOX SECTION -->
                    <section id="inbox" class="section">
                        <div class="inbox-list">
                            <!-- Message 1 -->
                            <div class="inbox-item unread" onclick="viewMessage(1)">
                                <div class="inbox-avatar" style="background: rgba(34, 197, 94, 0.1); color: #22c55e;">
                                    <i class="fas fa-coins"></i>
                                </div>
                                <div class="inbox-content">
                                    <div class="inbox-header">
                                        <span class="inbox-sender">Rewards Dept <span
                                                class="inbox-badge badge-reward">Payment</span></span>
                                        <span class="inbox-time">1 hour ago</span>
                                    </div>
                                    <div class="inbox-subject">Referral Bonus Approved: 2,500</div>
                                    <div class="inbox-preview">Congratulations! Your referral for 'BioStream' has
                                        completed the
                                        first phase. Your 2,500 reward has been approved and moved to your available
                                        balance.
                                    </div>
                                </div>
                            </div>

                            <!-- Message 2 -->
                            <div class="inbox-item unread" onclick="viewMessage(2)">
                                <div class="inbox-avatar" style="background: rgba(59, 130, 246, 0.1); color: #3b82f6;">
                                    <i class="fas fa-rocket"></i>
                                </div>
                                <div class="inbox-content">
                                    <div class="inbox-header">
                                        <span class="inbox-sender">GreenWave AI <span
                                                class="inbox-badge badge-startup">Update</span></span>
                                        <span class="inbox-time">4 hours ago</span>
                                    </div>
                                    <div class="inbox-subject">New Pitch Deck Uploaded</div>
                                    <div class="inbox-preview">GreenWave AI has updated their pitch deck for the
                                        'Sustainable
                                        Energy Challenge'. Since you are their primary connector, please review and
                                        update your
                                        assessment.</div>
                                </div>
                            </div>

                            <!-- Message 3 -->
                            <div class="inbox-item" onclick="viewMessage(3)">
                                <div class="inbox-avatar" style="background: rgba(252, 184, 46, 0.1); color: #fcb82e;">
                                    <i class="fas fa-bullhorn"></i>
                                </div>
                                <div class="inbox-content">
                                    <div class="inbox-header">
                                        <span class="inbox-sender">Platform <span
                                                class="inbox-badge badge-system">Notice</span></span>
                                        <span class="inbox-time">Yesterday</span>
                                    </div>
                                    <div class="inbox-subject">Alchemy Enabler Level Up!</div>
                                    <div class="inbox-preview">Your impact score has reached 'Level 4'. You now have
                                        access to
                                        exclusive high-tier programs in the FinTech sector. Check your Analytics tab for
                                        details.</div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- REFERRAL GUIDE SECTION -->
                    <section id="guide" class="section">
                        <div class="section-grid">
                            <div>
                                <div class="card" style="margin-bottom: 2rem;">
                                    <h3 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1rem;"><i
                                            class="fa-solid fa-graduation-cap"></i> How to Refer Successfully</h3>
                                    <div class="guide-steps"
                                        style="display: flex; flex-direction: column; gap: 1.5rem;">
                                        <div style="display: flex; gap: 1rem;">
                                            <div
                                                style="width: 30px; height: 30px; background: #fcb82e; color: black; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; flex-shrink: 0;">
                                                1</div>
                                            <div>
                                                <h4 style="font-weight: 600;">Identify High-Quality Startups</h4>
                                                <p style="color: #64748b; font-size: 0.9rem;">Look for startups in your
                                                    network
                                                    that match the active program sectors and stages.</p>
                                            </div>
                                        </div>
                                        <div style="display: flex; gap: 1rem;">
                                            <div
                                                style="width: 30px; height: 30px; background: #fcb82e; color: black; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; flex-shrink: 0;">
                                                2</div>
                                            <div>
                                                <h4 style="font-weight: 600;">Warm Introduction</h4>
                                                <p style="color: #64748b; font-size: 0.9rem;">Talk to the founders
                                                    first. Ensure
                                                    they are interested in the program benefits before referring.</p>
                                            </div>
                                        </div>
                                        <div style="display: flex; gap: 1rem;">
                                            <div
                                                style="width: 30px; height: 30px; background: #fcb82e; color: black; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; flex-shrink: 0;">
                                                3</div>
                                            <div>
                                                <h4 style="font-weight: 600;">Submit via Dashboard</h4>
                                                <p style="color: #64748b; font-size: 0.9rem;">Use the "Add Referral"
                                                    button.
                                                    Provide a clear note on why they are a good fit for better selection
                                                    odds.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="btn-primary" style="margin-top: 2rem; width: 100%;"
                                        onclick="startGuideTutorial()">
                                        <i class="fa-solid fa-play"></i> Start Interactive Tutorial
                                    </button>
                                </div>

                                <div class="card">
                                    <h3 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1.5rem;"><i
                                            class="fa-solid fa-award"></i> Reward Tier System</h3>
                                    <table style="width: 100%; border-collapse: collapse;">
                                        <thead style="text-align: left; border-bottom: 2px solid #f1f5f9;">
                                            <tr>
                                                <th style="padding: 1rem 0;">Tier</th>
                                                <th style="padding: 1rem 0;">Referrals Req.</th>
                                                <th style="padding: 1rem 0;">Reward Multiplier</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr style="border-bottom: 1px solid #f1f5f9;">
                                                <td style="padding: 1rem 0;"><span
                                                        class="badge-soft green">Bronze</span></td>
                                                <td>0 - 5</td>
                                                <td>1.0x (Base)</td>
                                            </tr>
                                            <tr style="border-bottom: 1px solid #f1f5f9;">
                                                <td style="padding: 1rem 0;"><span class="badge-soft blue">Silver</span>
                                                </td>
                                                <td>6 - 15</td>
                                                <td>1.15x</td>
                                            </tr>
                                            <tr style="border-bottom: 1px solid #f1f5f9;">
                                                <td style="padding: 1rem 0;"><span class="badge-soft gold">Gold</span>
                                                </td>
                                                <td>16+</td>
                                                <td>1.3x + Perks</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <div
                                        style="margin-top: 1.5rem; background: #f8fafc; padding: 1rem; border-radius: 8px; font-size: 0.85rem; color: #64748b;">
                                        <i class="fa-solid fa-circle-info"></i> Tiers are calculated based on successful
                                        conversions in the last 12 months.
                                    </div>
                                </div>
                            </div>

                            <div class="card">
                                <h3 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1.5rem;"><i
                                        class="fa-solid fa-toolbox"></i> Connector Resources</h3>
                                <div style="display: flex; flex-direction: column; gap: 1rem;">
                                    <div
                                        style="padding: 1rem; border: 1px solid #e2e8f0; border-radius: 12px; display: flex; align-items: center; justify-content: space-between;">
                                        <div style="display: flex; align-items: center; gap: 1rem;">
                                            <div style="font-size: 1.5rem; color: #ef4444;"><i
                                                    class="fa-solid fa-file-pdf"></i>
                                            </div>
                                            <div>
                                                <div style="font-weight: 600;">Ecosystem One-pager</div>
                                                <div style="font-size: 0.8rem; color: #64748b;">Perfect to share with
                                                    founders
                                                </div>
                                            </div>
                                        </div>
                                        <button class="btn-icon" onclick="downloadAsset('one-pager')"><i
                                                class="fa-solid fa-download"></i></button>
                                    </div>
                                    <div
                                        style="padding: 1rem; border: 1px solid #e2e8f0; border-radius: 12px; display: flex; align-items: center; justify-content: space-between;">
                                        <div style="display: flex; align-items: center; gap: 1rem;">
                                            <div style="font-size: 1.5rem; color: #3b82f6;"><i
                                                    class="fa-solid fa-file-powerpoint"></i></div>
                                            <div>
                                                <div style="font-weight: 600;">Connector Presentation</div>
                                                <div style="font-size: 0.8rem; color: #64748b;">For community
                                                    presentations
                                                </div>
                                            </div>
                                        </div>
                                        <button class="btn-icon" onclick="downloadAsset('deck')"><i
                                                class="fa-solid fa-download"></i></button>
                                    </div>
                                    <div
                                        style="padding: 1rem; border: 1px solid #e2e8f0; border-radius: 12px; display: flex; align-items: center; justify-content: space-between;">
                                        <div style="display: flex; align-items: center; gap: 1rem;">
                                            <div style="font-size: 1.5rem; color: #22c55e;"><i
                                                    class="fa-solid fa-image"></i>
                                            </div>
                                            <div>
                                                <div style="font-weight: 600;">Social Media Kit</div>
                                                <div style="font-size: 0.8rem; color: #64748b;">LinkedIn and Twitter
                                                    assets
                                                </div>
                                            </div>
                                        </div>
                                        <button class="btn-icon" onclick="downloadAsset('social-kit')"><i
                                                class="fa-solid fa-download"></i></button>
                                    </div>
                                </div>

                                <div class="subtle-divider" style="margin: 2rem 0;"></div>

                                <h4 style="font-weight: 700; margin-bottom: 1rem;">Important Policies</h4>
                                <ul
                                    style="padding-left: 1.25rem; color: #64748b; font-size: 0.9rem; display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 2rem;">
                                    <li>Self-referrals are not eligible for rewards.</li>
                                    <li>Startups must be new to the Alchemy database.</li>
                                    <li>Rewards are processed 15 days after program completion.</li>
                                </ul>
                                <button class="btn" style="width: 100%;"
                                    onclick="showSection('inbox'); showToast('Support ticket opened', 'info')">
                                    <i class="fa-solid fa-headset"></i> Contact Connector Support
                                </button>
                            </div>
                        </div>
                    </section>
                </div>
    </main>

    <script>
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });

            const targetSection = document.getElementById(sectionId);
            if (targetSection) targetSection.classList.add('active');

            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });

            // Map sub-pages to parent tabs
            let tabId = 'tab-' + sectionId;
            if (sectionId === 'program-details') tabId = 'tab-programs';

            const activeTab = document.getElementById(tabId);
            if (activeTab) activeTab.classList.add('active');

            const sectionTitle = document.getElementById('sectionTitle');
            const sectionSubtitle = document.getElementById('sectionSubtitle');

            if (sectionId === 'overview') {
                sectionTitle.textContent = 'Connector Overview';
                sectionSubtitle.textContent = 'Track your referrals, rewards, and impact across the ecosystem';
            } else if (sectionId === 'programs') {
                sectionTitle.textContent = 'Explore Programs';
                sectionSubtitle.textContent = 'Discover and apply to ecosystem programs relevant to your network.';
            } else if (sectionId === 'program-details') {
                sectionTitle.textContent = 'Program Specifics';
                sectionSubtitle.textContent = 'Review detailed information before referring a startup.';
            } else if (sectionId === 'referrals') {
                sectionTitle.textContent = 'My Referrals';
                sectionSubtitle.textContent = 'Detailed view of all startups you have referred across programs.';
            } else if (sectionId === 'referral-tracking') {
                sectionTitle.textContent = 'Referral Link Tracking';
                sectionSubtitle.textContent = 'Monitor clicks, conversions, and performance of your referral links.';
            } else if (sectionId === 'rewards') {
                sectionTitle.textContent = 'Rewards & Earnings';
                sectionSubtitle.textContent = 'Monitor your earnings, pending rewards, and payout history.';
            } else if (sectionId === 'analytics') {
                sectionTitle.textContent = 'Connector Analytics';
                sectionSubtitle.textContent = 'Understand which programs and sectors perform best for your referrals.';
            } else if (sectionId === 'profile') {
                sectionTitle.textContent = 'Profile & Settings';
                sectionSubtitle.textContent = 'Manage your connector profile, preferences, and payout details.';
            } else if (sectionId === 'inbox') {
                sectionTitle.textContent = 'Notification Inbox';
                sectionSubtitle.textContent = 'Track referral successes, earning alerts, and network news.';
            } else if (sectionId === 'guide') {
                sectionTitle.textContent = 'Connector Success Guide';
                sectionSubtitle.textContent = 'Learn strategies to maximize your impact and unlock premium reward tiers.';
            }
        }

        // Profile Photo Upload Handler
        function handleProfilePhotoUpload(event) {
            const file = event.target.files[0];
            if (file) {
                // Validate file type
                if (!file.type.startsWith('image/')) {
                    showToast('Please select a valid image file.', 'info');
                    return;
                }

                // Validate file size (max 5MB)
                if (file.size > 5 * 1024 * 1024) {
                    showToast('Image size should be less than 5MB.', 'info');
                    return;
                }

                showToast('Uploading profile photo...', 'info');

                // Create a FileReader to preview the image
                const reader = new FileReader();
                reader.onload = function (e) {
                    // Update all avatar elements
                    const avatarElements = [
                        document.getElementById('userAvatar'),
                        document.getElementById('profileAvatar')
                    ];

                    avatarElements.forEach(avatar => {
                        if (avatar) {
                            // Replace text with image
                            avatar.innerHTML = '';
                            avatar.style.backgroundImage = `url(${e.target.result})`;
                            avatar.style.backgroundSize = 'cover';
                            avatar.style.backgroundPosition = 'center';
                        }
                    });

                    setTimeout(() => {
                        showToast('Profile photo updated successfully!', 'success');
                    }, 1000);
                };

                reader.readAsDataURL(file);
            }
        }

        // Payout Requirements Modal Functions
        function openPayoutRequirementsModal() {
            document.getElementById('payoutRequirementsModal').style.display = 'flex';
            showToast('Loading payout requirements...', 'info');
        }

        function closePayoutRequirementsModal() {
            document.getElementById('payoutRequirementsModal').style.display = 'none';
        }

        function viewMessage(id) {
            showToast("Decrypting message...", "info");
            setTimeout(() => {
                showToast("Message decrypted successfully!", "success");
            }, 800);
        }

        // Guide Functions
        function startGuideTutorial() {
            showToast("Starting interactive guide... Please follow the highlighted indicators.", "info");
            setTimeout(() => {
                showToast("Step 1: Focus on high-conversion sectors like HealthTech.", "success");
                const healthChip = document.querySelector('.metric-chip:first-child');
                if (healthChip) {
                    healthChip.style.boxShadow = "0 0 15px #fcb82e";
                    setTimeout(() => healthChip.style.boxShadow = "", 3000);
                }
            }, 2000);
        }

        function downloadAsset(assetName) {
            showToast(`Generating ${assetName} resource...`, "info");
            setTimeout(() => {
                showToast(`${assetName.charAt(0).toUpperCase() + assetName.slice(1)} downloaded!`, "success");
            }, 1000);
        }

        function viewReferralDetails(startupName) {
            showToast(`Loading detailed analytics for ${startupName}...`, "info");
            setTimeout(() => {
                showToast(`${startupName} profile loaded. Showing engagement metrics.`, "success");
            }, 1000);
        }

        // Referral Modal Functions
        function openAddReferralModal() {
            document.getElementById('addReferralModal').style.display = 'flex';
            document.getElementById('referralLinkOutput').style.display = 'none';
            document.getElementById('genLinkBtn').style.display = 'block';

            // Reset the select options to match the latest programs
            const linkSelect = document.getElementById('programLinkSelect');
            const mainSelect = document.getElementById('programSelect');

            // If mainSelect exists (which it should if allPrograms is loaded), sync options
            // allPrograms is a global array of published programs
            if (linkSelect && typeof allPrograms !== 'undefined') {
                linkSelect.innerHTML = '<option value="">Choose a program for referral...</option>' +
                    allPrograms.map(item => `<option value="${item.id}">${item.title}</option>`).join('');
            }
        }

        function closeAddReferralModal() {
            document.getElementById('addReferralModal').style.display = 'none';
        }


        async function generateReferralLink() {
            const oppId = document.getElementById('programLinkSelect').value;
            if (!oppId) {
                showToast("Please select a program first.", "info");
                return;
            }

            const btn = document.getElementById('genLinkBtn');
            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Generating...';
            btn.disabled = true;

            try {
                const res = await fetch('/api/referrals/generate-link', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ opportunity_id: oppId })
                });
                const json = await res.json();

                if (json.success) {
                    showToast("Referral link generated!", "success");
                    document.getElementById('referralUrlInput').value = json.join_url;

                    // Generate QR Code
                    const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(json.join_url)}`;
                    document.getElementById('referralQrImg').src = qrUrl;

                    document.getElementById('referralLinkOutput').style.display = 'block';
                    btn.style.display = 'none';

                    // Refresh referrals table to show the new "Link-based Lead"
                    loadMyReferrals();
                } else {
                    showToast(json.error || "Failed to generate link", "info");
                }
            } catch (err) {
                console.error(err);
                showToast("Error generating link", "info");
            } finally {
                btn.innerHTML = 'Generate Unique Referral Link <i class="fa-solid fa-link"></i>';
                btn.disabled = false;
            }
        }

        function copyReferralLink() {
            const input = document.getElementById('referralUrlInput');
            input.select();
            document.execCommand('copy');
            showToast("Link copied to clipboard!", "success");
        }

        async function loadMyReferrals() {
            const tbody = document.getElementById('referralsTableBody');
            if (!tbody) return;

            try {
                const res = await fetch('/api/referrals/my');
                const json = await res.json();

                if (json.success) {
                    tbody.innerHTML = json.referrals.map(r => {
                        const date = new Date(r.created_at).toLocaleDateString();

                        let statusClass = 'pending';
                        let statusLabel = r.status;
                        let statusIcon = '';

                        if (r.status === 'accepted') {
                            statusClass = 'completed';
                            statusLabel = 'Claimed';
                            statusIcon = '<i class="fa-solid fa-check-circle"></i> ';
                        } else if (r.status === 'pending_link') {
                            statusClass = 'in-progress';
                            statusLabel = 'Link Active';
                            statusIcon = '<i class="fa-solid fa-link"></i> ';
                        } else if (r.status === 'rejected') {
                            statusClass = 'failed';
                            statusLabel = 'Rejected';
                            statusIcon = '<i class="fa-solid fa-times-circle"></i> ';
                        } else {
                            statusClass = 'pending';
                            statusLabel = 'Pending';
                            statusIcon = '<i class="fa-solid fa-clock"></i> ';
                        }

                        const startupNameHtml = r.is_link_referral && r.status === 'pending_link'
                            ? `<span style="color: #6366f1; font-weight: 600;"><i class="fa-solid fa-qrcode"></i> Awaiting Startup Login</span>`
                            : `<span style="font-weight: 600;">${r.startup_name}</span>`;

                        // Action button - copy link for active links, view details for others
                        let actionButton = '';
                        if (r.is_link_referral && r.status === 'pending_link' && r.token) {
                            const linkUrl = window.location.origin + '/api/referrals/join/' + r.token;
                            actionButton = `
                                <button class="btn-icon" onclick="copyToClipboard('${linkUrl}', 'Referral link copied!')" title="Copy referral link" style="background: #6366f1; color: white;">
                                    <i class="fa-solid fa-copy"></i>
                                </button>
                            `;
                        } else {
                            actionButton = `
                                <button class="btn-icon" onclick="viewReferralDetails('${r.startup_name}', ${r.id})">
                                    <i class="fa-solid fa-eye"></i>
                                </button>
                            `;
                        }

                        return `
                        <tr>
                            <td>${startupNameHtml}</td>
                            <td>${r.opportunity_title}</td>
                            <td>${date}</td>
                            <td><span class="status-pill ${statusClass}">${statusIcon}${statusLabel}</span></td>
                            <td style="color: #64748b; font-weight: 700;">-</td>
                            <td>
                                ${actionButton}
                            </td>
                        </tr>
                        `;
                    }).join('');
                }
            } catch (err) {
                console.error(err);
            }
        }

        function copyToClipboard(text, message) {
            navigator.clipboard.writeText(text).then(() => {
                showToast(message || "Copied to clipboard!", "success");
            }).catch(err => {
                // Fallback for older browsers
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                showToast(message || "Copied to clipboard!", "success");
            });
        }

        let referralsPage = 1;

        function paginateReferralsTab(page) {
            const tbody = document.getElementById('referralsTableBody');
            const countLabel = document.getElementById('referralsTableCount');
            const btns = document.querySelectorAll('#referrals .pagination-btn');

            if (page === 'prev') {
                if (referralsPage > 1) referralsPage--;
            } else if (page === 'next') {
                if (referralsPage < 2) referralsPage++;
            } else {
                referralsPage = page;
            }

            // Update UI
            btns.forEach(btn => {
                btn.classList.remove('active');
                if (parseInt(btn.textContent) === referralsPage) {
                    btn.classList.add('active');
                }
            });

            showToast(`Loading page ${referralsPage}...`, 'info');

            if (referralsPage === 2) {
                tbody.innerHTML = `
                    <tr>
                        <td style="font-weight: 600;">EduLearn Platform</td>
                        <td>EdTech Growth Program</td>
                        <td>Jan 12, 2026</td>
                        <td><span class="status-pill failed">Rejected</span></td>
                        <td style="color: #64748b; font-weight: 700;">0</td>
                        <td>
                            <button class="btn-icon" onclick="viewReferralDetails('EduLearn Platform')">
                                <i class="fa-solid fa-eye"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td style="font-weight: 600;">CloudNest</td>
                        <td>AI Logistics Pilot</td>
                        <td>Jan 8, 2026</td>
                        <td><span class="status-pill completed">Completed</span></td>
                        <td style="color: #22c55e; font-weight: 700;">2,000</td>
                        <td>
                            <button class="btn-icon" onclick="viewReferralDetails('CloudNest')">
                                <i class="fa-solid fa-eye"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td style="font-weight: 600;">SmartMobility Inc</td>
                        <td>Smart Mobility Initiative</td>
                        <td>Jan 27, 2026</td>
                        <td><span class="status-pill in-progress">Pitch Scheduled</span></td>
                        <td style="color: #3b82f6; font-weight: 700;">2,800</td>
                        <td>
                            <button class="btn-icon" onclick="viewReferralDetails('SmartMobility Inc')">
                                <i class="fa-solid fa-eye"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td style="font-weight: 600;">DataVault Security</td>
                        <td>Cybersecurity Innovation</td>
                        <td>Jan 5, 2026</td>
                        <td><span class="status-pill completed">Completed</span></td>
                        <td style="color: #22c55e; font-weight: 700;">4,000</td>
                        <td>
                            <button class="btn-icon" onclick="viewReferralDetails('DataVault Security')">
                                <i class="fa-solid fa-eye"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td style="font-weight: 600;">EcoCircle</td>
                        <td>Sustainable Energy Challenge</td>
                        <td>Jan 23, 2026</td>
                        <td><span class="status-pill in-progress">Due Diligence</span></td>
                        <td style="color: #3b82f6; font-weight: 700;">3,000</td>
                        <td>
                            <button class="btn-icon" onclick="viewReferralDetails('EcoCircle')">
                                <i class="fa-solid fa-eye"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td style="font-weight: 600;">RetailTech Hub</td>
                        <td>Retail Innovation Sprint</td>
                        <td>Jan 28, 2026</td>
                        <td><span class="status-pill pending">Application Submitted</span></td>
                        <td style="color: #f59e0b; font-weight: 700;">1,800</td>
                        <td>
                            <button class="btn-icon" onclick="viewReferralDetails('RetailTech Hub')">
                                <i class="fa-solid fa-eye"></i>
                            </button>
                        </td>
                    </tr>
                `;
                countLabel.textContent = "Showing 7-12 of 12 referrals";
            } else {
                tbody.innerHTML = `
                    <tr>
                        <td style="font-weight: 600;">BioStream</td>
                        <td>HealthTech Accelerator</td>
                        <td>Jan 15, 2026</td>
                        <td><span class="status-pill completed">Completed</span></td>
                        <td style="color: #22c55e; font-weight: 700;">2,500</td>
                        <td>
                            <button class="btn-icon" onclick="viewReferralDetails('BioStream')">
                                <i class="fa-solid fa-eye"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td style="font-weight: 600;">GreenWave AI</td>
                        <td>Sustainable Energy Challenge</td>
                        <td>Jan 18, 2026</td>
                        <td><span class="status-pill in-progress">In Progress</span></td>
                        <td style="color: #3b82f6; font-weight: 700;">3,000</td>
                        <td>
                            <button class="btn-icon" onclick="viewReferralDetails('GreenWave AI')">
                                <i class="fa-solid fa-eye"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td style="font-weight: 600;">QuantumScale</td>
                        <td>AI Logistics Pilot</td>
                        <td>Jan 20, 2026</td>
                        <td><span class="status-pill pending">Pending Review</span></td>
                        <td style="color: #f59e0b; font-weight: 700;">2,000</td>
                        <td>
                            <button class="btn-icon" onclick="viewReferralDetails('QuantumScale')">
                                <i class="fa-solid fa-eye"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td style="font-weight: 600;">MedSync Health</td>
                        <td>HealthTech Accelerator</td>
                        <td>Jan 22, 2026</td>
                        <td><span class="status-pill in-progress">Shortlisted</span></td>
                        <td style="color: #3b82f6; font-weight: 700;">2,500</td>
                        <td>
                            <button class="btn-icon" onclick="viewReferralDetails('MedSync Health')">
                                <i class="fa-solid fa-eye"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td style="font-weight: 600;">FinFlow Pro</td>
                        <td>FinTech Innovation Program</td>
                        <td>Jan 10, 2026</td>
                        <td><span class="status-pill completed">Completed</span></td>
                        <td style="color: #22c55e; font-weight: 700;">3,500</td>
                        <td>
                            <button class="btn-icon" onclick="viewReferralDetails('FinFlow Pro')">
                                <i class="fa-solid fa-eye"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td style="font-weight: 600;">AgriTech Solutions</td>
                        <td>AgriTech Accelerator</td>
                        <td>Jan 25, 2026</td>
                        <td><span class="status-pill pending">Under Review</span></td>
                        <td style="color: #f59e0b; font-weight: 700;">2,200</td>
                        <td>
                            <button class="btn-icon" onclick="viewReferralDetails('AgriTech Solutions')">
                                <i class="fa-solid fa-eye"></i>
                            </button>
                        </td>
                    </tr>
                `;
                countLabel.textContent = "Showing 1-6 of 12 referrals";
            }
            // Trigger filter after pagination to maintain filter state
            // filterReferrals(true); // Deprecated
        }

        async function updateReferralsTabFilter(filter, btn = null) {
            // If btn is not provided, find the correct one by filter value
            if (!btn) {
                const pills = document.querySelectorAll('#referrals .filter-pill');
                pills.forEach(p => {
                    const onclickStr = p.getAttribute('onclick') || '';
                    if (onclickStr.includes(`'${filter}'`)) {
                        btn = p;
                    }
                });
            }

            // Update UI
            if (btn && btn.parentElement) {
                btn.parentElement.querySelectorAll('.filter-pill').forEach(p => p.classList.remove('active'));
                btn.classList.add('active');
            }

            showToast(`Viewing: ${filter.charAt(0).toUpperCase() + filter.slice(1)} referrals`, 'info');

            // Use pagination to show mock data
            paginateReferralsTab(1);
        }

        function filterReferrals(skipToast) {
            // Logic moved to updateReferralsTabFilter
        }

        function viewReferralDetails(startupName) {
            showToast(`Loading detailed analytics for ${startupName}...`, "info");
            setTimeout(() => {
                showToast(`${startupName} profile loaded. Showing engagement metrics.`, "success");
            }, 1000);
        }

        function openTierBenefitsModal() {
            document.getElementById('tierBenefitsModal').style.display = 'flex';
            showToast('Loading tier benefits...', 'info');
        }

        function closeTierBenefitsModal() {
            document.getElementById('tierBenefitsModal').style.display = 'none';
        }

        // Toast Notification System
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                bottom: 30px;
                right: 30px;
                background: ${type === 'success' ? '#10b981' : type === 'info' ? '#3b82f6' : '#f59e0b'};
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 0.75rem;
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                z-index: 20000;
                display: flex;
                align-items: center;
                gap: 0.75rem;
                font-weight: 500;
                transform: translateY(100px);
                transition: transform 0.3s ease;
            `;

            const icon = type === 'success' ? 'fa-check-circle' : type === 'info' ? 'fa-info-circle' : 'fa-exclamation-circle';
            toast.innerHTML = `<i class="fas ${icon}"></i> <span>${message}</span>`;

            document.body.appendChild(toast);
            setTimeout(() => toast.style.transform = 'translateY(0)', 100);
            setTimeout(() => {
                toast.style.transform = 'translateY(100px)';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        function logout() {
            window.location.href = '/logout';
        }
    </script>
    <script>
        // --- Dashboard State ---
        let state = {
            overview: { page: 1, timeframe: '30d' },
            rewards: { page: 1, type: 'all' },
            referrals: { page: 1, query: '' }
        };

        // --- Core Loading Functions ---

        async function loadEnablerOverview(timeframe = null, page = null) {
            if (timeframe) state.overview.timeframe = timeframe;
            if (page !== null) {
                if (page === 'prev') state.overview.page = Math.max(1, state.overview.page - 1);
                else if (page === 'next') state.overview.page = Math.min(2, state.overview.page + 1);
                else state.overview.page = page;
            }

            try {
                const res = await fetch(`/api/enabler/dashboard/overview?timeframe=${state.overview.timeframe}&page=${state.overview.page}`);
                const json = await res.json();
                if (!json.success) return;

                const { summary, recent_referrals } = json.data;

                // Update Overview Cards
                document.getElementById('totalReferralsValue').textContent = summary.total_referrals ?? 0;
                document.getElementById('confirmedEarningsValue').textContent = ' ' + Number(summary.confirmed_earnings ?? 0).toLocaleString('en-IN');
                document.getElementById('flcPointsValue').textContent = Number(summary.flc_points ?? 0).toLocaleString();
                document.getElementById('conversionRateValue').textContent = Math.round((summary.conversion_rate ?? 0) * 100) + '%';

                // Update Recent Referrals Table
                const tbody = document.getElementById('recentReferralsBody');
                if (tbody) {
                    tbody.innerHTML = recent_referrals.map(ref => {
                        let appBadge = '';
                        if (ref.application_status) {
                            const aS = ref.application_status.toUpperCase();
                            let color = '#3b82f6';
                            if (aS === 'REJECTED') color = '#ef4444';
                            if (aS === 'SHORTLISTED') color = '#10b981';
                            appBadge = `<div style="font-size: 0.65rem; margin-top: 0.2rem; font-weight: 700; color: ${color}; text-transform: uppercase;">App: ${aS}</div>`;
                        }

                        return `
                        <tr>
                            <td>
                                <div>${ref.startup_name}</div>
                                ${appBadge}
                                <div class="label-muted">Referred on ${new Date(ref.created_at).toLocaleDateString()}</div>
                            </td>
                            <td>
                                <span class="pill">
                                    <span class="pill-dot" style="background: ${ref.status === 'open' ? '#3b82f6' : ref.status === 'successful' ? '#22c55e' : '#ef4444'}"></span>
                                    ${ref.program_name}
                                </span>
                            </td>
                            <td>
                                <span class="status-pill ${ref.status === 'open' ? 'in-progress' : ref.status === 'successful' ? 'completed' : 'failed'}">
                                    ${ref.status.charAt(0).toUpperCase() + ref.status.slice(1)}
                                </span>
                            </td>
                            <td>${ref.reward}</td>
                            <td>${timeSince(new Date(ref.created_at))} ago</td>
                        </tr>
                        `;
                    }).join('');
                }

                updatePaginationUI('overviewPagination', state.overview.page);
            } catch (err) { console.error('Overview error:', err); }
        }

        async function loadRewardsHistory(page = null, type = null) {
            if (type !== null) state.rewards.type = type;
            if (page !== null) {
                if (page === 'prev') state.rewards.page = Math.max(1, state.rewards.page - 1);
                else if (page === 'next') state.rewards.page = Math.min(2, state.rewards.page + 1);
                else state.rewards.page = page;
            }

            try {
                const res = await fetch(`/api/enabler/rewards/history?page=${state.rewards.page}&type=${state.rewards.type}`);
                const json = await res.json();
                if (!json.success) return;

                const { items } = json.data;
                const tbody = document.getElementById('rewardsHistoryBody');
                if (tbody) {
                    tbody.innerHTML = items.map(item => {
                        const amountText = item.amount_money ?
                            (item.amount_money > 0 ? '+ ' : '- ') + Math.abs(item.amount_money).toLocaleString() :
                            '+ ' + item.amount_points + ' pts';
                        const color = item.amount_money < 0 ? '#ef4444' : '#22c55e';

                        return `
                            <tr>
                                <td>${new Date(item.created_at).toLocaleDateString()}</td>
                                <td>
                                    <span class="badge-soft ${item.reward_type === 'cash' ? 'green' : item.reward_type === 'points' ? 'blue' : 'gold'}">
                                        <i class="fa-solid ${item.reward_type === 'cash' ? 'fa-indian-rupee-sign' : item.reward_type === 'points' ? 'fa-coins' : 'fa-wallet'}"></i>
                                        ${item.reward_type.toUpperCase()}
                                    </span>
                                </td>
                                <td>${item.startup_name}  ${item.program_name}</td>
                                <td style="color: ${color}; font-weight: 600;">${amountText}</td>
                                <td>${item.payout_method === 'Points' ? '3,420 pts' : '32,600'}</td>
                                <td><span class="status-pill completed">${item.status}</span></td>
                            </tr>
                        `;
                    }).join('');
                }

                updatePaginationUI('rewardsPagination', state.rewards.page);
            } catch (err) { console.error('Rewards error:', err); }
        }

        async function loadRewardsSummary() {
            try {
                const res = await fetch('/api/enabler/rewards/summary');
                const json = await res.json();
                if (!json.success) return;
                const data = json.data;

                const format = (v) => ' ' + Number(v || 0).toLocaleString('en-IN');
                if (document.getElementById('rewardsAvailableBalance')) document.getElementById('rewardsAvailableBalance').textContent = format(data.available_balance);
                if (document.getElementById('rewardsPending')) document.getElementById('rewardsPending').textContent = format(data.pending_rewards);
                if (document.getElementById('rewardsAllTime')) document.getElementById('rewardsAllTime').textContent = format(data.all_time_earnings);
                if (document.getElementById('rewardsPoints')) document.getElementById('rewardsPoints').textContent = data.total_points ?? 0;
                if (document.getElementById('rewardsAvgReward')) document.getElementById('rewardsAvgReward').textContent = format(data.average_reward_per_completed_referral);
            } catch (err) { console.error('Summary error:', err); }
        }

        // --- Helper & UI Functions ---

        function updatePaginationUI(containerId, currentPage) {
            document.querySelectorAll(`#${containerId} .pagination-btn`).forEach(btn => {
                if (btn.textContent == currentPage) btn.classList.add('active');
                else if (!isNaN(btn.textContent)) btn.classList.remove('active');
            });
        }

        function timeSince(date) {
            const seconds = Math.floor((new Date() - date) / 1000);
            let intervals = { year: 31536000, month: 2592000, day: 86400, hour: 3600, minute: 60 };
            for (let [unit, sec] of Object.entries(intervals)) {
                let interval = seconds / sec;
                if (interval > 1) return Math.floor(interval) + " " + unit + (Math.floor(interval) > 1 ? 's' : '');
            }
            return Math.floor(seconds) + " seconds";
        }

        // --- Event Handlers ---

        function updateOverviewTimeframe(timeframe, btn) {
            btn.parentElement.querySelectorAll('.section-tab').forEach(t => t.classList.remove('active'));
            btn.classList.add('active');
            showToast(`Timeframe: ${timeframe === 'all' ? 'All Time' : 'Last 30 Days'} `, 'info');
            state.overview.page = 1;
            loadEnablerOverview(timeframe, 1);
        }

        function paginateReferrals(page) {
            showToast(`Loading page ${page}...`, 'info');
            loadEnablerOverview(null, page);
        }

        function updateActivityFilter(status, btn) {
            // Update UI tabs
            btn.parentElement.querySelectorAll('.filter-pill').forEach(p => p.classList.remove('active'));
            btn.classList.add('active');

            const tbody = document.getElementById('recentReferralsBody');
            const footer = document.querySelector('.table-container .table-footer strong');
            const totalRef = document.querySelectorAll('.table-container .table-footer strong')[1];

            showToast(`Filtering by: ${status.charAt(0).toUpperCase() + status.slice(1)}`, 'info');

            if (status === 'completed') {
                // Show fake completed data
                tbody.innerHTML = `
                    <tr>
                        <td>
                            <div>BioStream Systems</div>
                            <div class="label-muted">MedTech data platform</div>
                        </td>
                        <td>
                            <span class="pill">
                                <span class="pill-dot blue"></span>
                                HealthTech Accelerator
                            </span>
                        </td>
                        <td>
                            <span class="status-pill completed">Settled</span>
                        </td>
                        <td>12,500</td>
                        <td>3 weeks ago</td>
                    </tr>
                    <tr>
                        <td>
                            <div>SolarLens</div>
                            <div class="label-muted">Renewable energy monitoring</div>
                        </td>
                        <td>
                            <span class="pill">
                                <span class="pill-dot green"></span>
                                Green Energy Initiative
                            </span>
                        </td>
                        <td>
                            <span class="status-pill completed">Completed</span>
                        </td>
                        <td>10,000</td>
                        <td>1 month ago</td>
                    </tr>
                    <tr>
                        <td>
                            <div>FinFlow</div>
                            <div class="label-muted">Neo-banking for SMEs</div>
                        </td>
                        <td>
                            <span class="pill">
                                <span class="pill-dot blue"></span>
                                Fintech Innovation Program
                            </span>
                        </td>
                        <td>
                            <span class="status-pill completed">Success</span>
                        </td>
                        <td>15,000</td>
                        <td>2 months ago</td>
                    </tr>
                `;
                if (footer) footer.textContent = '3';
                if (totalRef) totalRef.textContent = '9';
            } else {
                // Restore original (or reload from API)
                loadEnablerOverview();
            }
        }

        function showAnalyticsDetail(type) {
            const detailView = document.getElementById('analyticsDetailView');
            const title = document.getElementById('analyticsDetailTitle');
            const content = document.getElementById('analyticsDetailContent');
            const tbody = document.getElementById('recentReferralsBody');
            const footer = document.querySelector('.table-container .table-footer strong');
            const totalRef = document.querySelectorAll('.table-container .table-footer strong')[1];

            detailView.style.display = 'block';
            showToast(`Loading ${type} details...`, 'info');

            // Navigate to My Referrals section and apply filter
            if (type === 'active' || type === 'completed') {
                setTimeout(() => {
                    showSection('referrals');
                    updateReferralsTabFilter(type);
                }, 1000);
                return;
            }

            // Find the filter pills and sync if possible
            const activePill = document.querySelector('.filter-pill[onclick*="active"]');
            const completedPill = document.querySelector('.filter-pill[onclick*="completed"]');

            if (type === 'active') {
                if (activePill) {
                    activePill.parentElement.querySelectorAll('.filter-pill').forEach(p => p.classList.remove('active'));
                    activePill.classList.add('active');
                }
                title.innerHTML = '<i class="fa-solid fa-bolt" style="color: #3b82f6;"></i> Active Referrals Breakdown';
                content.innerHTML = `
                    <p style="margin-bottom: 0.5rem;">Your current active pipeline of 14 startups is distributed across 4 strategic programs.</p>
                    <div style="display: flex; flex-direction: column; gap: 0.4rem;">
                        <div style="display: flex; justify-content: space-between;"><span>Healthcare Pilot</span><strong>5 startups</strong></div>
                        <div style="display: flex; justify-content: space-between;"><span>TechSprint Cohort</span><strong>4 startups</strong></div>
                        <div style="display: flex; justify-content: space-between;"><span>Smart Mobility</span><strong>3 startups</strong></div>
                        <div style="display: flex; justify-content: space-between;"><span>SaaS Scaler</span><strong>2 startups</strong></div>
                    </div>
                `;

                // Populate Table with fake items
                const activeStartups = [
                    ['Quantum AI', 'TechSprint', 'In Review', '15k'],
                    ['HealthBot', 'Healthcare Pilot', 'Shortlisted', '12k'],
                    ['MobiRoute', 'Smart Mobility', 'Pitch Scheduled', '10k'],
                    ['SaaSly', 'SaaS Scaler', 'Review', '8k'],
                    ['BioNano', 'Healthcare Pilot', 'Due Diligence', '20k'],
                    ['EcoDrive', 'Smart Mobility', 'Shortlisted', '12k'],
                    ['CyberShield', 'TechSprint', 'In Review', '18k'],
                    ['AgriCloud', 'TechSprint', 'Pitch', '14k'],
                    ['MedFlow', 'Healthcare Pilot', 'Review', '9k'],
                    ['CitySync', 'Smart Mobility', 'Review', '7k']
                ];

                tbody.innerHTML = activeStartups.map(s => `
                    <tr>
                        <td><div>${s[0]}</div><div class="label-muted">Startup in ${s[1]}</div></td>
                        <td><span class="pill"><span class="pill-dot blue"></span>${s[1]}</span></td>
                        <td><span class="status-pill in-progress">${s[2]}</span></td>
                        <td>${s[3]}</td>
                        <td>Recent</td>
                    </tr>
                `).join('');
                if (footer) footer.textContent = '10';
                if (totalRef) totalRef.textContent = '14';

            } else if (type === 'completed') {
                if (completedPill) {
                    completedPill.parentElement.querySelectorAll('.filter-pill').forEach(p => p.classList.remove('active'));
                    completedPill.classList.add('active');
                }
                title.innerHTML = '<i class="fa-solid fa-circle-check" style="color: #22c55e;"></i> Completed Selections Breakdown';
                content.innerHTML = `
                    <p style="margin-bottom: 0.5rem;">Total 9 startups successfully converted into their respective programs this period.</p>
                    <div style="display: flex; flex-direction: column; gap: 0.4rem;">
                        <div style="display: flex; justify-content: space-between;"><span>GreenTech Challenge</span><strong>4 success</strong></div>
                        <div style="display: flex; justify-content: space-between;"><span>Fintech 2025</span><strong>3 success</strong></div>
                        <div style="display: flex; justify-content: space-between;"><span>BioStream Pilot</span><strong>2 success</strong></div>
                    </div>
                `;

                const completedStartups = [
                    ['BioStream', 'BioStream Pilot', 'Settled', '2.5k'],
                    ['GreenWave', 'GreenTech Challenge', 'Completed', '3k'],
                    ['FinFlow', 'Fintech 2025', 'Settled', '15k'],
                    ['EcoPower', 'GreenTech Challenge', 'Success', '12k'],
                    ['SafeBank', 'Fintech 2025', 'Settled', '10k'],
                    ['OceanPulse', 'GreenTech Challenge', 'Settled', '8k'],
                    ['MedData', 'BioStream Pilot', 'Completed', '20k'],
                    ['SolarLens', 'GreenTech Challenge', 'Success', '5k'],
                    ['NeoPay', 'Fintech 2025', 'Settled', '12k']
                ];

                tbody.innerHTML = completedStartups.map(s => `
                    <tr>
                        <td><div>${s[0]}</div><div class="label-muted">Successful conversion</div></td>
                        <td><span class="pill"><span class="pill-dot green"></span>${s[1]}</span></td>
                        <td><span class="status-pill completed">${s[2]}</span></td>
                        <td>${s[3]}</td>
                        <td>Completed</td>
                    </tr>
                `).join('');
                if (footer) footer.textContent = '9';
                if (totalRef) totalRef.textContent = '9';
            } else {
                title.innerHTML = '<i class="fa-solid fa-file-export" style="color: #64748b;"></i> Total Submitted (28)';
                content.innerHTML = `<p>Total pool of startups referred across all programs in the current period.</p>`;
            }

            // Scroll to table
            const container = tbody.closest('.table-container');
            if (container) container.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function paginateRewards(page) {
            showToast(`Loading page ${page}...`, 'info');
            loadRewardsHistory(page);
        }

        function updateRewardFilter(type, btn) {
            btn.parentElement.querySelectorAll('.filter-pill').forEach(p => p.classList.remove('active'));
            btn.classList.add('active');
            showToast(`Filtering: ${type} `, 'info');
            state.rewards.page = 1;
            loadRewardsHistory(1, type);
        }

        function updateAnalyticsRange(range, btn) {
            btn.parentElement.querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.querySelectorAll('.summary-item strong').forEach(s => {
                const variance = range === '30D' ? 0.7 : (range === '90D' ? 1.0 : 2.5);
                s.innerText = Math.round(parseInt(s.dataset.base || s.innerText) * variance);
            });
            showToast(`Range: ${range} `, 'info');
        }

        function updateAnalyticsTab(tab, btn) {
            btn.parentElement.querySelectorAll('button').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            fetch('/api/enabler/analytics').then(r => r.json()).then(json => {
                const data = json.data.referral_stats;
                const container = document.querySelector('.referrals-summary');
                if (tab === 'status') {
                    container.innerHTML = `
                        <div class="summary-item"><span>Submitted</span><strong>${data.submitted}</strong></div>
                        <div class="summary-item"><span>Shortlisted</span><strong>${data.shortlisted}</strong></div>
                        <div class="summary-item"><span>Completed</span><strong>${data.completed}</strong></div>
                    `;
                } else {
                    container.innerHTML = `
                        <div class="summary-item"><span>HealthTech</span><strong>48%</strong></div>
                        <div class="summary-item"><span>FinTech</span><strong>36%</strong></div>
                        <div class="summary-item"><span>AgriTech</span><strong>25%</strong></div>
                    `;
                }
            });
            showToast(`Analytics: By ${tab}`, 'info');
        }

        function filterReferralsList(query) {
            document.querySelectorAll('#referralsTableBody tr').forEach(row => {
                row.style.display = row.innerText.toLowerCase().includes(query.toLowerCase()) ? '' : 'none';
            });
        }

        function filterReferralsByStatus(status) {
            const rows = document.querySelectorAll('#referralsTableBody tr');
            rows.forEach(row => {
                const statusPill = row.querySelector('.status-pill');
                if (status === 'all') {
                    row.style.display = '';
                } else if (statusPill) {
                    row.style.display = statusPill.classList.contains(status) ? '' : 'none';
                } else {
                    row.style.display = 'none';
                }
            });

            // Update UI
            document.querySelectorAll('.status-chip').forEach(c => c.style.borderColor = '#e2e8f0');
            if (status === 'in-progress') document.getElementById('chip-active').style.borderColor = '#3b82f6';
            if (status === 'completed') document.getElementById('chip-completed').style.borderColor = '#22c55e';

            showToast(`Filtering by status: ${status} `, 'info');
        }

        let allPrograms = [];
        async function loadPrograms() {
            console.log(" Loading programs for connector...");
            const programsGrid = document.getElementById('connectorProgramsGrid');
            if (programsGrid) {
                programsGrid.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 3rem;">
                        <i class="fa-solid fa-spinner fa-spin" style="font-size: 2rem; color: #fcb82e; margin-bottom: 1rem;"></i>
                        <p style="color: #666;">Curating exclusive programs for your network...</p>
                    </div>
                `;
            }

            try {
                // Fetch in parallel
                const [refRes, oppRes] = await Promise.all([
                    fetch('/api/referrals/my').catch(e => ({ ok: false })),
                    fetch('/api/opportunities/').catch(e => ({ ok: false }))
                ]);

                let acceptedOppIds = [];
                if (refRes && refRes.ok) {
                    const refJson = await refRes.json();
                    acceptedOppIds = (refJson.referrals || [])
                        .filter(r => r.status === 'accepted')
                        .map(r => r.opportunity_id);
                }

                if (!oppRes || !oppRes.ok) throw new Error("Opportunities API failed");
                const json = await oppRes.json();

                if (!json.success || !json.data || !json.data.items) {
                    console.error(" Failed to load programs:", json);
                    if (programsGrid) {
                        programsGrid.innerHTML = `
                            <div style="grid-column: 1/-1; text-align: center; padding: 3rem; background: #fff; border-radius: 1rem; border: 1px dashed #e2e8f0;">
                                <i class="fa-solid fa-circle-exclamation" style="font-size: 2rem; color: #ef4444; margin-bottom: 1rem;"></i>
                                <p style="color: #666; font-weight: 500;">Failed to synchronize programs. Please try again.</p>
                            </div>
                        `;
                    }
                    return;
                }

                allPrograms = json.data.items;
                console.log(` Connector loaded ${allPrograms.length} programs.`);

                const programSelect = document.getElementById('programSelect');
                if (programSelect) {
                    programSelect.innerHTML = '<option value="">Choose a program...</option>' +
                        allPrograms.map(item => `<option value="${item.id}">${item.title}</option>`).join('');
                }

                if (programsGrid) {
                    if (allPrograms.length === 0) {
                        programsGrid.innerHTML = `
                            <div style="grid-column: 1/-1; text-align: center; padding: 4rem; background: #fff; border-radius: 1.5rem; border: 2px dashed #e2e8f0;">
                                <i class="fa-solid fa-folder-open" style="font-size: 3rem; color: #cbd5e1; margin-bottom: 1.5rem;"></i>
                                <h3 style="color: #1e293b; margin-bottom: 0.5rem;">No Active Programs</h3>
                                <p style="color: #64748b;">There are currently no active programs available for referrals.</p>
                            </div>
                        `;
                        return;
                    }

                    programsGrid.innerHTML = allPrograms.map(item => {
                        const sectorsArray = typeof item.sectors === 'string' ? item.sectors.split(' ').filter(s => s) : (item.sectors || []);
                        const sectors = sectorsArray.slice(0, 2).map(s => `<span class="tag" style="background: rgba(99, 102, 241, 0.1); color: #6366f1; border: 1px solid rgba(99, 102, 241, 0.2); margin-right: 4px;">${s}</span>`).join('');
                        const logoChar = (item.title || 'P').charAt(0).toUpperCase();
                        const bannerImage = item.banner_url || 'https://images.unsplash.com/photo-1557804506-669a67965ba0?q=80&w=1974&auto=format&fit=crop';

                        const isTaken = acceptedOppIds.includes(item.id);
                        const buttonHtml = `<button class="apply-btn" onclick="viewProgramDetails(${item.id})"><i class="fa-solid fa-eye"></i> View Program</button>`;

                        return `
                        <div class="program-card ${isTaken ? 'taken' : ''}">
                            <div class="program-header" style="background-image: url('${bannerImage}')">
                                ${isTaken ? '<span class="status-badge" style="position: absolute; top: 1rem; right: 1rem; background: #22c55e; color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 700; box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 10;">TAKEN</span>' : ''}
                            </div>
                            <div class="program-body">
                                <div class="program-title">${item.title}</div>
                                <div class="program-company">${item.owner_company || 'Global Innovation Hub'}</div>
                                <div class="program-tags">
                                    ${sectors}
                                </div>
                                ${buttonHtml}
                            </div>
                        </div>
                    `;
                    }).join('');
                }
            } catch (err) {
                console.error(' Programs error:', err);
                if (programsGrid) {
                    programsGrid.innerHTML = `
                        <div style="grid-column: 1/-1; text-align: center; padding: 3rem; background: #fff; border-radius: 1rem; border: 1px dashed #e2e8f0;">
                            <i class="fa-solid fa-circle-exclamation" style="font-size: 2rem; color: #ef4444; margin-bottom: 1rem;"></i>
                            <p style="color: #666; font-weight: 500;">Critical error loading programs: ${err.message}</p>
                        </div>
                    `;
                }
            }
        }

        function viewProgramDetails(programId) {
            const program = allPrograms.find(p => p.id === programId);
            if (!program) return;

            // Update details view
            const banner = document.getElementById('programDetailsBanner');
            if (banner) banner.style.backgroundImage = `url('${program.banner_url || 'https://images.unsplash.com/photo-1557804506-669a67965ba0?q=80&w=1974&auto=format&fit=crop'}')`;

            const typeTag = document.getElementById('programDetailsType');
            if (typeTag) typeTag.textContent = program.type || 'Program';

            const titleElem = document.getElementById('programDetailsTitle');
            if (titleElem) titleElem.textContent = program.title;

            const descElem = document.getElementById('programDetailsDesc');
            if (descElem) descElem.textContent = program.description || 'No description available.';

            const eligElem = document.getElementById('programDetailsEligibility');
            if (eligElem) eligElem.textContent = program.eligibility || 'Open for all relevant startups.';

            const benefitsElem = document.getElementById('programDetailsBenefits');
            if (benefitsElem) benefitsElem.textContent = program.benefits || 'Check platform for full benefits package.';

            // Sectors
            const sectorsContainer = document.getElementById('programDetailsSectors');
            if (sectorsContainer) {
                sectorsContainer.innerHTML = (program.sectors || []).map(s => `<span class="tag" style="background: #eef2ff; color: #4f46e5; border: 1px solid #e0e7ff;">${s}</span>`).join('');
            }

            // Countries
            const countriesElem = document.getElementById('programDetailsCountries');
            if (countriesElem) countriesElem.textContent = (program.countries || []).join(', ') || 'Global Access';

            // Deadline
            const deadElem = document.getElementById('programDetailsDeadline');
            if (deadElem) {
                const deadline = program.deadline ? new Date(program.deadline).toLocaleDateString() : 'Rolling Selection';
                deadElem.textContent = deadline;
            }

            // Refer Button - now opens referral modal
            const referBtn = document.getElementById('referFromDetailsBtn');
            if (referBtn) {
                referBtn.onclick = () => {
                    referralManager.showReferralModal(program.id, program.title);
                };
            }

            showSection('program-details');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // --- Referral Link Tracking Functions ---
        function refreshReferralTracking() {
            console.log(" Refreshing referral link tracking data...");
            // Add loading state
            const refreshBtn = event.target;
            const originalText = refreshBtn.innerHTML;
            refreshBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Refreshing...';
            refreshBtn.disabled = true;

            // Simulate API call
            setTimeout(() => {
                refreshBtn.innerHTML = originalText;
                refreshBtn.disabled = false;
                showToast('Referral tracking data refreshed successfully!', 'success');
            }, 1500);
        }

        function generateNewReferralLink() {
            console.log(" Opening referral link generator...");
            // This would open a modal to select program and generate link
            showToast('Referral link generator coming soon!', 'info');
        }

        function copyReferralLink(token) {
            const baseUrl = window.location.origin;
            const referralUrl = `${baseUrl}/refer/${token}`;

            navigator.clipboard.writeText(referralUrl).then(() => {
                showToast(`Referral link copied: ${token}`, 'success');
            }).catch(() => {
                showToast('Failed to copy link. Please try again.', 'error');
            });
        }

        function viewLinkAnalytics(token) {
            console.log(` Viewing analytics for link: ${token}`);
            // This would show detailed analytics for the specific link
            showToast(`Analytics for ${token} - Feature coming soon!`, 'info');
        }

        function filterReferralLinks(filter) {
            console.log(` Filtering referral links by: ${filter}`);

            // Update active filter pill
            document.querySelectorAll('.table-filters .filter-pill').forEach(pill => {
                pill.classList.remove('active');
            });
            event.target.classList.add('active');

            // Filter logic would go here
            showToast(`Showing ${filter} referral links`, 'info');
        }

        // Toast notification function
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#22c55e' : type === 'error' ? '#ef4444' : '#3b82f6'};
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 10000;
                font-size: 14px;
                font-weight: 500;
                max-width: 300px;
                animation: slideInRight 0.3s ease-out;
            `;
            toast.textContent = message;

            document.body.appendChild(toast);

            setTimeout(() => {
                toast.style.animation = 'slideOutRight 0.3s ease-in';
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 3000);
        }

        // Add CSS animations for toast
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOutRight {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            showSection('programs');
            loadEnablerOverview();
            loadRewardsSummary();
            loadRewardsHistory();
            loadPrograms();
            updateReferralsTabFilter('all');

            // Store base values for analytics variance
            document.querySelectorAll('.summary-item strong').forEach(s => s.dataset.base = s.innerText);
        });
    </script>

    <script src="/static/js/api.js"></script>
    <script src="/static/js/auth.js"></script>
    <script src="/static/js/main.js"></script>
    <script src="/static/js/meetings.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('welcome') === 'true') {
                setTimeout(() => {
                    alert("Thank you for registering, {{ current_user.name }}!");
                    window.history.replaceState({}, document.title, window.location.pathname);
                }, 100);
            }
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const ctx = document.getElementById('connectorChart');
            if (ctx) {
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['Aug', 'Sep', 'Oct', 'Nov', 'Dec', 'Jan'],
                        datasets: [{
                            label: 'Earnings ()',
                            data: [12000, 15400, 21000, 18500, 24600, 35400],
                            borderColor: '#22c55e',
                            backgroundColor: 'rgba(34, 197, 94, 0.1)',
                            tension: 0.4,
                            fill: true,
                            pointRadius: 4,
                            pointBackgroundColor: '#22c55e'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                callbacks: {
                                    label: function (context) {
                                        return ' ' + context.parsed.y.toLocaleString();
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    drawBorder: false,
                                    color: 'rgba(0,0,0,0.05)'
                                },
                                ticks: {
                                    callback: function (value) {
                                        return '' + value / 1000 + 'k';
                                    }
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                }
                            }
                        }
                    }
                });
            }

            // Load initial data
            loadMyReferrals();

            // Initialize Analytics Referral Trend Chart
            const trendCtx = document.getElementById('referralTrendChart');
            if (trendCtx) {
                new Chart(trendCtx, {
                    type: 'line',
                    data: {
                        labels: ['Aug', 'Sep', 'Oct', 'Nov', 'Dec', 'Jan'],
                        datasets: [{
                            label: 'Referrals',
                            data: [3, 5, 4, 7, 6, 9],
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointRadius: 5,
                            pointHoverRadius: 7,
                            pointBackgroundColor: '#3b82f6',
                            pointBorderColor: '#fff',
                            pointBorderWidth: 2
                        }, {
                            label: 'Conversions',
                            data: [1, 2, 1, 2, 2, 3],
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointRadius: 5,
                            pointHoverRadius: 7,
                            pointBackgroundColor: '#10b981',
                            pointBorderColor: '#fff',
                            pointBorderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        plugins: {
                            legend: {
                                display: true,
                                position: 'top',
                                labels: {
                                    usePointStyle: true,
                                    padding: 15,
                                    font: {
                                        size: 12,
                                        weight: '600'
                                    }
                                }
                            },
                            tooltip: {
                                backgroundColor: '#1e293b',
                                padding: 12,
                                titleFont: {
                                    size: 13,
                                    weight: '600'
                                },
                                bodyFont: {
                                    size: 12
                                },
                                borderColor: '#e2e8f0',
                                borderWidth: 1
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    drawBorder: false,
                                    color: 'rgba(0,0,0,0.05)'
                                },
                                ticks: {
                                    stepSize: 2,
                                    font: {
                                        size: 11
                                    }
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                },
                                ticks: {
                                    font: {
                                        size: 11
                                    }
                                }
                            }
                        }
                    }
                });
            }
        });
    </script>

    <!-- QR Code Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <!-- Referral Link Manager -->
    <script src="/static/js/referral-links.js"></script>
</body>

</html>